91931e0ccfc555aa983de2e36bdf07b9
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _reactNative = require("react-native");

var _ExpoErrorRecovery = _interopRequireDefault(require("./ExpoErrorRecovery"));

var _ErroRecoveryStore = require("./ErroRecoveryStore");

if (_reactNative.Platform.OS !== 'web') {
  var globalHandler = ErrorUtils.getGlobalHandler();
  ErrorUtils.setGlobalHandler(function _callee(error, isFatal) {
    return _regenerator.default.async(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            if (!_ExpoErrorRecovery.default.saveRecoveryProps) {
              _context.next = 3;
              break;
            }

            _context.next = 3;
            return _regenerator.default.awrap(_ExpoErrorRecovery.default.saveRecoveryProps((0, _ErroRecoveryStore.getRecoveryPropsToSave)()));

          case 3:
            globalHandler(error, isFatal);

          case 4:
          case "end":
            return _context.stop();
        }
      }
    });
  });
} else {
  window.addEventListener('error', function () {
    _ExpoErrorRecovery.default.saveRecoveryProps((0, _ErroRecoveryStore.getRecoveryPropsToSave)());
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9FcnJvclJlY292ZXJ5LmZ4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFFQSxJQUFJLHNCQUFTLEVBQVQsS0FBZ0IsS0FBcEIsRUFBMkI7QUFDekIsTUFBTSxhQUFhLEdBQUcsVUFBVSxDQUFDLGdCQUFYLEVBQXRCO0FBR0EsRUFBQSxVQUFVLENBQUMsZ0JBQVgsQ0FBNEIsaUJBQU8sS0FBUCxFQUFjLE9BQWQ7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLGlCQUN0QiwyQkFBa0IsaUJBREk7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFBQSw4Q0FFbEIsMkJBQWtCLGlCQUFsQixDQUFvQyxnREFBcEMsQ0FGa0I7O0FBQUE7QUFJMUIsWUFBQSxhQUFhLENBQUMsS0FBRCxFQUFRLE9BQVIsQ0FBYjs7QUFKMEI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsR0FBNUI7QUFNRCxDQVZELE1BVU87QUFDTCxFQUFBLE1BQU0sQ0FBQyxnQkFBUCxDQUF3QixPQUF4QixFQUFpQyxZQUFLO0FBQ3BDLCtCQUFrQixpQkFBbEIsQ0FBb0MsZ0RBQXBDO0FBQ0QsR0FGRDtBQUdEIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGxhdGZvcm0gfSBmcm9tICdyZWFjdC1uYXRpdmUnO1xuaW1wb3J0IEV4cG9FcnJvclJlY292ZXJ5IGZyb20gJy4vRXhwb0Vycm9yUmVjb3ZlcnknO1xuaW1wb3J0IHsgZ2V0UmVjb3ZlcnlQcm9wc1RvU2F2ZSB9IGZyb20gJy4vRXJyb1JlY292ZXJ5U3RvcmUnO1xuXG5pZiAoUGxhdGZvcm0uT1MgIT09ICd3ZWInKSB7XG4gIGNvbnN0IGdsb2JhbEhhbmRsZXIgPSBFcnJvclV0aWxzLmdldEdsb2JhbEhhbmRsZXIoKTtcbiAgLy8gRXJyb3JVdGlscyBjYW1lIGZyb20gcmVhY3QtbmF0aXZlXG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC1uYXRpdmUvYmxvYi8xMTUxYzA5NmRhYjE3ZTVkOWE2YWMwNWI2MWFhY2VjZDQzMDVmM2RiL0xpYnJhcmllcy92ZW5kb3IvY29yZS9FcnJvclV0aWxzLmpzI0wyNVxuICBFcnJvclV0aWxzLnNldEdsb2JhbEhhbmRsZXIoYXN5bmMgKGVycm9yLCBpc0ZhdGFsKSA9PiB7XG4gICAgaWYgKEV4cG9FcnJvclJlY292ZXJ5LnNhdmVSZWNvdmVyeVByb3BzKSB7XG4gICAgICBhd2FpdCBFeHBvRXJyb3JSZWNvdmVyeS5zYXZlUmVjb3ZlcnlQcm9wcyhnZXRSZWNvdmVyeVByb3BzVG9TYXZlKCkpO1xuICAgIH1cbiAgICBnbG9iYWxIYW5kbGVyKGVycm9yLCBpc0ZhdGFsKTtcbiAgfSk7XG59IGVsc2Uge1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoKSA9PiB7XG4gICAgRXhwb0Vycm9yUmVjb3Zlcnkuc2F2ZVJlY292ZXJ5UHJvcHMoZ2V0UmVjb3ZlcnlQcm9wc1RvU2F2ZSgpKTtcbiAgfSk7XG59XG4iXSwic291cmNlUm9vdCI6IiJ9