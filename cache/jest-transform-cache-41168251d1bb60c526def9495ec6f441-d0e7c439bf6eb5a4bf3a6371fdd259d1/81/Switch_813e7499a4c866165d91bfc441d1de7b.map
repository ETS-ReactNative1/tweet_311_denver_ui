{"version":3,"sources":["Switch.js"],"names":["AndroidSwitchNativeComponent","require","Platform","React","StyleSheet","Switch","_handleChange","event","_nativeSwitchRef","value","props","OS","setNativeProps","on","onChange","onValueChange","nativeEvent","_handleSwitchNativeComponentRef","ref","disabled","ios_backgroundColor","style","thumbColor","trackColor","_thumbColor","_trackColorForFalse","false","_trackColorForTrue","true","thumbTintColor","tintColor","onTintColor","__DEV__","console","warn","platformProps","enabled","trackColorForFalse","trackColorForTrue","trackTintColor","accessibilityRole","returnsFalse","returnsTrue","compose","height","width","backgroundColor","borderRadius","Component","module","exports"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n * @format\n */\n\n'use strict';\n\nconst AndroidSwitchNativeComponent = require('./AndroidSwitchNativeComponent');\nconst Platform = require('../../Utilities/Platform');\nconst React = require('react');\nconst StyleSheet = require('../../StyleSheet/StyleSheet');\n\nimport type {ColorValue} from '../../StyleSheet/StyleSheetTypes';\nimport type {SyntheticEvent} from '../../Types/CoreEventTypes';\nimport type {ViewProps} from '../View/ViewPropTypes';\nimport SwitchNativeComponent from './SwitchNativeComponent';\n\ntype SwitchChangeEvent = SyntheticEvent<\n  $ReadOnly<{|\n    value: boolean,\n  |}>,\n>;\n\nexport type Props = $ReadOnly<{|\n  ...ViewProps,\n\n  /**\n   * Whether the switch is disabled. Defaults to false.\n   */\n  disabled?: ?boolean,\n\n  /**\n   * Boolean value of the switch. Defaults to false.\n   */\n  value?: ?boolean,\n\n  /**\n   * Custom color for the switch thumb.\n   */\n  thumbColor?: ?ColorValue,\n\n  /**\n   * Custom colors for the switch track.\n   *\n   * NOTE: On iOS when the switch value is false, the track shrinks into the\n   * border. If you want to change the color of the background exposed by the\n   * shrunken track, use `ios_backgroundColor`.\n   */\n  trackColor?: ?$ReadOnly<{|\n    false?: ?ColorValue,\n    true?: ?ColorValue,\n  |}>,\n\n  /**\n   * On iOS, custom color for the background. This background color can be seen\n   * either when the switch value is false or when the switch is disabled (and\n   * the switch is translucent).\n   */\n  ios_backgroundColor?: ?ColorValue,\n\n  /**\n   * Called when the user tries to change the value of the switch.\n   *\n   * Receives the change event as an argument. If you want to only receive the\n   * new value, use `onValueChange` instead.\n   */\n  onChange?: ?(event: SwitchChangeEvent) => Promise<void> | void,\n\n  /**\n   * Called when the user tries to change the value of the switch.\n   *\n   * Receives the new value as an argument. If you want to instead receive an\n   * event, use `onChange`.\n   */\n  onValueChange?: ?(value: boolean) => Promise<void> | void,\n|}>;\n\n/**\n * A visual toggle between two mutually exclusive states.\n *\n * This is a controlled component that requires an `onValueChange` callback that\n * updates the `value` prop in order for the component to reflect user actions.\n * If the `value` prop is not updated, the component will continue to render the\n * supplied `value` prop instead of the expected result of any user actions.\n */\nclass Switch extends React.Component<Props> {\n  _nativeSwitchRef: ?React.ElementRef<\n    typeof SwitchNativeComponent | typeof AndroidSwitchNativeComponent,\n  >;\n\n  render(): React.Node {\n    const {\n      disabled,\n      ios_backgroundColor,\n      onChange,\n      onValueChange,\n      style,\n      thumbColor,\n      trackColor,\n      value,\n      ...props\n    } = this.props;\n\n    // Support deprecated color props.\n    let _thumbColor = thumbColor;\n    let _trackColorForFalse = trackColor?.false;\n    let _trackColorForTrue = trackColor?.true;\n\n    // TODO: Remove support for these props after a couple releases.\n    const {thumbTintColor, tintColor, onTintColor} = (props: $FlowFixMe);\n    if (thumbTintColor != null) {\n      _thumbColor = thumbTintColor;\n      if (__DEV__) {\n        console.warn(\n          'Switch: `thumbTintColor` is deprecated, use `thumbColor` instead.',\n        );\n      }\n    }\n    if (tintColor != null) {\n      _trackColorForFalse = tintColor;\n      if (__DEV__) {\n        console.warn(\n          'Switch: `tintColor` is deprecated, use `trackColor` instead.',\n        );\n      }\n    }\n    if (onTintColor != null) {\n      _trackColorForTrue = onTintColor;\n      if (__DEV__) {\n        console.warn(\n          'Switch: `onTintColor` is deprecated, use `trackColor` instead.',\n        );\n      }\n    }\n\n    if (Platform.OS === 'android') {\n      const platformProps = {\n        enabled: disabled !== true,\n        on: value === true,\n        style,\n        thumbTintColor: _thumbColor,\n        trackColorForFalse: _trackColorForFalse,\n        trackColorForTrue: _trackColorForTrue,\n        trackTintColor:\n          value === true ? _trackColorForTrue : _trackColorForFalse,\n      };\n\n      return (\n        <AndroidSwitchNativeComponent\n          {...props}\n          {...platformProps}\n          accessibilityRole={props.accessibilityRole ?? 'button'}\n          onChange={this._handleChange}\n          onResponderTerminationRequest={returnsFalse}\n          onStartShouldSetResponder={returnsTrue}\n          ref={this._handleSwitchNativeComponentRef}\n        />\n      );\n    }\n\n    const platformProps = {\n      disabled,\n      onTintColor: _trackColorForTrue,\n      style: StyleSheet.compose(\n        {height: 31, width: 51},\n        StyleSheet.compose(\n          style,\n          ios_backgroundColor == null\n            ? null\n            : {\n                backgroundColor: ios_backgroundColor,\n                borderRadius: 16,\n              },\n        ),\n      ),\n      thumbTintColor: _thumbColor,\n      tintColor: _trackColorForFalse,\n      value: value === true,\n    };\n\n    return (\n      <SwitchNativeComponent\n        {...props}\n        {...platformProps}\n        accessibilityRole={props.accessibilityRole ?? 'button'}\n        onChange={this._handleChange}\n        onResponderTerminationRequest={returnsFalse}\n        onStartShouldSetResponder={returnsTrue}\n        ref={this._handleSwitchNativeComponentRef}\n      />\n    );\n  }\n\n  _handleChange = (event: SwitchChangeEvent) => {\n    if (this._nativeSwitchRef == null) {\n      return;\n    }\n\n    // Force value of native switch in order to control it.\n    const value = this.props.value === true;\n    if (Platform.OS === 'android') {\n      this._nativeSwitchRef.setNativeProps({on: value});\n    } else {\n      this._nativeSwitchRef.setNativeProps({value});\n    }\n\n    if (this.props.onChange != null) {\n      this.props.onChange(event);\n    }\n\n    if (this.props.onValueChange != null) {\n      this.props.onValueChange(event.nativeEvent.value);\n    }\n  };\n\n  _handleSwitchNativeComponentRef = (\n    ref: ?React.ElementRef<\n      typeof SwitchNativeComponent | typeof AndroidSwitchNativeComponent,\n    >,\n  ) => {\n    this._nativeSwitchRef = ref;\n  };\n}\n\nconst returnsFalse = () => false;\nconst returnsTrue = () => true;\n\nmodule.exports = Switch;\n"]}