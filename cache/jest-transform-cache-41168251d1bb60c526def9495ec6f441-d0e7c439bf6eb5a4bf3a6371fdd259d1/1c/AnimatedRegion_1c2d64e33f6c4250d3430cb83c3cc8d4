73d9ed2e1d37edf2678064d68750d02f
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _reactNative = require("react-native");

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

var AnimatedWithChildren = Object.getPrototypeOf(_reactNative.Animated.ValueXY);

if (__DEV__) {
  if (AnimatedWithChildren.name !== 'AnimatedWithChildren') {
    console.error('AnimatedRegion could not obtain AnimatedWithChildren base class');
  }
}

var _uniqueId = 1;

var AnimatedMapRegion = function (_AnimatedWithChildren) {
  (0, _inherits2.default)(AnimatedMapRegion, _AnimatedWithChildren);

  function AnimatedMapRegion(valueIn) {
    var _this;

    (0, _classCallCheck2.default)(this, AnimatedMapRegion);
    _this = (0, _possibleConstructorReturn2.default)(this, (0, _getPrototypeOf2.default)(AnimatedMapRegion).call(this));
    var value = valueIn || {
      latitude: 0,
      longitude: 0,
      latitudeDelta: 0,
      longitudeDelta: 0
    };
    _this.latitude = value.latitude instanceof _reactNative.Animated.Value ? value.latitude : new _reactNative.Animated.Value(value.latitude);
    _this.longitude = value.longitude instanceof _reactNative.Animated.Value ? value.longitude : new _reactNative.Animated.Value(value.longitude);
    _this.latitudeDelta = value.latitudeDelta instanceof _reactNative.Animated.Value ? value.latitudeDelta : new _reactNative.Animated.Value(value.latitudeDelta);
    _this.longitudeDelta = value.longitudeDelta instanceof _reactNative.Animated.Value ? value.longitudeDelta : new _reactNative.Animated.Value(value.longitudeDelta);
    _this._listeners = {};
    return _this;
  }

  (0, _createClass2.default)(AnimatedMapRegion, [{
    key: "setValue",
    value: function setValue(value) {
      this.latitude._value = value.latitude;
      this.longitude._value = value.longitude;
      this.latitudeDelta._value = value.latitudeDelta;
      this.longitudeDelta._value = value.longitudeDelta;
    }
  }, {
    key: "setOffset",
    value: function setOffset(offset) {
      this.latitude.setOffset(offset.latitude);
      this.longitude.setOffset(offset.longitude);
      this.latitudeDelta.setOffset(offset.latitudeDelta);
      this.longitudeDelta.setOffset(offset.longitudeDelta);
    }
  }, {
    key: "flattenOffset",
    value: function flattenOffset() {
      this.latitude.flattenOffset();
      this.longitude.flattenOffset();
      this.latitudeDelta.flattenOffset();
      this.longitudeDelta.flattenOffset();
    }
  }, {
    key: "__getValue",
    value: function __getValue() {
      return {
        latitude: this.latitude.__getValue(),
        longitude: this.longitude.__getValue(),
        latitudeDelta: this.latitudeDelta.__getValue(),
        longitudeDelta: this.longitudeDelta.__getValue()
      };
    }
  }, {
    key: "__attach",
    value: function __attach() {
      this.latitude.__addChild(this);

      this.longitude.__addChild(this);

      this.latitudeDelta.__addChild(this);

      this.longitudeDelta.__addChild(this);
    }
  }, {
    key: "__detach",
    value: function __detach() {
      this.latitude.__removeChild(this);

      this.longitude.__removeChild(this);

      this.latitudeDelta.__removeChild(this);

      this.longitudeDelta.__removeChild(this);
    }
  }, {
    key: "stopAnimation",
    value: function stopAnimation(callback) {
      this.latitude.stopAnimation();
      this.longitude.stopAnimation();
      this.latitudeDelta.stopAnimation();
      this.longitudeDelta.stopAnimation();
      callback && callback(this.__getValue());
    }
  }, {
    key: "addListener",
    value: function addListener(callback) {
      var _this2 = this;

      var id = String(_uniqueId++);

      var jointCallback = function jointCallback() {
        callback(_this2.__getValue());
      };

      this._listeners[id] = {
        latitude: this.latitude.addListener(jointCallback),
        longitude: this.longitude.addListener(jointCallback),
        latitudeDelta: this.latitudeDelta.addListener(jointCallback),
        longitudeDelta: this.longitudeDelta.addListener(jointCallback)
      };
      return id;
    }
  }, {
    key: "removeListener",
    value: function removeListener(id) {
      this.latitude.removeListener(this._listeners[id].latitude);
      this.longitude.removeListener(this._listeners[id].longitude);
      this.latitudeDelta.removeListener(this._listeners[id].latitudeDelta);
      this.longitudeDelta.removeListener(this._listeners[id].longitudeDelta);
      delete this._listeners[id];
    }
  }, {
    key: "spring",
    value: function spring(config) {
      var animations = [];
      config.hasOwnProperty('latitude') && animations.push(_reactNative.Animated.spring(this.latitude, _objectSpread({}, config, {
        toValue: config.latitude
      })));
      config.hasOwnProperty('longitude') && animations.push(_reactNative.Animated.spring(this.longitude, _objectSpread({}, config, {
        toValue: config.longitude
      })));
      config.hasOwnProperty('latitudeDelta') && animations.push(_reactNative.Animated.spring(this.latitudeDelta, _objectSpread({}, config, {
        toValue: config.latitudeDelta
      })));
      config.hasOwnProperty('longitudeDelta') && animations.push(_reactNative.Animated.spring(this.longitudeDelta, _objectSpread({}, config, {
        toValue: config.longitudeDelta
      })));
      return _reactNative.Animated.parallel(animations);
    }
  }, {
    key: "timing",
    value: function timing(config) {
      var animations = [];
      config.hasOwnProperty('latitude') && animations.push(_reactNative.Animated.timing(this.latitude, _objectSpread({}, config, {
        toValue: config.latitude
      })));
      config.hasOwnProperty('longitude') && animations.push(_reactNative.Animated.timing(this.longitude, _objectSpread({}, config, {
        toValue: config.longitude
      })));
      config.hasOwnProperty('latitudeDelta') && animations.push(_reactNative.Animated.timing(this.latitudeDelta, _objectSpread({}, config, {
        toValue: config.latitudeDelta
      })));
      config.hasOwnProperty('longitudeDelta') && animations.push(_reactNative.Animated.timing(this.longitudeDelta, _objectSpread({}, config, {
        toValue: config.longitudeDelta
      })));
      return _reactNative.Animated.parallel(animations);
    }
  }]);
  return AnimatedMapRegion;
}(AnimatedWithChildren);

exports.default = AnimatedMapRegion;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkFuaW1hdGVkUmVnaW9uLmpzIl0sIm5hbWVzIjpbIkFuaW1hdGVkV2l0aENoaWxkcmVuIiwiT2JqZWN0IiwiZ2V0UHJvdG90eXBlT2YiLCJBbmltYXRlZCIsIlZhbHVlWFkiLCJfX0RFVl9fIiwibmFtZSIsImNvbnNvbGUiLCJlcnJvciIsIl91bmlxdWVJZCIsIkFuaW1hdGVkTWFwUmVnaW9uIiwidmFsdWVJbiIsInZhbHVlIiwibGF0aXR1ZGUiLCJsb25naXR1ZGUiLCJsYXRpdHVkZURlbHRhIiwibG9uZ2l0dWRlRGVsdGEiLCJWYWx1ZSIsIl9saXN0ZW5lcnMiLCJfdmFsdWUiLCJvZmZzZXQiLCJzZXRPZmZzZXQiLCJmbGF0dGVuT2Zmc2V0IiwiX19nZXRWYWx1ZSIsIl9fYWRkQ2hpbGQiLCJfX3JlbW92ZUNoaWxkIiwiY2FsbGJhY2siLCJzdG9wQW5pbWF0aW9uIiwiaWQiLCJTdHJpbmciLCJqb2ludENhbGxiYWNrIiwiYWRkTGlzdGVuZXIiLCJyZW1vdmVMaXN0ZW5lciIsImNvbmZpZyIsImFuaW1hdGlvbnMiLCJoYXNPd25Qcm9wZXJ0eSIsInB1c2giLCJzcHJpbmciLCJ0b1ZhbHVlIiwicGFyYWxsZWwiLCJ0aW1pbmciXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7Ozs7O0FBRUEsSUFBTUEsb0JBQW9CLEdBQUdDLE1BQU0sQ0FBQ0MsY0FBUCxDQUFzQkMsc0JBQVNDLE9BQS9CLENBQTdCOztBQUNBLElBQUlDLE9BQUosRUFBYTtBQUNYLE1BQUlMLG9CQUFvQixDQUFDTSxJQUFyQixLQUE4QixzQkFBbEMsRUFBMEQ7QUFDeERDLElBQUFBLE9BQU8sQ0FBQ0MsS0FBUixDQUNFLGlFQURGO0FBR0Q7QUFDRjs7QUFJRCxJQUFJQyxTQUFTLEdBQUcsQ0FBaEI7O0lBRXFCQyxpQjs7O0FBQ25CLDZCQUFZQyxPQUFaLEVBQXFCO0FBQUE7O0FBQUE7QUFDbkI7QUFDQSxRQUFJQyxLQUFLLEdBQUdELE9BQU8sSUFBSTtBQUVyQkUsTUFBQUEsUUFBUSxFQUFFLENBRlc7QUFHckJDLE1BQUFBLFNBQVMsRUFBRSxDQUhVO0FBSXJCQyxNQUFBQSxhQUFhLEVBQUUsQ0FKTTtBQUtyQkMsTUFBQUEsY0FBYyxFQUFFO0FBTEssS0FBdkI7QUFPQSxVQUFLSCxRQUFMLEdBQ0VELEtBQUssQ0FBQ0MsUUFBTixZQUEwQlYsc0JBQVNjLEtBQW5DLEdBQ0lMLEtBQUssQ0FBQ0MsUUFEVixHQUVJLElBQUlWLHNCQUFTYyxLQUFiLENBQW1CTCxLQUFLLENBQUNDLFFBQXpCLENBSE47QUFJQSxVQUFLQyxTQUFMLEdBQ0VGLEtBQUssQ0FBQ0UsU0FBTixZQUEyQlgsc0JBQVNjLEtBQXBDLEdBQ0lMLEtBQUssQ0FBQ0UsU0FEVixHQUVJLElBQUlYLHNCQUFTYyxLQUFiLENBQW1CTCxLQUFLLENBQUNFLFNBQXpCLENBSE47QUFJQSxVQUFLQyxhQUFMLEdBQ0VILEtBQUssQ0FBQ0csYUFBTixZQUErQlosc0JBQVNjLEtBQXhDLEdBQ0lMLEtBQUssQ0FBQ0csYUFEVixHQUVJLElBQUlaLHNCQUFTYyxLQUFiLENBQW1CTCxLQUFLLENBQUNHLGFBQXpCLENBSE47QUFJQSxVQUFLQyxjQUFMLEdBQ0VKLEtBQUssQ0FBQ0ksY0FBTixZQUFnQ2Isc0JBQVNjLEtBQXpDLEdBQ0lMLEtBQUssQ0FBQ0ksY0FEVixHQUVJLElBQUliLHNCQUFTYyxLQUFiLENBQW1CTCxLQUFLLENBQUNJLGNBQXpCLENBSE47QUFJQSxVQUFLRSxVQUFMLEdBQWtCLEVBQWxCO0FBekJtQjtBQTBCcEI7Ozs7NkJBRVFOLEssRUFBTztBQUNkLFdBQUtDLFFBQUwsQ0FBY00sTUFBZCxHQUF1QlAsS0FBSyxDQUFDQyxRQUE3QjtBQUNBLFdBQUtDLFNBQUwsQ0FBZUssTUFBZixHQUF3QlAsS0FBSyxDQUFDRSxTQUE5QjtBQUNBLFdBQUtDLGFBQUwsQ0FBbUJJLE1BQW5CLEdBQTRCUCxLQUFLLENBQUNHLGFBQWxDO0FBQ0EsV0FBS0MsY0FBTCxDQUFvQkcsTUFBcEIsR0FBNkJQLEtBQUssQ0FBQ0ksY0FBbkM7QUFDRDs7OzhCQUVTSSxNLEVBQVE7QUFDaEIsV0FBS1AsUUFBTCxDQUFjUSxTQUFkLENBQXdCRCxNQUFNLENBQUNQLFFBQS9CO0FBQ0EsV0FBS0MsU0FBTCxDQUFlTyxTQUFmLENBQXlCRCxNQUFNLENBQUNOLFNBQWhDO0FBQ0EsV0FBS0MsYUFBTCxDQUFtQk0sU0FBbkIsQ0FBNkJELE1BQU0sQ0FBQ0wsYUFBcEM7QUFDQSxXQUFLQyxjQUFMLENBQW9CSyxTQUFwQixDQUE4QkQsTUFBTSxDQUFDSixjQUFyQztBQUNEOzs7b0NBRWU7QUFDZCxXQUFLSCxRQUFMLENBQWNTLGFBQWQ7QUFDQSxXQUFLUixTQUFMLENBQWVRLGFBQWY7QUFDQSxXQUFLUCxhQUFMLENBQW1CTyxhQUFuQjtBQUNBLFdBQUtOLGNBQUwsQ0FBb0JNLGFBQXBCO0FBQ0Q7OztpQ0FFWTtBQUNYLGFBQU87QUFDTFQsUUFBQUEsUUFBUSxFQUFFLEtBQUtBLFFBQUwsQ0FBY1UsVUFBZCxFQURMO0FBRUxULFFBQUFBLFNBQVMsRUFBRSxLQUFLQSxTQUFMLENBQWVTLFVBQWYsRUFGTjtBQUdMUixRQUFBQSxhQUFhLEVBQUUsS0FBS0EsYUFBTCxDQUFtQlEsVUFBbkIsRUFIVjtBQUlMUCxRQUFBQSxjQUFjLEVBQUUsS0FBS0EsY0FBTCxDQUFvQk8sVUFBcEI7QUFKWCxPQUFQO0FBTUQ7OzsrQkFFVTtBQUNULFdBQUtWLFFBQUwsQ0FBY1csVUFBZCxDQUF5QixJQUF6Qjs7QUFDQSxXQUFLVixTQUFMLENBQWVVLFVBQWYsQ0FBMEIsSUFBMUI7O0FBQ0EsV0FBS1QsYUFBTCxDQUFtQlMsVUFBbkIsQ0FBOEIsSUFBOUI7O0FBQ0EsV0FBS1IsY0FBTCxDQUFvQlEsVUFBcEIsQ0FBK0IsSUFBL0I7QUFDRDs7OytCQUVVO0FBQ1QsV0FBS1gsUUFBTCxDQUFjWSxhQUFkLENBQTRCLElBQTVCOztBQUNBLFdBQUtYLFNBQUwsQ0FBZVcsYUFBZixDQUE2QixJQUE3Qjs7QUFDQSxXQUFLVixhQUFMLENBQW1CVSxhQUFuQixDQUFpQyxJQUFqQzs7QUFDQSxXQUFLVCxjQUFMLENBQW9CUyxhQUFwQixDQUFrQyxJQUFsQztBQUNEOzs7a0NBRWFDLFEsRUFBVTtBQUN0QixXQUFLYixRQUFMLENBQWNjLGFBQWQ7QUFDQSxXQUFLYixTQUFMLENBQWVhLGFBQWY7QUFDQSxXQUFLWixhQUFMLENBQW1CWSxhQUFuQjtBQUNBLFdBQUtYLGNBQUwsQ0FBb0JXLGFBQXBCO0FBQ0FELE1BQUFBLFFBQVEsSUFBSUEsUUFBUSxDQUFDLEtBQUtILFVBQUwsRUFBRCxDQUFwQjtBQUNEOzs7Z0NBRVdHLFEsRUFBVTtBQUFBOztBQUNwQixVQUFJRSxFQUFFLEdBQUdDLE1BQU0sQ0FBQ3BCLFNBQVMsRUFBVixDQUFmOztBQUNBLFVBQUlxQixhQUFhLEdBQUcsU0FBaEJBLGFBQWdCLEdBQWlCO0FBQ25DSixRQUFBQSxRQUFRLENBQUMsTUFBSSxDQUFDSCxVQUFMLEVBQUQsQ0FBUjtBQUNELE9BRkQ7O0FBR0EsV0FBS0wsVUFBTCxDQUFnQlUsRUFBaEIsSUFBc0I7QUFDcEJmLFFBQUFBLFFBQVEsRUFBRSxLQUFLQSxRQUFMLENBQWNrQixXQUFkLENBQTBCRCxhQUExQixDQURVO0FBRXBCaEIsUUFBQUEsU0FBUyxFQUFFLEtBQUtBLFNBQUwsQ0FBZWlCLFdBQWYsQ0FBMkJELGFBQTNCLENBRlM7QUFHcEJmLFFBQUFBLGFBQWEsRUFBRSxLQUFLQSxhQUFMLENBQW1CZ0IsV0FBbkIsQ0FBK0JELGFBQS9CLENBSEs7QUFJcEJkLFFBQUFBLGNBQWMsRUFBRSxLQUFLQSxjQUFMLENBQW9CZSxXQUFwQixDQUFnQ0QsYUFBaEM7QUFKSSxPQUF0QjtBQU1BLGFBQU9GLEVBQVA7QUFDRDs7O21DQUVjQSxFLEVBQUk7QUFDakIsV0FBS2YsUUFBTCxDQUFjbUIsY0FBZCxDQUE2QixLQUFLZCxVQUFMLENBQWdCVSxFQUFoQixFQUFvQmYsUUFBakQ7QUFDQSxXQUFLQyxTQUFMLENBQWVrQixjQUFmLENBQThCLEtBQUtkLFVBQUwsQ0FBZ0JVLEVBQWhCLEVBQW9CZCxTQUFsRDtBQUNBLFdBQUtDLGFBQUwsQ0FBbUJpQixjQUFuQixDQUFrQyxLQUFLZCxVQUFMLENBQWdCVSxFQUFoQixFQUFvQmIsYUFBdEQ7QUFDQSxXQUFLQyxjQUFMLENBQW9CZ0IsY0FBcEIsQ0FBbUMsS0FBS2QsVUFBTCxDQUFnQlUsRUFBaEIsRUFBb0JaLGNBQXZEO0FBQ0EsYUFBTyxLQUFLRSxVQUFMLENBQWdCVSxFQUFoQixDQUFQO0FBQ0Q7OzsyQkFFTUssTSxFQUFRO0FBQ2IsVUFBSUMsVUFBVSxHQUFHLEVBQWpCO0FBQ0FELE1BQUFBLE1BQU0sQ0FBQ0UsY0FBUCxDQUFzQixVQUF0QixLQUNFRCxVQUFVLENBQUNFLElBQVgsQ0FDRWpDLHNCQUFTa0MsTUFBVCxDQUFnQixLQUFLeEIsUUFBckIsb0JBQ0tvQixNQURMO0FBRUVLLFFBQUFBLE9BQU8sRUFBRUwsTUFBTSxDQUFDcEI7QUFGbEIsU0FERixDQURGO0FBUUFvQixNQUFBQSxNQUFNLENBQUNFLGNBQVAsQ0FBc0IsV0FBdEIsS0FDRUQsVUFBVSxDQUFDRSxJQUFYLENBQ0VqQyxzQkFBU2tDLE1BQVQsQ0FBZ0IsS0FBS3ZCLFNBQXJCLG9CQUNLbUIsTUFETDtBQUVFSyxRQUFBQSxPQUFPLEVBQUVMLE1BQU0sQ0FBQ25CO0FBRmxCLFNBREYsQ0FERjtBQVFBbUIsTUFBQUEsTUFBTSxDQUFDRSxjQUFQLENBQXNCLGVBQXRCLEtBQ0VELFVBQVUsQ0FBQ0UsSUFBWCxDQUNFakMsc0JBQVNrQyxNQUFULENBQWdCLEtBQUt0QixhQUFyQixvQkFDS2tCLE1BREw7QUFFRUssUUFBQUEsT0FBTyxFQUFFTCxNQUFNLENBQUNsQjtBQUZsQixTQURGLENBREY7QUFRQWtCLE1BQUFBLE1BQU0sQ0FBQ0UsY0FBUCxDQUFzQixnQkFBdEIsS0FDRUQsVUFBVSxDQUFDRSxJQUFYLENBQ0VqQyxzQkFBU2tDLE1BQVQsQ0FBZ0IsS0FBS3JCLGNBQXJCLG9CQUNLaUIsTUFETDtBQUVFSyxRQUFBQSxPQUFPLEVBQUVMLE1BQU0sQ0FBQ2pCO0FBRmxCLFNBREYsQ0FERjtBQVFBLGFBQU9iLHNCQUFTb0MsUUFBVCxDQUFrQkwsVUFBbEIsQ0FBUDtBQUNEOzs7MkJBRU1ELE0sRUFBUTtBQUNiLFVBQUlDLFVBQVUsR0FBRyxFQUFqQjtBQUNBRCxNQUFBQSxNQUFNLENBQUNFLGNBQVAsQ0FBc0IsVUFBdEIsS0FDRUQsVUFBVSxDQUFDRSxJQUFYLENBQ0VqQyxzQkFBU3FDLE1BQVQsQ0FBZ0IsS0FBSzNCLFFBQXJCLG9CQUNLb0IsTUFETDtBQUVFSyxRQUFBQSxPQUFPLEVBQUVMLE1BQU0sQ0FBQ3BCO0FBRmxCLFNBREYsQ0FERjtBQVFBb0IsTUFBQUEsTUFBTSxDQUFDRSxjQUFQLENBQXNCLFdBQXRCLEtBQ0VELFVBQVUsQ0FBQ0UsSUFBWCxDQUNFakMsc0JBQVNxQyxNQUFULENBQWdCLEtBQUsxQixTQUFyQixvQkFDS21CLE1BREw7QUFFRUssUUFBQUEsT0FBTyxFQUFFTCxNQUFNLENBQUNuQjtBQUZsQixTQURGLENBREY7QUFRQW1CLE1BQUFBLE1BQU0sQ0FBQ0UsY0FBUCxDQUFzQixlQUF0QixLQUNFRCxVQUFVLENBQUNFLElBQVgsQ0FDRWpDLHNCQUFTcUMsTUFBVCxDQUFnQixLQUFLekIsYUFBckIsb0JBQ0trQixNQURMO0FBRUVLLFFBQUFBLE9BQU8sRUFBRUwsTUFBTSxDQUFDbEI7QUFGbEIsU0FERixDQURGO0FBUUFrQixNQUFBQSxNQUFNLENBQUNFLGNBQVAsQ0FBc0IsZ0JBQXRCLEtBQ0VELFVBQVUsQ0FBQ0UsSUFBWCxDQUNFakMsc0JBQVNxQyxNQUFULENBQWdCLEtBQUt4QixjQUFyQixvQkFDS2lCLE1BREw7QUFFRUssUUFBQUEsT0FBTyxFQUFFTCxNQUFNLENBQUNqQjtBQUZsQixTQURGLENBREY7QUFRQSxhQUFPYixzQkFBU29DLFFBQVQsQ0FBa0JMLFVBQWxCLENBQVA7QUFDRDs7O0VBL0s0Q2xDLG9CIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQW5pbWF0ZWQgfSBmcm9tICdyZWFjdC1uYXRpdmUnO1xuXG5jb25zdCBBbmltYXRlZFdpdGhDaGlsZHJlbiA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihBbmltYXRlZC5WYWx1ZVhZKTtcbmlmIChfX0RFVl9fKSB7XG4gIGlmIChBbmltYXRlZFdpdGhDaGlsZHJlbi5uYW1lICE9PSAnQW5pbWF0ZWRXaXRoQ2hpbGRyZW4nKSB7XG4gICAgY29uc29sZS5lcnJvcihcbiAgICAgICdBbmltYXRlZFJlZ2lvbiBjb3VsZCBub3Qgb2J0YWluIEFuaW1hdGVkV2l0aENoaWxkcmVuIGJhc2UgY2xhc3MnXG4gICAgKTtcbiAgfVxufVxuLy8gY29uc3QgX19BbmltYXRlZCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihBbmltYXRlZFdpdGhDaGlsZHJlbik7XG4vLyBpZiAoX19BbmltYXRlZC5uYW1lICE9PSAnQW5pbWF0ZWQnKSBjb25zb2xlLmVycm9yKCdBbmltYXRlZFJlZ2lvbiBjb3VsZCBub3Qgb2J0YWluIEFuaW1hdGVkIGJhc2UgY2xhc3MnKTtcblxudmFyIF91bmlxdWVJZCA9IDE7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFuaW1hdGVkTWFwUmVnaW9uIGV4dGVuZHMgQW5pbWF0ZWRXaXRoQ2hpbGRyZW4ge1xuICBjb25zdHJ1Y3Rvcih2YWx1ZUluKSB7XG4gICAgc3VwZXIoKTtcbiAgICB2YXIgdmFsdWUgPSB2YWx1ZUluIHx8IHtcbiAgICAgIC8vIHByb2JhYmx5IHdhbnQgdG8gY29tZSB1cCB3aXRoIGJldHRlciBkZWZhdWx0c1xuICAgICAgbGF0aXR1ZGU6IDAsXG4gICAgICBsb25naXR1ZGU6IDAsXG4gICAgICBsYXRpdHVkZURlbHRhOiAwLFxuICAgICAgbG9uZ2l0dWRlRGVsdGE6IDAsXG4gICAgfTtcbiAgICB0aGlzLmxhdGl0dWRlID1cbiAgICAgIHZhbHVlLmxhdGl0dWRlIGluc3RhbmNlb2YgQW5pbWF0ZWQuVmFsdWVcbiAgICAgICAgPyB2YWx1ZS5sYXRpdHVkZVxuICAgICAgICA6IG5ldyBBbmltYXRlZC5WYWx1ZSh2YWx1ZS5sYXRpdHVkZSk7XG4gICAgdGhpcy5sb25naXR1ZGUgPVxuICAgICAgdmFsdWUubG9uZ2l0dWRlIGluc3RhbmNlb2YgQW5pbWF0ZWQuVmFsdWVcbiAgICAgICAgPyB2YWx1ZS5sb25naXR1ZGVcbiAgICAgICAgOiBuZXcgQW5pbWF0ZWQuVmFsdWUodmFsdWUubG9uZ2l0dWRlKTtcbiAgICB0aGlzLmxhdGl0dWRlRGVsdGEgPVxuICAgICAgdmFsdWUubGF0aXR1ZGVEZWx0YSBpbnN0YW5jZW9mIEFuaW1hdGVkLlZhbHVlXG4gICAgICAgID8gdmFsdWUubGF0aXR1ZGVEZWx0YVxuICAgICAgICA6IG5ldyBBbmltYXRlZC5WYWx1ZSh2YWx1ZS5sYXRpdHVkZURlbHRhKTtcbiAgICB0aGlzLmxvbmdpdHVkZURlbHRhID1cbiAgICAgIHZhbHVlLmxvbmdpdHVkZURlbHRhIGluc3RhbmNlb2YgQW5pbWF0ZWQuVmFsdWVcbiAgICAgICAgPyB2YWx1ZS5sb25naXR1ZGVEZWx0YVxuICAgICAgICA6IG5ldyBBbmltYXRlZC5WYWx1ZSh2YWx1ZS5sb25naXR1ZGVEZWx0YSk7XG4gICAgdGhpcy5fbGlzdGVuZXJzID0ge307XG4gIH1cblxuICBzZXRWYWx1ZSh2YWx1ZSkge1xuICAgIHRoaXMubGF0aXR1ZGUuX3ZhbHVlID0gdmFsdWUubGF0aXR1ZGU7XG4gICAgdGhpcy5sb25naXR1ZGUuX3ZhbHVlID0gdmFsdWUubG9uZ2l0dWRlO1xuICAgIHRoaXMubGF0aXR1ZGVEZWx0YS5fdmFsdWUgPSB2YWx1ZS5sYXRpdHVkZURlbHRhO1xuICAgIHRoaXMubG9uZ2l0dWRlRGVsdGEuX3ZhbHVlID0gdmFsdWUubG9uZ2l0dWRlRGVsdGE7XG4gIH1cblxuICBzZXRPZmZzZXQob2Zmc2V0KSB7XG4gICAgdGhpcy5sYXRpdHVkZS5zZXRPZmZzZXQob2Zmc2V0LmxhdGl0dWRlKTtcbiAgICB0aGlzLmxvbmdpdHVkZS5zZXRPZmZzZXQob2Zmc2V0LmxvbmdpdHVkZSk7XG4gICAgdGhpcy5sYXRpdHVkZURlbHRhLnNldE9mZnNldChvZmZzZXQubGF0aXR1ZGVEZWx0YSk7XG4gICAgdGhpcy5sb25naXR1ZGVEZWx0YS5zZXRPZmZzZXQob2Zmc2V0LmxvbmdpdHVkZURlbHRhKTtcbiAgfVxuXG4gIGZsYXR0ZW5PZmZzZXQoKSB7XG4gICAgdGhpcy5sYXRpdHVkZS5mbGF0dGVuT2Zmc2V0KCk7XG4gICAgdGhpcy5sb25naXR1ZGUuZmxhdHRlbk9mZnNldCgpO1xuICAgIHRoaXMubGF0aXR1ZGVEZWx0YS5mbGF0dGVuT2Zmc2V0KCk7XG4gICAgdGhpcy5sb25naXR1ZGVEZWx0YS5mbGF0dGVuT2Zmc2V0KCk7XG4gIH1cblxuICBfX2dldFZhbHVlKCkge1xuICAgIHJldHVybiB7XG4gICAgICBsYXRpdHVkZTogdGhpcy5sYXRpdHVkZS5fX2dldFZhbHVlKCksXG4gICAgICBsb25naXR1ZGU6IHRoaXMubG9uZ2l0dWRlLl9fZ2V0VmFsdWUoKSxcbiAgICAgIGxhdGl0dWRlRGVsdGE6IHRoaXMubGF0aXR1ZGVEZWx0YS5fX2dldFZhbHVlKCksXG4gICAgICBsb25naXR1ZGVEZWx0YTogdGhpcy5sb25naXR1ZGVEZWx0YS5fX2dldFZhbHVlKCksXG4gICAgfTtcbiAgfVxuXG4gIF9fYXR0YWNoKCkge1xuICAgIHRoaXMubGF0aXR1ZGUuX19hZGRDaGlsZCh0aGlzKTtcbiAgICB0aGlzLmxvbmdpdHVkZS5fX2FkZENoaWxkKHRoaXMpO1xuICAgIHRoaXMubGF0aXR1ZGVEZWx0YS5fX2FkZENoaWxkKHRoaXMpO1xuICAgIHRoaXMubG9uZ2l0dWRlRGVsdGEuX19hZGRDaGlsZCh0aGlzKTtcbiAgfVxuXG4gIF9fZGV0YWNoKCkge1xuICAgIHRoaXMubGF0aXR1ZGUuX19yZW1vdmVDaGlsZCh0aGlzKTtcbiAgICB0aGlzLmxvbmdpdHVkZS5fX3JlbW92ZUNoaWxkKHRoaXMpO1xuICAgIHRoaXMubGF0aXR1ZGVEZWx0YS5fX3JlbW92ZUNoaWxkKHRoaXMpO1xuICAgIHRoaXMubG9uZ2l0dWRlRGVsdGEuX19yZW1vdmVDaGlsZCh0aGlzKTtcbiAgfVxuXG4gIHN0b3BBbmltYXRpb24oY2FsbGJhY2spIHtcbiAgICB0aGlzLmxhdGl0dWRlLnN0b3BBbmltYXRpb24oKTtcbiAgICB0aGlzLmxvbmdpdHVkZS5zdG9wQW5pbWF0aW9uKCk7XG4gICAgdGhpcy5sYXRpdHVkZURlbHRhLnN0b3BBbmltYXRpb24oKTtcbiAgICB0aGlzLmxvbmdpdHVkZURlbHRhLnN0b3BBbmltYXRpb24oKTtcbiAgICBjYWxsYmFjayAmJiBjYWxsYmFjayh0aGlzLl9fZ2V0VmFsdWUoKSk7XG4gIH1cblxuICBhZGRMaXN0ZW5lcihjYWxsYmFjaykge1xuICAgIHZhciBpZCA9IFN0cmluZyhfdW5pcXVlSWQrKyk7XG4gICAgdmFyIGpvaW50Q2FsbGJhY2sgPSAoLyp7dmFsdWV9Ki8pID0+IHtcbiAgICAgIGNhbGxiYWNrKHRoaXMuX19nZXRWYWx1ZSgpKTtcbiAgICB9O1xuICAgIHRoaXMuX2xpc3RlbmVyc1tpZF0gPSB7XG4gICAgICBsYXRpdHVkZTogdGhpcy5sYXRpdHVkZS5hZGRMaXN0ZW5lcihqb2ludENhbGxiYWNrKSxcbiAgICAgIGxvbmdpdHVkZTogdGhpcy5sb25naXR1ZGUuYWRkTGlzdGVuZXIoam9pbnRDYWxsYmFjayksXG4gICAgICBsYXRpdHVkZURlbHRhOiB0aGlzLmxhdGl0dWRlRGVsdGEuYWRkTGlzdGVuZXIoam9pbnRDYWxsYmFjayksXG4gICAgICBsb25naXR1ZGVEZWx0YTogdGhpcy5sb25naXR1ZGVEZWx0YS5hZGRMaXN0ZW5lcihqb2ludENhbGxiYWNrKSxcbiAgICB9O1xuICAgIHJldHVybiBpZDtcbiAgfVxuXG4gIHJlbW92ZUxpc3RlbmVyKGlkKSB7XG4gICAgdGhpcy5sYXRpdHVkZS5yZW1vdmVMaXN0ZW5lcih0aGlzLl9saXN0ZW5lcnNbaWRdLmxhdGl0dWRlKTtcbiAgICB0aGlzLmxvbmdpdHVkZS5yZW1vdmVMaXN0ZW5lcih0aGlzLl9saXN0ZW5lcnNbaWRdLmxvbmdpdHVkZSk7XG4gICAgdGhpcy5sYXRpdHVkZURlbHRhLnJlbW92ZUxpc3RlbmVyKHRoaXMuX2xpc3RlbmVyc1tpZF0ubGF0aXR1ZGVEZWx0YSk7XG4gICAgdGhpcy5sb25naXR1ZGVEZWx0YS5yZW1vdmVMaXN0ZW5lcih0aGlzLl9saXN0ZW5lcnNbaWRdLmxvbmdpdHVkZURlbHRhKTtcbiAgICBkZWxldGUgdGhpcy5fbGlzdGVuZXJzW2lkXTtcbiAgfVxuXG4gIHNwcmluZyhjb25maWcpIHtcbiAgICB2YXIgYW5pbWF0aW9ucyA9IFtdO1xuICAgIGNvbmZpZy5oYXNPd25Qcm9wZXJ0eSgnbGF0aXR1ZGUnKSAmJlxuICAgICAgYW5pbWF0aW9ucy5wdXNoKFxuICAgICAgICBBbmltYXRlZC5zcHJpbmcodGhpcy5sYXRpdHVkZSwge1xuICAgICAgICAgIC4uLmNvbmZpZyxcbiAgICAgICAgICB0b1ZhbHVlOiBjb25maWcubGF0aXR1ZGUsXG4gICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgY29uZmlnLmhhc093blByb3BlcnR5KCdsb25naXR1ZGUnKSAmJlxuICAgICAgYW5pbWF0aW9ucy5wdXNoKFxuICAgICAgICBBbmltYXRlZC5zcHJpbmcodGhpcy5sb25naXR1ZGUsIHtcbiAgICAgICAgICAuLi5jb25maWcsXG4gICAgICAgICAgdG9WYWx1ZTogY29uZmlnLmxvbmdpdHVkZSxcbiAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICBjb25maWcuaGFzT3duUHJvcGVydHkoJ2xhdGl0dWRlRGVsdGEnKSAmJlxuICAgICAgYW5pbWF0aW9ucy5wdXNoKFxuICAgICAgICBBbmltYXRlZC5zcHJpbmcodGhpcy5sYXRpdHVkZURlbHRhLCB7XG4gICAgICAgICAgLi4uY29uZmlnLFxuICAgICAgICAgIHRvVmFsdWU6IGNvbmZpZy5sYXRpdHVkZURlbHRhLFxuICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIGNvbmZpZy5oYXNPd25Qcm9wZXJ0eSgnbG9uZ2l0dWRlRGVsdGEnKSAmJlxuICAgICAgYW5pbWF0aW9ucy5wdXNoKFxuICAgICAgICBBbmltYXRlZC5zcHJpbmcodGhpcy5sb25naXR1ZGVEZWx0YSwge1xuICAgICAgICAgIC4uLmNvbmZpZyxcbiAgICAgICAgICB0b1ZhbHVlOiBjb25maWcubG9uZ2l0dWRlRGVsdGEsXG4gICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgcmV0dXJuIEFuaW1hdGVkLnBhcmFsbGVsKGFuaW1hdGlvbnMpO1xuICB9XG5cbiAgdGltaW5nKGNvbmZpZykge1xuICAgIHZhciBhbmltYXRpb25zID0gW107XG4gICAgY29uZmlnLmhhc093blByb3BlcnR5KCdsYXRpdHVkZScpICYmXG4gICAgICBhbmltYXRpb25zLnB1c2goXG4gICAgICAgIEFuaW1hdGVkLnRpbWluZyh0aGlzLmxhdGl0dWRlLCB7XG4gICAgICAgICAgLi4uY29uZmlnLFxuICAgICAgICAgIHRvVmFsdWU6IGNvbmZpZy5sYXRpdHVkZSxcbiAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICBjb25maWcuaGFzT3duUHJvcGVydHkoJ2xvbmdpdHVkZScpICYmXG4gICAgICBhbmltYXRpb25zLnB1c2goXG4gICAgICAgIEFuaW1hdGVkLnRpbWluZyh0aGlzLmxvbmdpdHVkZSwge1xuICAgICAgICAgIC4uLmNvbmZpZyxcbiAgICAgICAgICB0b1ZhbHVlOiBjb25maWcubG9uZ2l0dWRlLFxuICAgICAgICB9KVxuICAgICAgKTtcblxuICAgIGNvbmZpZy5oYXNPd25Qcm9wZXJ0eSgnbGF0aXR1ZGVEZWx0YScpICYmXG4gICAgICBhbmltYXRpb25zLnB1c2goXG4gICAgICAgIEFuaW1hdGVkLnRpbWluZyh0aGlzLmxhdGl0dWRlRGVsdGEsIHtcbiAgICAgICAgICAuLi5jb25maWcsXG4gICAgICAgICAgdG9WYWx1ZTogY29uZmlnLmxhdGl0dWRlRGVsdGEsXG4gICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgY29uZmlnLmhhc093blByb3BlcnR5KCdsb25naXR1ZGVEZWx0YScpICYmXG4gICAgICBhbmltYXRpb25zLnB1c2goXG4gICAgICAgIEFuaW1hdGVkLnRpbWluZyh0aGlzLmxvbmdpdHVkZURlbHRhLCB7XG4gICAgICAgICAgLi4uY29uZmlnLFxuICAgICAgICAgIHRvVmFsdWU6IGNvbmZpZy5sb25naXR1ZGVEZWx0YSxcbiAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICByZXR1cm4gQW5pbWF0ZWQucGFyYWxsZWwoYW5pbWF0aW9ucyk7XG4gIH1cbn1cbiJdfQ==