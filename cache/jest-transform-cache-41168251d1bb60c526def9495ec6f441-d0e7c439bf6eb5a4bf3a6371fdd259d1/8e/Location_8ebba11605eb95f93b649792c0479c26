b4935848e6eebdd279b7f3f0b1e6ce9a
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getProviderStatusAsync = getProviderStatusAsync;
exports.enableNetworkProviderAsync = enableNetworkProviderAsync;
exports.getCurrentPositionAsync = getCurrentPositionAsync;
exports.getLastKnownPositionAsync = getLastKnownPositionAsync;
exports.getHeadingAsync = getHeadingAsync;
exports.watchHeadingAsync = watchHeadingAsync;
exports.geocodeAsync = geocodeAsync;
exports.reverseGeocodeAsync = reverseGeocodeAsync;
exports.setApiKey = setApiKey;
exports.watchPositionAsync = watchPositionAsync;
exports.getPermissionsAsync = getPermissionsAsync;
exports.requestPermissionsAsync = requestPermissionsAsync;
exports.hasServicesEnabledAsync = hasServicesEnabledAsync;
exports.isBackgroundLocationAvailableAsync = isBackgroundLocationAvailableAsync;
exports.startLocationUpdatesAsync = startLocationUpdatesAsync;
exports.stopLocationUpdatesAsync = stopLocationUpdatesAsync;
exports.hasStartedLocationUpdatesAsync = hasStartedLocationUpdatesAsync;
exports.startGeofencingAsync = startGeofencingAsync;
exports.stopGeofencingAsync = stopGeofencingAsync;
exports.hasStartedGeofencingAsync = hasStartedGeofencingAsync;
exports.installWebGeolocationPolyfill = installWebGeolocationPolyfill;
exports._getCurrentWatchId = _getCurrentWatchId;
Object.defineProperty(exports, "PermissionStatus", {
  enumerable: true,
  get: function get() {
    return _unimodulesPermissionsInterface.PermissionStatus;
  }
});
exports.EventEmitter = exports.GeofencingRegionState = exports.GeofencingEventType = exports.ActivityType = exports.Accuracy = void 0;

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _core = require("@unimodules/core");

var _unimodulesPermissionsInterface = require("unimodules-permissions-interface");

var _invariant = _interopRequireDefault(require("invariant"));

var _ExpoLocation = _interopRequireDefault(require("./ExpoLocation"));

var LocationEventEmitter = new _core.EventEmitter(_ExpoLocation.default);
exports.EventEmitter = LocationEventEmitter;
var LocationAccuracy;
exports.Accuracy = LocationAccuracy;

(function (LocationAccuracy) {
  LocationAccuracy[LocationAccuracy["Lowest"] = 1] = "Lowest";
  LocationAccuracy[LocationAccuracy["Low"] = 2] = "Low";
  LocationAccuracy[LocationAccuracy["Balanced"] = 3] = "Balanced";
  LocationAccuracy[LocationAccuracy["High"] = 4] = "High";
  LocationAccuracy[LocationAccuracy["Highest"] = 5] = "Highest";
  LocationAccuracy[LocationAccuracy["BestForNavigation"] = 6] = "BestForNavigation";
})(LocationAccuracy || (exports.Accuracy = LocationAccuracy = {}));

var LocationActivityType;
exports.ActivityType = LocationActivityType;

(function (LocationActivityType) {
  LocationActivityType[LocationActivityType["Other"] = 1] = "Other";
  LocationActivityType[LocationActivityType["AutomotiveNavigation"] = 2] = "AutomotiveNavigation";
  LocationActivityType[LocationActivityType["Fitness"] = 3] = "Fitness";
  LocationActivityType[LocationActivityType["OtherNavigation"] = 4] = "OtherNavigation";
  LocationActivityType[LocationActivityType["Airborne"] = 5] = "Airborne";
})(LocationActivityType || (exports.ActivityType = LocationActivityType = {}));

var GeofencingEventType;
exports.GeofencingEventType = GeofencingEventType;

(function (GeofencingEventType) {
  GeofencingEventType[GeofencingEventType["Enter"] = 1] = "Enter";
  GeofencingEventType[GeofencingEventType["Exit"] = 2] = "Exit";
})(GeofencingEventType || (exports.GeofencingEventType = GeofencingEventType = {}));

var GeofencingRegionState;
exports.GeofencingRegionState = GeofencingRegionState;

(function (GeofencingRegionState) {
  GeofencingRegionState[GeofencingRegionState["Unknown"] = 0] = "Unknown";
  GeofencingRegionState[GeofencingRegionState["Inside"] = 1] = "Inside";
  GeofencingRegionState[GeofencingRegionState["Outside"] = 2] = "Outside";
})(GeofencingRegionState || (exports.GeofencingRegionState = GeofencingRegionState = {}));

var nextWatchId = 0;
var headingId;

function _getNextWatchId() {
  nextWatchId++;
  return nextWatchId;
}

function _getCurrentWatchId() {
  return nextWatchId;
}

var watchCallbacks = {};
var deviceEventSubscription;
var headingEventSub;
var googleApiKey;
var googleApiUrl = 'https://maps.googleapis.com/maps/api/geocode/json';

function getProviderStatusAsync() {
  return _regenerator.default.async(function getProviderStatusAsync$(_context) {
    while (1) {
      switch (_context.prev = _context.next) {
        case 0:
          return _context.abrupt("return", _ExpoLocation.default.getProviderStatusAsync());

        case 1:
        case "end":
          return _context.stop();
      }
    }
  });
}

function enableNetworkProviderAsync() {
  return _regenerator.default.async(function enableNetworkProviderAsync$(_context2) {
    while (1) {
      switch (_context2.prev = _context2.next) {
        case 0:
          if (!(_core.Platform.OS === 'android')) {
            _context2.next = 2;
            break;
          }

          return _context2.abrupt("return", _ExpoLocation.default.enableNetworkProviderAsync());

        case 2:
        case "end":
          return _context2.stop();
      }
    }
  });
}

function getCurrentPositionAsync() {
  var options,
      _args3 = arguments;
  return _regenerator.default.async(function getCurrentPositionAsync$(_context3) {
    while (1) {
      switch (_context3.prev = _context3.next) {
        case 0:
          options = _args3.length > 0 && _args3[0] !== undefined ? _args3[0] : {};
          return _context3.abrupt("return", _ExpoLocation.default.getCurrentPositionAsync(options));

        case 2:
        case "end":
          return _context3.stop();
      }
    }
  });
}

function getLastKnownPositionAsync() {
  return _regenerator.default.async(function getLastKnownPositionAsync$(_context4) {
    while (1) {
      switch (_context4.prev = _context4.next) {
        case 0:
          return _context4.abrupt("return", _ExpoLocation.default.getLastKnownPositionAsync());

        case 1:
        case "end":
          return _context4.stop();
      }
    }
  });
}

function getHeadingAsync() {
  return _regenerator.default.async(function getHeadingAsync$(_context6) {
    while (1) {
      switch (_context6.prev = _context6.next) {
        case 0:
          return _context6.abrupt("return", new Promise(function _callee(resolve, reject) {
            var tries, headingSub, done, subscription, _tries;

            return _regenerator.default.async(function _callee$(_context5) {
              while (1) {
                switch (_context5.prev = _context5.next) {
                  case 0:
                    _context5.prev = 0;

                    if (!headingEventSub) {
                      _context5.next = 6;
                      break;
                    }

                    tries = 0;
                    headingSub = LocationEventEmitter.addListener('Expo.headingChanged', function (_ref) {
                      var heading = _ref.heading;

                      if (heading.accuracy > 1 || tries > 5) {
                        resolve(heading);
                        LocationEventEmitter.removeSubscription(headingSub);
                      } else {
                        tries += 1;
                      }
                    });
                    _context5.next = 12;
                    break;

                  case 6:
                    done = false;
                    _tries = 0;
                    _context5.next = 10;
                    return _regenerator.default.awrap(watchHeadingAsync(function (heading) {
                      if (!done) {
                        if (heading.accuracy > 1 || _tries > 5) {
                          subscription.remove();
                          resolve(heading);
                          done = true;
                        } else {
                          _tries += 1;
                        }
                      } else {
                        subscription.remove();
                      }
                    }));

                  case 10:
                    subscription = _context5.sent;

                    if (done) {
                      subscription.remove();
                    }

                  case 12:
                    _context5.next = 17;
                    break;

                  case 14:
                    _context5.prev = 14;
                    _context5.t0 = _context5["catch"](0);
                    reject(_context5.t0);

                  case 17:
                  case "end":
                    return _context5.stop();
                }
              }
            }, null, null, [[0, 14]]);
          }));

        case 1:
        case "end":
          return _context6.stop();
      }
    }
  });
}

function watchHeadingAsync(callback) {
  return _regenerator.default.async(function watchHeadingAsync$(_context7) {
    while (1) {
      switch (_context7.prev = _context7.next) {
        case 0:
          if (headingEventSub) {
            _removeHeadingWatcher(headingId);
          }

          headingEventSub = LocationEventEmitter.addListener('Expo.headingChanged', function (_ref2) {
            var watchId = _ref2.watchId,
                heading = _ref2.heading;
            var callback = watchCallbacks[watchId];

            if (callback) {
              callback(heading);
            } else {
              _ExpoLocation.default.removeWatchAsync(watchId);
            }
          });
          headingId = _getNextWatchId();
          watchCallbacks[headingId] = callback;
          _context7.next = 6;
          return _regenerator.default.awrap(_ExpoLocation.default.watchDeviceHeading(headingId));

        case 6:
          return _context7.abrupt("return", {
            remove: function remove() {
              _removeHeadingWatcher(headingId);
            }
          });

        case 7:
        case "end":
          return _context7.stop();
      }
    }
  });
}

function _removeHeadingWatcher(watchId) {
  if (!watchCallbacks[watchId]) {
    return;
  }

  delete watchCallbacks[watchId];

  _ExpoLocation.default.removeWatchAsync(watchId);

  if (headingEventSub) {
    LocationEventEmitter.removeSubscription(headingEventSub);
    headingEventSub = null;
  }
}

function _maybeInitializeEmitterSubscription() {
  if (!deviceEventSubscription) {
    deviceEventSubscription = LocationEventEmitter.addListener('Expo.locationChanged', function (_ref3) {
      var watchId = _ref3.watchId,
          location = _ref3.location;
      var callback = watchCallbacks[watchId];

      if (callback) {
        callback(location);
      } else {
        _ExpoLocation.default.removeWatchAsync(watchId);
      }
    });
  }
}

function geocodeAsync(address) {
  return _regenerator.default.async(function geocodeAsync$(_context8) {
    while (1) {
      switch (_context8.prev = _context8.next) {
        case 0:
          return _context8.abrupt("return", _ExpoLocation.default.geocodeAsync(address).catch(function (error) {
            var platformUsesGoogleMaps = _core.Platform.OS === 'android' || _core.Platform.OS === 'web';

            if (platformUsesGoogleMaps && error.code === 'E_NO_GEOCODER') {
              if (!googleApiKey) {
                throw new _core.CodedError(error.code, error.message + " Please set a Google API Key to use geocoding.");
              }

              return _googleGeocodeAsync(address);
            }

            throw error;
          }));

        case 1:
        case "end":
          return _context8.stop();
      }
    }
  });
}

function reverseGeocodeAsync(location) {
  return _regenerator.default.async(function reverseGeocodeAsync$(_context9) {
    while (1) {
      switch (_context9.prev = _context9.next) {
        case 0:
          if (!(typeof location.latitude !== 'number' || typeof location.longitude !== 'number')) {
            _context9.next = 2;
            break;
          }

          throw new TypeError('Location should be an object with number properties `latitude` and `longitude`.');

        case 2:
          return _context9.abrupt("return", _ExpoLocation.default.reverseGeocodeAsync(location).catch(function (error) {
            var platformUsesGoogleMaps = _core.Platform.OS === 'android' || _core.Platform.OS === 'web';

            if (platformUsesGoogleMaps && error.code === 'E_NO_GEOCODER') {
              if (!googleApiKey) {
                throw new _core.CodedError(error.code, error.message + " Please set a Google API Key to use geocoding.");
              }

              return _googleReverseGeocodeAsync(location);
            }

            throw error;
          }));

        case 3:
        case "end":
          return _context9.stop();
      }
    }
  });
}

function setApiKey(apiKey) {
  googleApiKey = apiKey;
}

function _googleGeocodeAsync(address) {
  var result, resultObject;
  return _regenerator.default.async(function _googleGeocodeAsync$(_context10) {
    while (1) {
      switch (_context10.prev = _context10.next) {
        case 0:
          _context10.next = 2;
          return _regenerator.default.awrap(fetch(googleApiUrl + "?key=" + googleApiKey + "&address=" + encodeURI(address)));

        case 2:
          result = _context10.sent;
          _context10.next = 5;
          return _regenerator.default.awrap(result.json());

        case 5:
          resultObject = _context10.sent;

          if (!(resultObject.status === 'ZERO_RESULTS')) {
            _context10.next = 8;
            break;
          }

          return _context10.abrupt("return", []);

        case 8:
          assertGeocodeResults(resultObject);
          return _context10.abrupt("return", resultObject.results.map(function (result) {
            var location = result.geometry.location;
            return {
              latitude: location.lat,
              longitude: location.lng
            };
          }));

        case 10:
        case "end":
          return _context10.stop();
      }
    }
  });
}

function _googleReverseGeocodeAsync(options) {
  var result, resultObject;
  return _regenerator.default.async(function _googleReverseGeocodeAsync$(_context11) {
    while (1) {
      switch (_context11.prev = _context11.next) {
        case 0:
          _context11.next = 2;
          return _regenerator.default.awrap(fetch(googleApiUrl + "?key=" + googleApiKey + "&latlng=" + options.latitude + "," + options.longitude));

        case 2:
          result = _context11.sent;
          _context11.next = 5;
          return _regenerator.default.awrap(result.json());

        case 5:
          resultObject = _context11.sent;

          if (!(resultObject.status === 'ZERO_RESULTS')) {
            _context11.next = 8;
            break;
          }

          return _context11.abrupt("return", []);

        case 8:
          assertGeocodeResults(resultObject);
          return _context11.abrupt("return", resultObject.results.map(function (result) {
            var address = {};
            result.address_components.forEach(function (component) {
              if (component.types.includes('locality')) {
                address.city = component.long_name;
              } else if (component.types.includes('street_address')) {
                address.street = component.long_name;
              } else if (component.types.includes('administrative_area_level_1')) {
                address.region = component.long_name;
              } else if (component.types.includes('country')) {
                address.country = component.long_name;
              } else if (component.types.includes('postal_code')) {
                address.postalCode = component.long_name;
              } else if (component.types.includes('point_of_interest')) {
                address.name = component.long_name;
              }
            });
            return address;
          }));

        case 10:
        case "end":
          return _context11.stop();
      }
    }
  });
}

function assertGeocodeResults(resultObject) {
  var status = resultObject.status,
      error_message = resultObject.error_message;

  if (status !== 'ZERO_RESULTS' && status !== 'OK') {
    if (error_message) {
      throw new _core.CodedError(status, error_message);
    } else if (status === 'UNKNOWN_ERROR') {
      throw new _core.CodedError(status, 'the request could not be processed due to a server error. The request may succeed if you try again.');
    }

    throw new _core.CodedError(status, "An error occurred during geocoding.");
  }
}

function watchPosition(success, error, options) {
  _maybeInitializeEmitterSubscription();

  var watchId = _getNextWatchId();

  watchCallbacks[watchId] = success;

  _ExpoLocation.default.watchPositionImplAsync(watchId, options).catch(function (err) {
    _removeWatcher(watchId);

    error({
      watchId: watchId,
      message: err.message,
      code: err.code
    });
  });

  return watchId;
}

function watchPositionAsync(options, callback) {
  var watchId;
  return _regenerator.default.async(function watchPositionAsync$(_context12) {
    while (1) {
      switch (_context12.prev = _context12.next) {
        case 0:
          _maybeInitializeEmitterSubscription();

          watchId = _getNextWatchId();
          watchCallbacks[watchId] = callback;
          _context12.next = 5;
          return _regenerator.default.awrap(_ExpoLocation.default.watchPositionImplAsync(watchId, options));

        case 5:
          return _context12.abrupt("return", {
            remove: function remove() {
              _removeWatcher(watchId);
            }
          });

        case 6:
        case "end":
          return _context12.stop();
      }
    }
  });
}

function clearWatch(watchId) {
  _removeWatcher(watchId);
}

function _removeWatcher(watchId) {
  if (!watchCallbacks[watchId]) {
    return;
  }

  _ExpoLocation.default.removeWatchAsync(watchId);

  delete watchCallbacks[watchId];

  if (Object.keys(watchCallbacks).length === 0 && deviceEventSubscription) {
    LocationEventEmitter.removeSubscription(deviceEventSubscription);
    deviceEventSubscription = null;
  }
}

function getCurrentPosition(success) {
  var error = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};
  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
  (0, _invariant.default)(typeof success === 'function', 'Must provide a valid success callback.');
  (0, _invariant.default)(typeof options === 'object', 'options must be an object.');

  _getCurrentPositionAsyncWrapper(success, error, options);
}

function _getCurrentPositionAsyncWrapper(success, error, options) {
  var result;
  return _regenerator.default.async(function _getCurrentPositionAsyncWrapper$(_context13) {
    while (1) {
      switch (_context13.prev = _context13.next) {
        case 0:
          _context13.prev = 0;
          _context13.next = 3;
          return _regenerator.default.awrap(_ExpoLocation.default.requestPermissionsAsync());

        case 3:
          _context13.next = 5;
          return _regenerator.default.awrap(getCurrentPositionAsync(options));

        case 5:
          result = _context13.sent;
          success(result);
          _context13.next = 12;
          break;

        case 9:
          _context13.prev = 9;
          _context13.t0 = _context13["catch"](0);
          error(_context13.t0);

        case 12:
        case "end":
          return _context13.stop();
      }
    }
  }, null, null, [[0, 9]]);
}

function getPermissionsAsync() {
  return _regenerator.default.async(function getPermissionsAsync$(_context14) {
    while (1) {
      switch (_context14.prev = _context14.next) {
        case 0:
          _context14.next = 2;
          return _regenerator.default.awrap(_ExpoLocation.default.getPermissionsAsync());

        case 2:
          return _context14.abrupt("return", _context14.sent);

        case 3:
        case "end":
          return _context14.stop();
      }
    }
  });
}

function requestPermissionsAsync() {
  return _regenerator.default.async(function requestPermissionsAsync$(_context15) {
    while (1) {
      switch (_context15.prev = _context15.next) {
        case 0:
          _context15.next = 2;
          return _regenerator.default.awrap(_ExpoLocation.default.requestPermissionsAsync());

        case 2:
          return _context15.abrupt("return", _context15.sent);

        case 3:
        case "end":
          return _context15.stop();
      }
    }
  });
}

function hasServicesEnabledAsync() {
  return _regenerator.default.async(function hasServicesEnabledAsync$(_context16) {
    while (1) {
      switch (_context16.prev = _context16.next) {
        case 0:
          _context16.next = 2;
          return _regenerator.default.awrap(_ExpoLocation.default.hasServicesEnabledAsync());

        case 2:
          return _context16.abrupt("return", _context16.sent);

        case 3:
        case "end":
          return _context16.stop();
      }
    }
  });
}

function _validateTaskName(taskName) {
  (0, _invariant.default)(taskName && typeof taskName === 'string', '`taskName` must be a non-empty string.');
}

function isBackgroundLocationAvailableAsync() {
  var providerStatus;
  return _regenerator.default.async(function isBackgroundLocationAvailableAsync$(_context17) {
    while (1) {
      switch (_context17.prev = _context17.next) {
        case 0:
          _context17.next = 2;
          return _regenerator.default.awrap(getProviderStatusAsync());

        case 2:
          providerStatus = _context17.sent;
          return _context17.abrupt("return", providerStatus.backgroundModeEnabled);

        case 4:
        case "end":
          return _context17.stop();
      }
    }
  });
}

function startLocationUpdatesAsync(taskName) {
  var options,
      _args18 = arguments;
  return _regenerator.default.async(function startLocationUpdatesAsync$(_context18) {
    while (1) {
      switch (_context18.prev = _context18.next) {
        case 0:
          options = _args18.length > 1 && _args18[1] !== undefined ? _args18[1] : {
            accuracy: LocationAccuracy.Balanced
          };

          _validateTaskName(taskName);

          _context18.next = 4;
          return _regenerator.default.awrap(_ExpoLocation.default.startLocationUpdatesAsync(taskName, options));

        case 4:
        case "end":
          return _context18.stop();
      }
    }
  });
}

function stopLocationUpdatesAsync(taskName) {
  return _regenerator.default.async(function stopLocationUpdatesAsync$(_context19) {
    while (1) {
      switch (_context19.prev = _context19.next) {
        case 0:
          _validateTaskName(taskName);

          _context19.next = 3;
          return _regenerator.default.awrap(_ExpoLocation.default.stopLocationUpdatesAsync(taskName));

        case 3:
        case "end":
          return _context19.stop();
      }
    }
  });
}

function hasStartedLocationUpdatesAsync(taskName) {
  return _regenerator.default.async(function hasStartedLocationUpdatesAsync$(_context20) {
    while (1) {
      switch (_context20.prev = _context20.next) {
        case 0:
          _validateTaskName(taskName);

          return _context20.abrupt("return", _ExpoLocation.default.hasStartedLocationUpdatesAsync(taskName));

        case 2:
        case "end":
          return _context20.stop();
      }
    }
  });
}

function _validateRegions(regions) {
  if (!regions || regions.length === 0) {
    throw new Error('Regions array cannot be empty. Use `stopGeofencingAsync` if you want to stop geofencing all regions');
  }

  for (var _iterator = regions, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[typeof Symbol === "function" ? Symbol.iterator : "@@iterator"]();;) {
    var _ref4;

    if (_isArray) {
      if (_i >= _iterator.length) break;
      _ref4 = _iterator[_i++];
    } else {
      _i = _iterator.next();
      if (_i.done) break;
      _ref4 = _i.value;
    }

    var _region = _ref4;

    if (typeof _region.latitude !== 'number') {
      throw new TypeError("Region's latitude must be a number. Got '" + _region.latitude + "' instead.");
    }

    if (typeof _region.longitude !== 'number') {
      throw new TypeError("Region's longitude must be a number. Got '" + _region.longitude + "' instead.");
    }

    if (typeof _region.radius !== 'number') {
      throw new TypeError("Region's radius must be a number. Got '" + _region.radius + "' instead.");
    }
  }
}

function startGeofencingAsync(taskName) {
  var regions,
      _args21 = arguments;
  return _regenerator.default.async(function startGeofencingAsync$(_context21) {
    while (1) {
      switch (_context21.prev = _context21.next) {
        case 0:
          regions = _args21.length > 1 && _args21[1] !== undefined ? _args21[1] : [];

          _validateTaskName(taskName);

          _validateRegions(regions);

          _context21.next = 5;
          return _regenerator.default.awrap(_ExpoLocation.default.startGeofencingAsync(taskName, {
            regions: regions
          }));

        case 5:
        case "end":
          return _context21.stop();
      }
    }
  });
}

function stopGeofencingAsync(taskName) {
  return _regenerator.default.async(function stopGeofencingAsync$(_context22) {
    while (1) {
      switch (_context22.prev = _context22.next) {
        case 0:
          _validateTaskName(taskName);

          _context22.next = 3;
          return _regenerator.default.awrap(_ExpoLocation.default.stopGeofencingAsync(taskName));

        case 3:
        case "end":
          return _context22.stop();
      }
    }
  });
}

function hasStartedGeofencingAsync(taskName) {
  return _regenerator.default.async(function hasStartedGeofencingAsync$(_context23) {
    while (1) {
      switch (_context23.prev = _context23.next) {
        case 0:
          _validateTaskName(taskName);

          return _context23.abrupt("return", _ExpoLocation.default.hasStartedGeofencingAsync(taskName));

        case 2:
        case "end":
          return _context23.stop();
      }
    }
  });
}

function installWebGeolocationPolyfill() {
  if (_core.Platform.OS !== 'web') {
    window.navigator.geolocation = {
      getCurrentPosition: getCurrentPosition,
      watchPosition: watchPosition,
      clearWatch: clearWatch,
      stopObserving: function stopObserving() {}
    };
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFFLFlBQUEsT0FBTyxFQUFQO0FBQUYsV0FBNUMsQ0FORDs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFTQSxTQUFlLG1CQUFmLENBQW1DLFFBQW5DO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDTCxVQUFBLGlCQUFpQixDQUFDLFFBQUQsQ0FBakI7O0FBREs7QUFBQSw0Q0FFQyxzQkFBYSxtQkFBYixDQUFpQyxRQUFqQyxDQUZEOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUtBLFNBQWUseUJBQWYsQ0FBeUMsUUFBekM7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNMLFVBQUEsaUJBQWlCLENBQUMsUUFBRCxDQUFqQjs7QUFESyw2Q0FFRSxzQkFBYSx5QkFBYixDQUF1QyxRQUF2QyxDQUZGOztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQUtELFNBQVUsNkJBQVYsR0FBdUM7QUFDM0MsTUFBSSxlQUFTLEVBQVQsS0FBZ0IsS0FBcEIsRUFBMkI7QUFJekIsSUFBQSxNQUFNLENBQUMsU0FBUCxDQUFpQixXQUFqQixHQUErQjtBQUM3QixNQUFBLGtCQUFrQixFQUFsQixrQkFENkI7QUFFN0IsTUFBQSxhQUFhLEVBQWIsYUFGNkI7QUFHN0IsTUFBQSxVQUFVLEVBQVYsVUFINkI7QUFPN0IsTUFBQSxhQUFhLEVBQUUseUJBQUssQ0FBRztBQVBNLEtBQS9CO0FBU0Q7QUFDRiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEV2ZW50RW1pdHRlciwgUGxhdGZvcm0sIENvZGVkRXJyb3IgfSBmcm9tICdAdW5pbW9kdWxlcy9jb3JlJztcbmltcG9ydCB7XG4gIFBlcm1pc3Npb25SZXNwb25zZSBhcyBVTVBlcm1pc3Npb25SZXNwb25zZSxcbiAgUGVybWlzc2lvblN0YXR1cyxcbn0gZnJvbSAndW5pbW9kdWxlcy1wZXJtaXNzaW9ucy1pbnRlcmZhY2UnO1xuXG5pbXBvcnQgaW52YXJpYW50IGZyb20gJ2ludmFyaWFudCc7XG5cbmltcG9ydCBFeHBvTG9jYXRpb24gZnJvbSAnLi9FeHBvTG9jYXRpb24nO1xuXG5jb25zdCBMb2NhdGlvbkV2ZW50RW1pdHRlciA9IG5ldyBFdmVudEVtaXR0ZXIoRXhwb0xvY2F0aW9uKTtcblxuZXhwb3J0IGludGVyZmFjZSBQcm92aWRlclN0YXR1cyB7XG4gIGxvY2F0aW9uU2VydmljZXNFbmFibGVkOiBib29sZWFuO1xuICBiYWNrZ3JvdW5kTW9kZUVuYWJsZWQ6IGJvb2xlYW47XG4gIGdwc0F2YWlsYWJsZT86IGJvb2xlYW47XG4gIG5ldHdvcmtBdmFpbGFibGU/OiBib29sZWFuO1xuICBwYXNzaXZlQXZhaWxhYmxlPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBMb2NhdGlvbk9wdGlvbnMge1xuICBhY2N1cmFjeT86IExvY2F0aW9uQWNjdXJhY3k7XG4gIGVuYWJsZUhpZ2hBY2N1cmFjeT86IGJvb2xlYW47XG4gIHRpbWVJbnRlcnZhbD86IG51bWJlcjtcbiAgZGlzdGFuY2VJbnRlcnZhbD86IG51bWJlcjtcbiAgdGltZW91dD86IG51bWJlcjtcbiAgbWF5U2hvd1VzZXJTZXR0aW5nc0RpYWxvZz86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTG9jYXRpb25EYXRhIHtcbiAgY29vcmRzOiB7XG4gICAgbGF0aXR1ZGU6IG51bWJlcjtcbiAgICBsb25naXR1ZGU6IG51bWJlcjtcbiAgICBhbHRpdHVkZTogbnVtYmVyO1xuICAgIGFjY3VyYWN5OiBudW1iZXI7XG4gICAgaGVhZGluZzogbnVtYmVyO1xuICAgIHNwZWVkOiBudW1iZXI7XG4gIH07XG4gIHRpbWVzdGFtcDogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEhlYWRpbmdEYXRhIHtcbiAgdHJ1ZUhlYWRpbmc6IG51bWJlcjtcbiAgbWFnSGVhZGluZzogbnVtYmVyO1xuICBhY2N1cmFjeTogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEdlb2NvZGVkTG9jYXRpb24ge1xuICBsYXRpdHVkZTogbnVtYmVyO1xuICBsb25naXR1ZGU6IG51bWJlcjtcbiAgYWx0aXR1ZGU/OiBudW1iZXI7XG4gIGFjY3VyYWN5PzogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEFkZHJlc3Mge1xuICBjaXR5OiBzdHJpbmc7XG4gIHN0cmVldDogc3RyaW5nO1xuICByZWdpb246IHN0cmluZztcbiAgY291bnRyeTogc3RyaW5nO1xuICBwb3N0YWxDb2RlOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbn1cblxuZXhwb3J0IHsgUGVybWlzc2lvblN0YXR1cyB9O1xuXG5leHBvcnQgdHlwZSBQZXJtaXNzaW9uRGV0YWlsc0xvY2F0aW9uSU9TID0ge1xuICBzY29wZTogJ3doZW5JblVzZScgfCAnYWx3YXlzJztcbn07XG5cbmV4cG9ydCB0eXBlIFBlcm1pc3Npb25EZXRhaWxzTG9jYXRpb25BbmRyb2lkID0ge1xuICBzY29wZTogJ2ZpbmUnIHwgJ2NvYXJzZScgfCAnbm9uZSc7XG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIFBlcm1pc3Npb25SZXNwb25zZSBleHRlbmRzIFVNUGVybWlzc2lvblJlc3BvbnNlIHtcbiAgaW9zPzogUGVybWlzc2lvbkRldGFpbHNMb2NhdGlvbklPUztcbiAgYW5kcm9pZD86IFBlcm1pc3Npb25EZXRhaWxzTG9jYXRpb25BbmRyb2lkO1xufVxuXG5pbnRlcmZhY2UgTG9jYXRpb25UYXNrT3B0aW9ucyB7XG4gIGFjY3VyYWN5PzogTG9jYXRpb25BY2N1cmFjeTtcbiAgdGltZUludGVydmFsPzogbnVtYmVyOyAvLyBBbmRyb2lkIG9ubHlcbiAgZGlzdGFuY2VJbnRlcnZhbD86IG51bWJlcjtcbiAgc2hvd3NCYWNrZ3JvdW5kTG9jYXRpb25JbmRpY2F0b3I/OiBib29sZWFuOyAvLyBpT1Mgb25seVxuICBkZWZlcnJlZFVwZGF0ZXNEaXN0YW5jZT86IG51bWJlcjtcbiAgZGVmZXJyZWRVcGRhdGVzVGltZW91dD86IG51bWJlcjtcbiAgZGVmZXJyZWRVcGRhdGVzSW50ZXJ2YWw/OiBudW1iZXI7XG5cbiAgLy8gaU9TIG9ubHlcbiAgYWN0aXZpdHlUeXBlPzogTG9jYXRpb25BY3Rpdml0eVR5cGU7XG4gIHBhdXNlc1VwZGF0ZXNBdXRvbWF0aWNhbGx5PzogYm9vbGVhbjtcblxuICBmb3JlZ3JvdW5kU2VydmljZT86IHtcbiAgICBub3RpZmljYXRpb25UaXRsZTogc3RyaW5nO1xuICAgIG5vdGlmaWNhdGlvbkJvZHk6IHN0cmluZztcbiAgICBub3RpZmljYXRpb25Db2xvcj86IHN0cmluZztcbiAgfTtcbn1cblxuaW50ZXJmYWNlIFJlZ2lvbiB7XG4gIGlkZW50aWZpZXI/OiBzdHJpbmc7XG4gIGxhdGl0dWRlOiBudW1iZXI7XG4gIGxvbmdpdHVkZTogbnVtYmVyO1xuICByYWRpdXM6IG51bWJlcjtcbiAgbm90aWZ5T25FbnRlcj86IGJvb2xlYW47XG4gIG5vdGlmeU9uRXhpdD86IGJvb2xlYW47XG59XG5cbnR5cGUgU3Vic2NyaXB0aW9uID0ge1xuICByZW1vdmU6ICgpID0+IHZvaWQ7XG59O1xudHlwZSBMb2NhdGlvbkNhbGxiYWNrID0gKGRhdGE6IExvY2F0aW9uRGF0YSkgPT4gYW55O1xudHlwZSBIZWFkaW5nQ2FsbGJhY2sgPSAoZGF0YTogSGVhZGluZ0RhdGEpID0+IGFueTtcblxuZW51bSBMb2NhdGlvbkFjY3VyYWN5IHtcbiAgTG93ZXN0ID0gMSxcbiAgTG93ID0gMixcbiAgQmFsYW5jZWQgPSAzLFxuICBIaWdoID0gNCxcbiAgSGlnaGVzdCA9IDUsXG4gIEJlc3RGb3JOYXZpZ2F0aW9uID0gNixcbn1cblxuZW51bSBMb2NhdGlvbkFjdGl2aXR5VHlwZSB7XG4gIE90aGVyID0gMSxcbiAgQXV0b21vdGl2ZU5hdmlnYXRpb24gPSAyLFxuICBGaXRuZXNzID0gMyxcbiAgT3RoZXJOYXZpZ2F0aW9uID0gNCxcbiAgQWlyYm9ybmUgPSA1LFxufVxuXG5leHBvcnQgeyBMb2NhdGlvbkFjY3VyYWN5IGFzIEFjY3VyYWN5LCBMb2NhdGlvbkFjdGl2aXR5VHlwZSBhcyBBY3Rpdml0eVR5cGUgfTtcblxuZXhwb3J0IGVudW0gR2VvZmVuY2luZ0V2ZW50VHlwZSB7XG4gIEVudGVyID0gMSxcbiAgRXhpdCA9IDIsXG59XG5cbmV4cG9ydCBlbnVtIEdlb2ZlbmNpbmdSZWdpb25TdGF0ZSB7XG4gIFVua25vd24gPSAwLFxuICBJbnNpZGUgPSAxLFxuICBPdXRzaWRlID0gMixcbn1cblxubGV0IG5leHRXYXRjaElkID0gMDtcbmxldCBoZWFkaW5nSWQ7XG5mdW5jdGlvbiBfZ2V0TmV4dFdhdGNoSWQoKSB7XG4gIG5leHRXYXRjaElkKys7XG4gIHJldHVybiBuZXh0V2F0Y2hJZDtcbn1cbmZ1bmN0aW9uIF9nZXRDdXJyZW50V2F0Y2hJZCgpIHtcbiAgcmV0dXJuIG5leHRXYXRjaElkO1xufVxuXG5sZXQgd2F0Y2hDYWxsYmFja3M6IHtcbiAgW3dhdGNoSWQ6IG51bWJlcl06IExvY2F0aW9uQ2FsbGJhY2sgfCBIZWFkaW5nQ2FsbGJhY2s7XG59ID0ge307XG5cbmxldCBkZXZpY2VFdmVudFN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uIHwgbnVsbDtcbmxldCBoZWFkaW5nRXZlbnRTdWI6IFN1YnNjcmlwdGlvbiB8IG51bGw7XG5sZXQgZ29vZ2xlQXBpS2V5O1xuY29uc3QgZ29vZ2xlQXBpVXJsID0gJ2h0dHBzOi8vbWFwcy5nb29nbGVhcGlzLmNvbS9tYXBzL2FwaS9nZW9jb2RlL2pzb24nO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UHJvdmlkZXJTdGF0dXNBc3luYygpOiBQcm9taXNlPFByb3ZpZGVyU3RhdHVzPiB7XG4gIHJldHVybiBFeHBvTG9jYXRpb24uZ2V0UHJvdmlkZXJTdGF0dXNBc3luYygpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZW5hYmxlTmV0d29ya1Byb3ZpZGVyQXN5bmMoKTogUHJvbWlzZTx2b2lkPiB7XG4gIC8vIElmIG5ldHdvcmsgcHJvdmlkZXIgaXMgZGlzYWJsZWQgKHVzZXIncyBsb2NhdGlvbiBtb2RlIGlzIHNldCB0byBcIkRldmljZSBvbmx5XCIpLFxuICAvLyBBbmRyb2lkJ3MgbG9jYXRpb24gcHJvdmlkZXIgbWF5IG5vdCBnaXZlIHlvdSBhbnkgcmVzdWx0cy4gVXNlIHRoaXMgbWV0aG9kIGluIG9yZGVyIHRvIGFzayB0aGUgdXNlclxuICAvLyB0byBjaGFuZ2UgdGhlIGxvY2F0aW9uIG1vZGUgdG8gXCJIaWdoIGFjY3VyYWN5XCIgd2hpY2ggdXNlcyBHb29nbGUgUGxheSBzZXJ2aWNlcyBhbmQgZW5hYmxlcyBuZXR3b3JrIHByb3ZpZGVyLlxuICAvLyBgZ2V0Q3VycmVudFBvc2l0aW9uQXN5bmNgIGFuZCBgd2F0Y2hQb3NpdGlvbkFzeW5jYCBhcmUgZG9pbmcgaXQgYXV0b21hdGljYWxseSBhbnl3YXkuXG5cbiAgaWYgKFBsYXRmb3JtLk9TID09PSAnYW5kcm9pZCcpIHtcbiAgICByZXR1cm4gRXhwb0xvY2F0aW9uLmVuYWJsZU5ldHdvcmtQcm92aWRlckFzeW5jKCk7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEN1cnJlbnRQb3NpdGlvbkFzeW5jKFxuICBvcHRpb25zOiBMb2NhdGlvbk9wdGlvbnMgPSB7fVxuKTogUHJvbWlzZTxMb2NhdGlvbkRhdGE+IHtcbiAgcmV0dXJuIEV4cG9Mb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb25Bc3luYyhvcHRpb25zKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldExhc3RLbm93blBvc2l0aW9uQXN5bmMoKTogUHJvbWlzZTxMb2NhdGlvbkRhdGE+IHtcbiAgcmV0dXJuIEV4cG9Mb2NhdGlvbi5nZXRMYXN0S25vd25Qb3NpdGlvbkFzeW5jKCk7XG59XG5cbi8vIFN0YXJ0IENvbXBhc3MgTW9kdWxlXG5cbi8vIFRvIHNpbXBsaWZ5LCB3ZSB3aWxsIGNhbGwgd2F0Y2hIZWFkaW5nQXN5bmMgYW5kIHdhaXQgZm9yIG9uZSB1cGRhdGUgVG8gZW5zdXJlIGFjY3VyYWN5LCB3ZSB3YWl0XG4vLyBmb3IgYSBjb3VwbGUgb2Ygd2F0Y2ggdXBkYXRlcyBpZiB0aGUgZGF0YSBoYXMgbG93IGFjY3VyYWN5XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0SGVhZGluZ0FzeW5jKCk6IFByb21pc2U8SGVhZGluZ0RhdGE+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlPEhlYWRpbmdEYXRhPihhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIElmIHRoZXJlIGlzIGFscmVhZHkgYSBjb21wYXNzIGFjdGl2ZSAod291bGQgYmUgYSB3YXRjaClcbiAgICAgIGlmIChoZWFkaW5nRXZlbnRTdWIpIHtcbiAgICAgICAgbGV0IHRyaWVzID0gMDtcbiAgICAgICAgY29uc3QgaGVhZGluZ1N1YiA9IExvY2F0aW9uRXZlbnRFbWl0dGVyLmFkZExpc3RlbmVyKFxuICAgICAgICAgICdFeHBvLmhlYWRpbmdDaGFuZ2VkJyxcbiAgICAgICAgICAoeyBoZWFkaW5nIH06IHsgaGVhZGluZzogSGVhZGluZ0RhdGEgfSkgPT4ge1xuICAgICAgICAgICAgaWYgKGhlYWRpbmcuYWNjdXJhY3kgPiAxIHx8IHRyaWVzID4gNSkge1xuICAgICAgICAgICAgICByZXNvbHZlKGhlYWRpbmcpO1xuICAgICAgICAgICAgICBMb2NhdGlvbkV2ZW50RW1pdHRlci5yZW1vdmVTdWJzY3JpcHRpb24oaGVhZGluZ1N1Yik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0cmllcyArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCBkb25lID0gZmFsc2U7XG4gICAgICAgIGxldCBzdWJzY3JpcHRpb247XG4gICAgICAgIGxldCB0cmllcyA9IDA7XG4gICAgICAgIHN1YnNjcmlwdGlvbiA9IGF3YWl0IHdhdGNoSGVhZGluZ0FzeW5jKChoZWFkaW5nOiBIZWFkaW5nRGF0YSkgPT4ge1xuICAgICAgICAgIGlmICghZG9uZSkge1xuICAgICAgICAgICAgaWYgKGhlYWRpbmcuYWNjdXJhY3kgPiAxIHx8IHRyaWVzID4gNSkge1xuICAgICAgICAgICAgICBzdWJzY3JpcHRpb24ucmVtb3ZlKCk7XG4gICAgICAgICAgICAgIHJlc29sdmUoaGVhZGluZyk7XG4gICAgICAgICAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdHJpZXMgKz0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnJlbW92ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgICBzdWJzY3JpcHRpb24ucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZWplY3QoZSk7XG4gICAgfVxuICB9KTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdhdGNoSGVhZGluZ0FzeW5jKFxuICBjYWxsYmFjazogSGVhZGluZ0NhbGxiYWNrXG4pOiBQcm9taXNlPHsgcmVtb3ZlOiAoKSA9PiB2b2lkIH0+IHtcbiAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYWxyZWFkeSBhIGNvbXBhc3MgZXZlbnQgd2F0Y2guXG4gIGlmIChoZWFkaW5nRXZlbnRTdWIpIHtcbiAgICBfcmVtb3ZlSGVhZGluZ1dhdGNoZXIoaGVhZGluZ0lkKTtcbiAgfVxuXG4gIGhlYWRpbmdFdmVudFN1YiA9IExvY2F0aW9uRXZlbnRFbWl0dGVyLmFkZExpc3RlbmVyKFxuICAgICdFeHBvLmhlYWRpbmdDaGFuZ2VkJyxcbiAgICAoeyB3YXRjaElkLCBoZWFkaW5nIH06IHsgd2F0Y2hJZDogc3RyaW5nOyBoZWFkaW5nOiBIZWFkaW5nRGF0YSB9KSA9PiB7XG4gICAgICBjb25zdCBjYWxsYmFjayA9IHdhdGNoQ2FsbGJhY2tzW3dhdGNoSWRdO1xuICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgIGNhbGxiYWNrKGhlYWRpbmcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgRXhwb0xvY2F0aW9uLnJlbW92ZVdhdGNoQXN5bmMod2F0Y2hJZCk7XG4gICAgICB9XG4gICAgfVxuICApO1xuXG4gIGhlYWRpbmdJZCA9IF9nZXROZXh0V2F0Y2hJZCgpO1xuICB3YXRjaENhbGxiYWNrc1toZWFkaW5nSWRdID0gY2FsbGJhY2s7XG4gIGF3YWl0IEV4cG9Mb2NhdGlvbi53YXRjaERldmljZUhlYWRpbmcoaGVhZGluZ0lkKTtcbiAgcmV0dXJuIHtcbiAgICByZW1vdmUoKSB7XG4gICAgICBfcmVtb3ZlSGVhZGluZ1dhdGNoZXIoaGVhZGluZ0lkKTtcbiAgICB9LFxuICB9O1xufVxuXG4vLyBSZW1vdmVzIHRoZSBjb21wYXNzIGxpc3RlbmVyIGFuZCBzdWIgZnJvbSBKUyBhbmQgTmF0aXZlXG5mdW5jdGlvbiBfcmVtb3ZlSGVhZGluZ1dhdGNoZXIod2F0Y2hJZCkge1xuICBpZiAoIXdhdGNoQ2FsbGJhY2tzW3dhdGNoSWRdKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGRlbGV0ZSB3YXRjaENhbGxiYWNrc1t3YXRjaElkXTtcbiAgRXhwb0xvY2F0aW9uLnJlbW92ZVdhdGNoQXN5bmMod2F0Y2hJZCk7XG4gIGlmIChoZWFkaW5nRXZlbnRTdWIpIHtcbiAgICBMb2NhdGlvbkV2ZW50RW1pdHRlci5yZW1vdmVTdWJzY3JpcHRpb24oaGVhZGluZ0V2ZW50U3ViKTtcbiAgICBoZWFkaW5nRXZlbnRTdWIgPSBudWxsO1xuICB9XG59XG4vLyBFbmQgQ29tcGFzcyBNb2R1bGVcblxuZnVuY3Rpb24gX21heWJlSW5pdGlhbGl6ZUVtaXR0ZXJTdWJzY3JpcHRpb24oKSB7XG4gIGlmICghZGV2aWNlRXZlbnRTdWJzY3JpcHRpb24pIHtcbiAgICBkZXZpY2VFdmVudFN1YnNjcmlwdGlvbiA9IExvY2F0aW9uRXZlbnRFbWl0dGVyLmFkZExpc3RlbmVyKFxuICAgICAgJ0V4cG8ubG9jYXRpb25DaGFuZ2VkJyxcbiAgICAgICh7IHdhdGNoSWQsIGxvY2F0aW9uIH06IHsgd2F0Y2hJZDogc3RyaW5nOyBsb2NhdGlvbjogTG9jYXRpb25EYXRhIH0pID0+IHtcbiAgICAgICAgY29uc3QgY2FsbGJhY2sgPSB3YXRjaENhbGxiYWNrc1t3YXRjaElkXTtcbiAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgY2FsbGJhY2sobG9jYXRpb24pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIEV4cG9Mb2NhdGlvbi5yZW1vdmVXYXRjaEFzeW5jKHdhdGNoSWQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgKTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2VvY29kZUFzeW5jKGFkZHJlc3M6IHN0cmluZyk6IFByb21pc2U8QXJyYXk8R2VvY29kZWRMb2NhdGlvbj4+IHtcbiAgcmV0dXJuIEV4cG9Mb2NhdGlvbi5nZW9jb2RlQXN5bmMoYWRkcmVzcykuY2F0Y2goZXJyb3IgPT4ge1xuICAgIGNvbnN0IHBsYXRmb3JtVXNlc0dvb2dsZU1hcHMgPSBQbGF0Zm9ybS5PUyA9PT0gJ2FuZHJvaWQnIHx8IFBsYXRmb3JtLk9TID09PSAnd2ViJztcblxuICAgIGlmIChwbGF0Zm9ybVVzZXNHb29nbGVNYXBzICYmIGVycm9yLmNvZGUgPT09ICdFX05PX0dFT0NPREVSJykge1xuICAgICAgaWYgKCFnb29nbGVBcGlLZXkpIHtcbiAgICAgICAgdGhyb3cgbmV3IENvZGVkRXJyb3IoXG4gICAgICAgICAgZXJyb3IuY29kZSxcbiAgICAgICAgICBgJHtlcnJvci5tZXNzYWdlfSBQbGVhc2Ugc2V0IGEgR29vZ2xlIEFQSSBLZXkgdG8gdXNlIGdlb2NvZGluZy5gXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm4gX2dvb2dsZUdlb2NvZGVBc3luYyhhZGRyZXNzKTtcbiAgICB9XG4gICAgdGhyb3cgZXJyb3I7XG4gIH0pO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmV2ZXJzZUdlb2NvZGVBc3luYyhsb2NhdGlvbjoge1xuICBsYXRpdHVkZTogbnVtYmVyO1xuICBsb25naXR1ZGU6IG51bWJlcjtcbn0pOiBQcm9taXNlPEFkZHJlc3NbXT4ge1xuICBpZiAodHlwZW9mIGxvY2F0aW9uLmxhdGl0dWRlICE9PSAnbnVtYmVyJyB8fCB0eXBlb2YgbG9jYXRpb24ubG9uZ2l0dWRlICE9PSAnbnVtYmVyJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICAnTG9jYXRpb24gc2hvdWxkIGJlIGFuIG9iamVjdCB3aXRoIG51bWJlciBwcm9wZXJ0aWVzIGBsYXRpdHVkZWAgYW5kIGBsb25naXR1ZGVgLidcbiAgICApO1xuICB9XG4gIHJldHVybiBFeHBvTG9jYXRpb24ucmV2ZXJzZUdlb2NvZGVBc3luYyhsb2NhdGlvbikuY2F0Y2goZXJyb3IgPT4ge1xuICAgIGNvbnN0IHBsYXRmb3JtVXNlc0dvb2dsZU1hcHMgPSBQbGF0Zm9ybS5PUyA9PT0gJ2FuZHJvaWQnIHx8IFBsYXRmb3JtLk9TID09PSAnd2ViJztcblxuICAgIGlmIChwbGF0Zm9ybVVzZXNHb29nbGVNYXBzICYmIGVycm9yLmNvZGUgPT09ICdFX05PX0dFT0NPREVSJykge1xuICAgICAgaWYgKCFnb29nbGVBcGlLZXkpIHtcbiAgICAgICAgdGhyb3cgbmV3IENvZGVkRXJyb3IoXG4gICAgICAgICAgZXJyb3IuY29kZSxcbiAgICAgICAgICBgJHtlcnJvci5tZXNzYWdlfSBQbGVhc2Ugc2V0IGEgR29vZ2xlIEFQSSBLZXkgdG8gdXNlIGdlb2NvZGluZy5gXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm4gX2dvb2dsZVJldmVyc2VHZW9jb2RlQXN5bmMobG9jYXRpb24pO1xuICAgIH1cbiAgICB0aHJvdyBlcnJvcjtcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRBcGlLZXkoYXBpS2V5OiBzdHJpbmcpIHtcbiAgZ29vZ2xlQXBpS2V5ID0gYXBpS2V5O1xufVxuXG5hc3luYyBmdW5jdGlvbiBfZ29vZ2xlR2VvY29kZUFzeW5jKGFkZHJlc3M6IHN0cmluZyk6IFByb21pc2U8R2VvY29kZWRMb2NhdGlvbltdPiB7XG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGZldGNoKGAke2dvb2dsZUFwaVVybH0/a2V5PSR7Z29vZ2xlQXBpS2V5fSZhZGRyZXNzPSR7ZW5jb2RlVVJJKGFkZHJlc3MpfWApO1xuICBjb25zdCByZXN1bHRPYmplY3QgPSBhd2FpdCByZXN1bHQuanNvbigpO1xuXG4gIGlmIChyZXN1bHRPYmplY3Quc3RhdHVzID09PSAnWkVST19SRVNVTFRTJykge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIGFzc2VydEdlb2NvZGVSZXN1bHRzKHJlc3VsdE9iamVjdCk7XG5cbiAgcmV0dXJuIHJlc3VsdE9iamVjdC5yZXN1bHRzLm1hcChyZXN1bHQgPT4ge1xuICAgIGxldCBsb2NhdGlvbiA9IHJlc3VsdC5nZW9tZXRyeS5sb2NhdGlvbjtcbiAgICAvLyBUT0RPOiBUaGlzIGlzIG1pc3NpbmcgYSBsb3Qgb2YgcHJvcHNcbiAgICByZXR1cm4ge1xuICAgICAgbGF0aXR1ZGU6IGxvY2F0aW9uLmxhdCxcbiAgICAgIGxvbmdpdHVkZTogbG9jYXRpb24ubG5nLFxuICAgIH07XG4gIH0pO1xufVxuXG5hc3luYyBmdW5jdGlvbiBfZ29vZ2xlUmV2ZXJzZUdlb2NvZGVBc3luYyhvcHRpb25zOiB7XG4gIGxhdGl0dWRlOiBudW1iZXI7XG4gIGxvbmdpdHVkZTogbnVtYmVyO1xufSk6IFByb21pc2U8QWRkcmVzc1tdPiB7XG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGZldGNoKFxuICAgIGAke2dvb2dsZUFwaVVybH0/a2V5PSR7Z29vZ2xlQXBpS2V5fSZsYXRsbmc9JHtvcHRpb25zLmxhdGl0dWRlfSwke29wdGlvbnMubG9uZ2l0dWRlfWBcbiAgKTtcbiAgY29uc3QgcmVzdWx0T2JqZWN0ID0gYXdhaXQgcmVzdWx0Lmpzb24oKTtcblxuICBpZiAocmVzdWx0T2JqZWN0LnN0YXR1cyA9PT0gJ1pFUk9fUkVTVUxUUycpIHtcbiAgICByZXR1cm4gW107XG4gIH1cblxuICBhc3NlcnRHZW9jb2RlUmVzdWx0cyhyZXN1bHRPYmplY3QpO1xuXG4gIHJldHVybiByZXN1bHRPYmplY3QucmVzdWx0cy5tYXAocmVzdWx0ID0+IHtcbiAgICBjb25zdCBhZGRyZXNzOiBhbnkgPSB7fTtcblxuICAgIHJlc3VsdC5hZGRyZXNzX2NvbXBvbmVudHMuZm9yRWFjaChjb21wb25lbnQgPT4ge1xuICAgICAgaWYgKGNvbXBvbmVudC50eXBlcy5pbmNsdWRlcygnbG9jYWxpdHknKSkge1xuICAgICAgICBhZGRyZXNzLmNpdHkgPSBjb21wb25lbnQubG9uZ19uYW1lO1xuICAgICAgfSBlbHNlIGlmIChjb21wb25lbnQudHlwZXMuaW5jbHVkZXMoJ3N0cmVldF9hZGRyZXNzJykpIHtcbiAgICAgICAgYWRkcmVzcy5zdHJlZXQgPSBjb21wb25lbnQubG9uZ19uYW1lO1xuICAgICAgfSBlbHNlIGlmIChjb21wb25lbnQudHlwZXMuaW5jbHVkZXMoJ2FkbWluaXN0cmF0aXZlX2FyZWFfbGV2ZWxfMScpKSB7XG4gICAgICAgIGFkZHJlc3MucmVnaW9uID0gY29tcG9uZW50LmxvbmdfbmFtZTtcbiAgICAgIH0gZWxzZSBpZiAoY29tcG9uZW50LnR5cGVzLmluY2x1ZGVzKCdjb3VudHJ5JykpIHtcbiAgICAgICAgYWRkcmVzcy5jb3VudHJ5ID0gY29tcG9uZW50LmxvbmdfbmFtZTtcbiAgICAgIH0gZWxzZSBpZiAoY29tcG9uZW50LnR5cGVzLmluY2x1ZGVzKCdwb3N0YWxfY29kZScpKSB7XG4gICAgICAgIGFkZHJlc3MucG9zdGFsQ29kZSA9IGNvbXBvbmVudC5sb25nX25hbWU7XG4gICAgICB9IGVsc2UgaWYgKGNvbXBvbmVudC50eXBlcy5pbmNsdWRlcygncG9pbnRfb2ZfaW50ZXJlc3QnKSkge1xuICAgICAgICBhZGRyZXNzLm5hbWUgPSBjb21wb25lbnQubG9uZ19uYW1lO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBhZGRyZXNzIGFzIEFkZHJlc3M7XG4gIH0pO1xufVxuXG4vLyBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9tYXBzL2RvY3VtZW50YXRpb24vZ2VvY29kaW5nL2ludHJvXG5mdW5jdGlvbiBhc3NlcnRHZW9jb2RlUmVzdWx0cyhyZXN1bHRPYmplY3Q6IGFueSk6IHZvaWQge1xuICBjb25zdCB7IHN0YXR1cywgZXJyb3JfbWVzc2FnZSB9ID0gcmVzdWx0T2JqZWN0O1xuICBpZiAoc3RhdHVzICE9PSAnWkVST19SRVNVTFRTJyAmJiBzdGF0dXMgIT09ICdPSycpIHtcbiAgICBpZiAoZXJyb3JfbWVzc2FnZSkge1xuICAgICAgdGhyb3cgbmV3IENvZGVkRXJyb3Ioc3RhdHVzLCBlcnJvcl9tZXNzYWdlKTtcbiAgICB9IGVsc2UgaWYgKHN0YXR1cyA9PT0gJ1VOS05PV05fRVJST1InKSB7XG4gICAgICB0aHJvdyBuZXcgQ29kZWRFcnJvcihcbiAgICAgICAgc3RhdHVzLFxuICAgICAgICAndGhlIHJlcXVlc3QgY291bGQgbm90IGJlIHByb2Nlc3NlZCBkdWUgdG8gYSBzZXJ2ZXIgZXJyb3IuIFRoZSByZXF1ZXN0IG1heSBzdWNjZWVkIGlmIHlvdSB0cnkgYWdhaW4uJ1xuICAgICAgKTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IENvZGVkRXJyb3Ioc3RhdHVzLCBgQW4gZXJyb3Igb2NjdXJyZWQgZHVyaW5nIGdlb2NvZGluZy5gKTtcbiAgfVxufVxuXG4vLyBQb2x5ZmlsbDogbmF2aWdhdG9yLmdlb2xvY2F0aW9uLndhdGNoUG9zaXRpb25cbmZ1bmN0aW9uIHdhdGNoUG9zaXRpb24oXG4gIHN1Y2Nlc3M6IEdlb1N1Y2Nlc3NDYWxsYmFjayxcbiAgZXJyb3I6IEdlb0Vycm9yQ2FsbGJhY2ssXG4gIG9wdGlvbnM6IExvY2F0aW9uT3B0aW9uc1xuKSB7XG4gIF9tYXliZUluaXRpYWxpemVFbWl0dGVyU3Vic2NyaXB0aW9uKCk7XG5cbiAgY29uc3Qgd2F0Y2hJZCA9IF9nZXROZXh0V2F0Y2hJZCgpO1xuICB3YXRjaENhbGxiYWNrc1t3YXRjaElkXSA9IHN1Y2Nlc3M7XG5cbiAgRXhwb0xvY2F0aW9uLndhdGNoUG9zaXRpb25JbXBsQXN5bmMod2F0Y2hJZCwgb3B0aW9ucykuY2F0Y2goZXJyID0+IHtcbiAgICBfcmVtb3ZlV2F0Y2hlcih3YXRjaElkKTtcbiAgICBlcnJvcih7IHdhdGNoSWQsIG1lc3NhZ2U6IGVyci5tZXNzYWdlLCBjb2RlOiBlcnIuY29kZSB9KTtcbiAgfSk7XG5cbiAgcmV0dXJuIHdhdGNoSWQ7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB3YXRjaFBvc2l0aW9uQXN5bmMob3B0aW9uczogTG9jYXRpb25PcHRpb25zLCBjYWxsYmFjazogTG9jYXRpb25DYWxsYmFjaykge1xuICBfbWF5YmVJbml0aWFsaXplRW1pdHRlclN1YnNjcmlwdGlvbigpO1xuXG4gIGNvbnN0IHdhdGNoSWQgPSBfZ2V0TmV4dFdhdGNoSWQoKTtcbiAgd2F0Y2hDYWxsYmFja3Nbd2F0Y2hJZF0gPSBjYWxsYmFjaztcbiAgYXdhaXQgRXhwb0xvY2F0aW9uLndhdGNoUG9zaXRpb25JbXBsQXN5bmMod2F0Y2hJZCwgb3B0aW9ucyk7XG5cbiAgcmV0dXJuIHtcbiAgICByZW1vdmUoKSB7XG4gICAgICBfcmVtb3ZlV2F0Y2hlcih3YXRjaElkKTtcbiAgICB9LFxuICB9O1xufVxuXG4vLyBQb2x5ZmlsbDogbmF2aWdhdG9yLmdlb2xvY2F0aW9uLmNsZWFyV2F0Y2hcbmZ1bmN0aW9uIGNsZWFyV2F0Y2god2F0Y2hJZDogbnVtYmVyKSB7XG4gIF9yZW1vdmVXYXRjaGVyKHdhdGNoSWQpO1xufVxuXG5mdW5jdGlvbiBfcmVtb3ZlV2F0Y2hlcih3YXRjaElkKSB7XG4gIC8vIERvIG5vdGhpbmcgaWYgd2UgaGF2ZSBhbHJlYWR5IHJlbW92ZWQgdGhlIHN1YnNjcmlwdGlvblxuICBpZiAoIXdhdGNoQ2FsbGJhY2tzW3dhdGNoSWRdKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgRXhwb0xvY2F0aW9uLnJlbW92ZVdhdGNoQXN5bmMod2F0Y2hJZCk7XG4gIGRlbGV0ZSB3YXRjaENhbGxiYWNrc1t3YXRjaElkXTtcbiAgaWYgKE9iamVjdC5rZXlzKHdhdGNoQ2FsbGJhY2tzKS5sZW5ndGggPT09IDAgJiYgZGV2aWNlRXZlbnRTdWJzY3JpcHRpb24pIHtcbiAgICBMb2NhdGlvbkV2ZW50RW1pdHRlci5yZW1vdmVTdWJzY3JpcHRpb24oZGV2aWNlRXZlbnRTdWJzY3JpcHRpb24pO1xuICAgIGRldmljZUV2ZW50U3Vic2NyaXB0aW9uID0gbnVsbDtcbiAgfVxufVxuXG50eXBlIEdlb1N1Y2Nlc3NDYWxsYmFjayA9IChkYXRhOiBMb2NhdGlvbkRhdGEpID0+IHZvaWQ7XG50eXBlIEdlb0Vycm9yQ2FsbGJhY2sgPSAoZXJyb3I6IGFueSkgPT4gdm9pZDtcblxuZnVuY3Rpb24gZ2V0Q3VycmVudFBvc2l0aW9uKFxuICBzdWNjZXNzOiBHZW9TdWNjZXNzQ2FsbGJhY2ssXG4gIGVycm9yOiBHZW9FcnJvckNhbGxiYWNrID0gKCkgPT4ge30sXG4gIG9wdGlvbnM6IExvY2F0aW9uT3B0aW9ucyA9IHt9XG4pOiB2b2lkIHtcbiAgaW52YXJpYW50KHR5cGVvZiBzdWNjZXNzID09PSAnZnVuY3Rpb24nLCAnTXVzdCBwcm92aWRlIGEgdmFsaWQgc3VjY2VzcyBjYWxsYmFjay4nKTtcblxuICBpbnZhcmlhbnQodHlwZW9mIG9wdGlvbnMgPT09ICdvYmplY3QnLCAnb3B0aW9ucyBtdXN0IGJlIGFuIG9iamVjdC4nKTtcblxuICBfZ2V0Q3VycmVudFBvc2l0aW9uQXN5bmNXcmFwcGVyKHN1Y2Nlc3MsIGVycm9yLCBvcHRpb25zKTtcbn1cblxuLy8gVGhpcyBmdW5jdGlvbiBleGlzdHMgdG8gbGV0IHVzIGNvbnRpbnVlIHRvIHJldHVybiB1bmRlZmluZWQgZnJvbSBnZXRDdXJyZW50UG9zaXRpb24sIHdoaWxlIHN0aWxsXG4vLyB1c2luZyBhc3luYy9hd2FpdCBmb3IgdGhlIGludGVybmFsIGltcGxlbWVudGF0aW9uIG9mIGl0XG5hc3luYyBmdW5jdGlvbiBfZ2V0Q3VycmVudFBvc2l0aW9uQXN5bmNXcmFwcGVyKFxuICBzdWNjZXNzOiBHZW9TdWNjZXNzQ2FsbGJhY2ssXG4gIGVycm9yOiBHZW9FcnJvckNhbGxiYWNrLFxuICBvcHRpb25zOiBMb2NhdGlvbk9wdGlvbnNcbik6IFByb21pc2U8YW55PiB7XG4gIHRyeSB7XG4gICAgYXdhaXQgRXhwb0xvY2F0aW9uLnJlcXVlc3RQZXJtaXNzaW9uc0FzeW5jKCk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0Q3VycmVudFBvc2l0aW9uQXN5bmMob3B0aW9ucyk7XG4gICAgc3VjY2VzcyhyZXN1bHQpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgZXJyb3IoZSk7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBlcm1pc3Npb25zQXN5bmMoKTogUHJvbWlzZTxQZXJtaXNzaW9uUmVzcG9uc2U+IHtcbiAgcmV0dXJuIGF3YWl0IEV4cG9Mb2NhdGlvbi5nZXRQZXJtaXNzaW9uc0FzeW5jKCk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXF1ZXN0UGVybWlzc2lvbnNBc3luYygpOiBQcm9taXNlPFBlcm1pc3Npb25SZXNwb25zZT4ge1xuICByZXR1cm4gYXdhaXQgRXhwb0xvY2F0aW9uLnJlcXVlc3RQZXJtaXNzaW9uc0FzeW5jKCk7XG59XG5cbi8vIC0tLSBMb2NhdGlvbiBzZXJ2aWNlXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYXNTZXJ2aWNlc0VuYWJsZWRBc3luYygpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgcmV0dXJuIGF3YWl0IEV4cG9Mb2NhdGlvbi5oYXNTZXJ2aWNlc0VuYWJsZWRBc3luYygpO1xufVxuXG4vLyAtLS0gQmFja2dyb3VuZCBsb2NhdGlvbiB1cGRhdGVzXG5cbmZ1bmN0aW9uIF92YWxpZGF0ZVRhc2tOYW1lKHRhc2tOYW1lOiBzdHJpbmcpIHtcbiAgaW52YXJpYW50KHRhc2tOYW1lICYmIHR5cGVvZiB0YXNrTmFtZSA9PT0gJ3N0cmluZycsICdgdGFza05hbWVgIG11c3QgYmUgYSBub24tZW1wdHkgc3RyaW5nLicpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaXNCYWNrZ3JvdW5kTG9jYXRpb25BdmFpbGFibGVBc3luYygpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgY29uc3QgcHJvdmlkZXJTdGF0dXMgPSBhd2FpdCBnZXRQcm92aWRlclN0YXR1c0FzeW5jKCk7XG4gIHJldHVybiBwcm92aWRlclN0YXR1cy5iYWNrZ3JvdW5kTW9kZUVuYWJsZWQ7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzdGFydExvY2F0aW9uVXBkYXRlc0FzeW5jKFxuICB0YXNrTmFtZTogc3RyaW5nLFxuICBvcHRpb25zOiBMb2NhdGlvblRhc2tPcHRpb25zID0geyBhY2N1cmFjeTogTG9jYXRpb25BY2N1cmFjeS5CYWxhbmNlZCB9XG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgX3ZhbGlkYXRlVGFza05hbWUodGFza05hbWUpO1xuICBhd2FpdCBFeHBvTG9jYXRpb24uc3RhcnRMb2NhdGlvblVwZGF0ZXNBc3luYyh0YXNrTmFtZSwgb3B0aW9ucyk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzdG9wTG9jYXRpb25VcGRhdGVzQXN5bmModGFza05hbWU6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICBfdmFsaWRhdGVUYXNrTmFtZSh0YXNrTmFtZSk7XG4gIGF3YWl0IEV4cG9Mb2NhdGlvbi5zdG9wTG9jYXRpb25VcGRhdGVzQXN5bmModGFza05hbWUpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFzU3RhcnRlZExvY2F0aW9uVXBkYXRlc0FzeW5jKHRhc2tOYW1lOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgX3ZhbGlkYXRlVGFza05hbWUodGFza05hbWUpO1xuICByZXR1cm4gRXhwb0xvY2F0aW9uLmhhc1N0YXJ0ZWRMb2NhdGlvblVwZGF0ZXNBc3luYyh0YXNrTmFtZSk7XG59XG5cbi8vIC0tLSBHZW9mZW5jaW5nXG5cbmZ1bmN0aW9uIF92YWxpZGF0ZVJlZ2lvbnMocmVnaW9uczogQXJyYXk8UmVnaW9uPikge1xuICBpZiAoIXJlZ2lvbnMgfHwgcmVnaW9ucy5sZW5ndGggPT09IDApIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAnUmVnaW9ucyBhcnJheSBjYW5ub3QgYmUgZW1wdHkuIFVzZSBgc3RvcEdlb2ZlbmNpbmdBc3luY2AgaWYgeW91IHdhbnQgdG8gc3RvcCBnZW9mZW5jaW5nIGFsbCByZWdpb25zJ1xuICAgICk7XG4gIH1cbiAgZm9yIChjb25zdCByZWdpb24gb2YgcmVnaW9ucykge1xuICAgIGlmICh0eXBlb2YgcmVnaW9uLmxhdGl0dWRlICE9PSAnbnVtYmVyJykge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgUmVnaW9uJ3MgbGF0aXR1ZGUgbXVzdCBiZSBhIG51bWJlci4gR290ICcke3JlZ2lvbi5sYXRpdHVkZX0nIGluc3RlYWQuYCk7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgcmVnaW9uLmxvbmdpdHVkZSAhPT0gJ251bWJlcicpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgIGBSZWdpb24ncyBsb25naXR1ZGUgbXVzdCBiZSBhIG51bWJlci4gR290ICcke3JlZ2lvbi5sb25naXR1ZGV9JyBpbnN0ZWFkLmBcbiAgICAgICk7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgcmVnaW9uLnJhZGl1cyAhPT0gJ251bWJlcicpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYFJlZ2lvbidzIHJhZGl1cyBtdXN0IGJlIGEgbnVtYmVyLiBHb3QgJyR7cmVnaW9uLnJhZGl1c30nIGluc3RlYWQuYCk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzdGFydEdlb2ZlbmNpbmdBc3luYyhcbiAgdGFza05hbWU6IHN0cmluZyxcbiAgcmVnaW9uczogQXJyYXk8UmVnaW9uPiA9IFtdXG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgX3ZhbGlkYXRlVGFza05hbWUodGFza05hbWUpO1xuICBfdmFsaWRhdGVSZWdpb25zKHJlZ2lvbnMpO1xuICBhd2FpdCBFeHBvTG9jYXRpb24uc3RhcnRHZW9mZW5jaW5nQXN5bmModGFza05hbWUsIHsgcmVnaW9ucyB9KTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHN0b3BHZW9mZW5jaW5nQXN5bmModGFza05hbWU6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICBfdmFsaWRhdGVUYXNrTmFtZSh0YXNrTmFtZSk7XG4gIGF3YWl0IEV4cG9Mb2NhdGlvbi5zdG9wR2VvZmVuY2luZ0FzeW5jKHRhc2tOYW1lKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhc1N0YXJ0ZWRHZW9mZW5jaW5nQXN5bmModGFza05hbWU6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICBfdmFsaWRhdGVUYXNrTmFtZSh0YXNrTmFtZSk7XG4gIHJldHVybiBFeHBvTG9jYXRpb24uaGFzU3RhcnRlZEdlb2ZlbmNpbmdBc3luYyh0YXNrTmFtZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbnN0YWxsV2ViR2VvbG9jYXRpb25Qb2x5ZmlsbCgpOiB2b2lkIHtcbiAgaWYgKFBsYXRmb3JtLk9TICE9PSAnd2ViJykge1xuICAgIC8vIFBvbHlmaWxsIG5hdmlnYXRvci5nZW9sb2NhdGlvbiBmb3IgaW50ZXJvcCB3aXRoIHRoZSBjb3JlIHJlYWN0LW5hdGl2ZSBhbmQgd2ViIEFQSSBhcHByb2FjaCB0b1xuICAgIC8vIGdlb2xvY2F0aW9uXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHdpbmRvdy5uYXZpZ2F0b3IuZ2VvbG9jYXRpb24gPSB7XG4gICAgICBnZXRDdXJyZW50UG9zaXRpb24sXG4gICAgICB3YXRjaFBvc2l0aW9uLFxuICAgICAgY2xlYXJXYXRjaCxcblxuICAgICAgLy8gV2UgZG9uJ3QgcG9seWZpbGwgc3RvcE9ic2VydmluZywgdGhpcyBpcyBhbiBpbnRlcm5hbCBtZXRob2QgdGhhdCBwcm9iYWJseSBzaG91bGQgbm90IGV2ZW4gZXhpc3RcbiAgICAgIC8vIGluIHJlYWN0LW5hdGl2ZSBkb2NzXG4gICAgICBzdG9wT2JzZXJ2aW5nOiAoKSA9PiB7fSxcbiAgICB9O1xuICB9XG59XG5cbmV4cG9ydCB7XG4gIC8vIEZvciBpbnRlcm5hbCBwdXJwb3Nlc1xuICBMb2NhdGlvbkV2ZW50RW1pdHRlciBhcyBFdmVudEVtaXR0ZXIsXG4gIF9nZXRDdXJyZW50V2F0Y2hJZCxcbn07XG4iXSwic291cmNlUm9vdCI6IiJ9