6b1f8e2c2bdbbec919dccc5f45a22875
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _RemoteLogging = _interopRequireDefault(require("./RemoteLogging"));

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function createRemoteConsole(originalConsole) {
  var groupDepth = 0;
  var enhancedConsole = Object.create(originalConsole);

  _defineConsoleLogMethod('debug', 'info');

  _defineConsoleLogMethod('log', 'info');

  _defineConsoleLogMethod('info', 'info');

  _defineConsoleLogMethod('warn', 'warn');

  _defineConsoleLogMethod('error', 'error');

  enhancedConsole.assert = function assert(condition) {
    for (var _len = arguments.length, data = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
      data[_key - 1] = arguments[_key];
    }

    if (originalConsole.assert) {
      originalConsole.assert.apply(originalConsole, [!!condition].concat(data));
    }

    if (condition) {
      return;
    }

    var assertionMessage = 'Assertion failed';

    if (!data.length) {
      data.push(assertionMessage);
    } else {
      if (typeof data[0] !== 'string') {
        data.unshift(assertionMessage);
      } else {
        data[0] = assertionMessage + ": " + data[0];
      }
    }

    _enqueueRemoteLog('error', {}, data);
  };

  enhancedConsole.group = function group() {
    for (var _len2 = arguments.length, data = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
      data[_key2] = arguments[_key2];
    }

    if (originalConsole.group) {
      originalConsole.group.apply(originalConsole, data);
    }

    _enqueueRemoteLog('info', {}, data);

    groupDepth++;
  };

  enhancedConsole.groupCollapsed = function groupCollapsed() {
    for (var _len3 = arguments.length, data = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
      data[_key3] = arguments[_key3];
    }

    if (originalConsole.groupCollapsed) {
      originalConsole.groupCollapsed.apply(originalConsole, data);
    }

    _enqueueRemoteLog('info', {
      groupCollapsed: true
    }, data);

    groupDepth++;
  };

  enhancedConsole.groupEnd = function groupEnd() {
    if (originalConsole.groupEnd) {
      originalConsole.groupEnd();
    }

    if (groupDepth > 0) {
      groupDepth--;
    }

    _enqueueRemoteLog('info', {
      shouldHide: true
    }, []);
  };

  function _defineConsoleLogMethod(name, level) {
    enhancedConsole[name] = function __expoConsoleLog() {
      var originalMethod = originalConsole[name];

      for (var _len4 = arguments.length, data = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
        data[_key4] = arguments[_key4];
      }

      if (typeof originalMethod === 'function') {
        originalMethod.apply(originalConsole, data);
      }

      _enqueueRemoteLog(level, {}, data);
    };
  }

  function _enqueueRemoteLog(level, additionalFields, data) {
    _RemoteLogging.default.enqueueRemoteLogAsync(level, _objectSpread({
      groupDepth: groupDepth
    }, additionalFields), data).catch(function (error) {
      originalConsole.error("There was a problem sending log messages to your development environment", error);
    });
  }

  return enhancedConsole;
}

var _default = {
  createRemoteConsole: createRemoteConsole
};
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9sb2dzL1JlbW90ZUNvbnNvbGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7Ozs7OztBQU1BLFNBQVMsbUJBQVQsQ0FBNkIsZUFBN0IsRUFBcUQ7QUFDbkQsTUFBSSxVQUFVLEdBQUcsQ0FBakI7QUFFQSxNQUFNLGVBQWUsR0FBMkIsTUFBTSxDQUFDLE1BQVAsQ0FBYyxlQUFkLENBQWhEOztBQUtBLEVBQUEsdUJBQXVCLENBQUMsT0FBRCxFQUFVLE1BQVYsQ0FBdkI7O0FBR0EsRUFBQSx1QkFBdUIsQ0FBQyxLQUFELEVBQVEsTUFBUixDQUF2Qjs7QUFHQSxFQUFBLHVCQUF1QixDQUFDLE1BQUQsRUFBUyxNQUFULENBQXZCOztBQUdBLEVBQUEsdUJBQXVCLENBQUMsTUFBRCxFQUFTLE1BQVQsQ0FBdkI7O0FBR0EsRUFBQSx1QkFBdUIsQ0FBQyxPQUFELEVBQVUsT0FBVixDQUF2Qjs7QUFHQSxFQUFBLGVBQWUsQ0FBQyxNQUFoQixHQUF5QixTQUFTLE1BQVQsQ0FBZ0IsU0FBaEIsRUFBc0Q7QUFBQSxzQ0FBZixJQUFlO0FBQWYsTUFBQSxJQUFlO0FBQUE7O0FBQzdFLFFBQUksZUFBZSxDQUFDLE1BQXBCLEVBQTRCO0FBRTFCLE1BQUEsZUFBZSxDQUFDLE1BQWhCLE9BQUEsZUFBZSxHQUFRLENBQUMsQ0FBQyxTQUFWLFNBQXdCLElBQXhCLEVBQWY7QUFDRDs7QUFFRCxRQUFJLFNBQUosRUFBZTtBQUNiO0FBQ0Q7O0FBRUQsUUFBTSxnQkFBZ0IsR0FBRyxrQkFBekI7O0FBQ0EsUUFBSSxDQUFDLElBQUksQ0FBQyxNQUFWLEVBQWtCO0FBQ2hCLE1BQUEsSUFBSSxDQUFDLElBQUwsQ0FBVSxnQkFBVjtBQUNELEtBRkQsTUFFTztBQUNMLFVBQUksT0FBTyxJQUFJLENBQUMsQ0FBRCxDQUFYLEtBQW1CLFFBQXZCLEVBQWlDO0FBQy9CLFFBQUEsSUFBSSxDQUFDLE9BQUwsQ0FBYSxnQkFBYjtBQUNELE9BRkQsTUFFTztBQUNMLFFBQUEsSUFBSSxDQUFDLENBQUQsQ0FBSixHQUFhLGdCQUFiLFVBQWtDLElBQUksQ0FBQyxDQUFELENBQXRDO0FBQ0Q7QUFDRjs7QUFFRCxJQUFBLGlCQUFpQixDQUFDLE9BQUQsRUFBVSxFQUFWLEVBQWMsSUFBZCxDQUFqQjtBQUNELEdBdEJEOztBQXlCQSxFQUFBLGVBQWUsQ0FBQyxLQUFoQixHQUF3QixTQUFTLEtBQVQsR0FBaUM7QUFBQSx1Q0FBZixJQUFlO0FBQWYsTUFBQSxJQUFlO0FBQUE7O0FBQ3ZELFFBQUksZUFBZSxDQUFDLEtBQXBCLEVBQTJCO0FBRXpCLE1BQUEsZUFBZSxDQUFDLEtBQWhCLE9BQUEsZUFBZSxFQUFVLElBQVYsQ0FBZjtBQUNEOztBQUVELElBQUEsaUJBQWlCLENBQUMsTUFBRCxFQUFTLEVBQVQsRUFBYSxJQUFiLENBQWpCOztBQUNBLElBQUEsVUFBVTtBQUNYLEdBUkQ7O0FBV0EsRUFBQSxlQUFlLENBQUMsY0FBaEIsR0FBaUMsU0FBUyxjQUFULEdBQTBDO0FBQUEsdUNBQWYsSUFBZTtBQUFmLE1BQUEsSUFBZTtBQUFBOztBQUN6RSxRQUFJLGVBQWUsQ0FBQyxjQUFwQixFQUFvQztBQUVsQyxNQUFBLGVBQWUsQ0FBQyxjQUFoQixPQUFBLGVBQWUsRUFBbUIsSUFBbkIsQ0FBZjtBQUNEOztBQUVELElBQUEsaUJBQWlCLENBQUMsTUFBRCxFQUFTO0FBQUUsTUFBQSxjQUFjLEVBQUU7QUFBbEIsS0FBVCxFQUFtQyxJQUFuQyxDQUFqQjs7QUFDQSxJQUFBLFVBQVU7QUFDWCxHQVJEOztBQVdBLEVBQUEsZUFBZSxDQUFDLFFBQWhCLEdBQTJCLFNBQVMsUUFBVCxHQUFpQjtBQUMxQyxRQUFJLGVBQWUsQ0FBQyxRQUFwQixFQUE4QjtBQUM1QixNQUFBLGVBQWUsQ0FBQyxRQUFoQjtBQUNEOztBQUVELFFBQUksVUFBVSxHQUFHLENBQWpCLEVBQW9CO0FBQ2xCLE1BQUEsVUFBVTtBQUNYOztBQUVELElBQUEsaUJBQWlCLENBQUMsTUFBRCxFQUFTO0FBQUUsTUFBQSxVQUFVLEVBQUU7QUFBZCxLQUFULEVBQStCLEVBQS9CLENBQWpCO0FBQ0QsR0FWRDs7QUFnQkEsV0FBUyx1QkFBVCxDQUFpQyxJQUFqQyxFQUE2RCxLQUE3RCxFQUE0RTtBQUMxRSxJQUFBLGVBQWUsQ0FBQyxJQUFELENBQWYsR0FBd0IsU0FBUyxnQkFBVCxHQUE0QztBQUNsRSxVQUFJLGNBQWMsR0FBRyxlQUFlLENBQUMsSUFBRCxDQUFwQzs7QUFEa0UseUNBQWYsSUFBZTtBQUFmLFFBQUEsSUFBZTtBQUFBOztBQUVsRSxVQUFJLE9BQU8sY0FBUCxLQUEwQixVQUE5QixFQUEwQztBQUN4QyxRQUFBLGNBQWMsQ0FBQyxLQUFmLENBQXFCLGVBQXJCLEVBQXNDLElBQXRDO0FBQ0Q7O0FBRUQsTUFBQSxpQkFBaUIsQ0FBQyxLQUFELEVBQVEsRUFBUixFQUFZLElBQVosQ0FBakI7QUFDRCxLQVBEO0FBUUQ7O0FBUUQsV0FBUyxpQkFBVCxDQUNFLEtBREYsRUFFRSxnQkFGRixFQUdFLElBSEYsRUFHaUI7QUFFZiwyQkFBYyxxQkFBZCxDQUFvQyxLQUFwQztBQUE2QyxNQUFBLFVBQVUsRUFBVjtBQUE3QyxPQUE0RCxnQkFBNUQsR0FBZ0YsSUFBaEYsRUFBc0YsS0FBdEYsQ0FDRSxVQUFBLEtBQUssRUFBRztBQUNOLE1BQUEsZUFBZSxDQUFDLEtBQWhCLDZFQUVFLEtBRkY7QUFJRCxLQU5IO0FBUUQ7O0FBRUQsU0FBTyxlQUFQO0FBQ0Q7O2VBRWM7QUFDYixFQUFBLG1CQUFtQixFQUFuQjtBQURhLEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVtb3RlTG9nZ2luZywgeyBMb2dFbnRyeUZpZWxkcywgTG9nTGV2ZWwgfSBmcm9tICcuL1JlbW90ZUxvZ2dpbmcnO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBjb25zb2xlIG9iamVjdCB0aGF0IGRlbGVnYXRlcyBjYWxscyB0byB0aGUgc3BlY2lmaWVkIHVuZGVybHlpbmcgY29uc29sZSBhbmQgYWxzbyBzZW5kc1xuICogdGhlIG1lc3NhZ2VzIHRvIHRoZSBkZXZlbG9wbWVudCBlbnZpcm9ubWVudCBvdmVyIGEgcmVtb3RlIGNvbm5lY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVJlbW90ZUNvbnNvbGUob3JpZ2luYWxDb25zb2xlOiBDb25zb2xlKTogQ29uc29sZSB7XG4gIGxldCBncm91cERlcHRoID0gMDtcblxuICBjb25zdCBlbmhhbmNlZENvbnNvbGU6IHR5cGVvZiBvcmlnaW5hbENvbnNvbGUgPSBPYmplY3QuY3JlYXRlKG9yaWdpbmFsQ29uc29sZSk7XG5cbiAgLy8gaHR0cHM6Ly9jb25zb2xlLnNwZWMud2hhdHdnLm9yZy8jZGVidWdcbiAgLy8gRG9uJ3QgdXNlIGEgbGV2ZWwgYmVsb3cgXCJpbmZvXCIgYmVjYXVzZSBcImRlYnVnXCIgaXMgaW50ZW5kZWQgZm9yIG1lc3NhZ2VzIHRoYXQgc2hvdWxkbid0IGJlIHNob3duXG4gIC8vIHRvIHRoZSBkZXZlbG9wZXJcbiAgX2RlZmluZUNvbnNvbGVMb2dNZXRob2QoJ2RlYnVnJywgJ2luZm8nKTtcblxuICAvLyBodHRwczovL2NvbnNvbGUuc3BlYy53aGF0d2cub3JnLyNsb2dcbiAgX2RlZmluZUNvbnNvbGVMb2dNZXRob2QoJ2xvZycsICdpbmZvJyk7XG5cbiAgLy8gaHR0cHM6Ly9jb25zb2xlLnNwZWMud2hhdHdnLm9yZy8jaW5mb1xuICBfZGVmaW5lQ29uc29sZUxvZ01ldGhvZCgnaW5mbycsICdpbmZvJyk7XG5cbiAgLy8gaHR0cHM6Ly9jb25zb2xlLnNwZWMud2hhdHdnLm9yZy8jd2FyblxuICBfZGVmaW5lQ29uc29sZUxvZ01ldGhvZCgnd2FybicsICd3YXJuJyk7XG5cbiAgLy8gaHR0cHM6Ly9jb25zb2xlLnNwZWMud2hhdHdnLm9yZy8jZXJyb3JcbiAgX2RlZmluZUNvbnNvbGVMb2dNZXRob2QoJ2Vycm9yJywgJ2Vycm9yJyk7XG5cbiAgLy8gaHR0cHM6Ly9jb25zb2xlLnNwZWMud2hhdHdnLm9yZy8jYXNzZXJ0XG4gIGVuaGFuY2VkQ29uc29sZS5hc3NlcnQgPSBmdW5jdGlvbiBhc3NlcnQoY29uZGl0aW9uOiB1bmtub3duLCAuLi5kYXRhOiB1bmtub3duW10pOiB2b2lkIHtcbiAgICBpZiAob3JpZ2luYWxDb25zb2xlLmFzc2VydCkge1xuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgb3JpZ2luYWxDb25zb2xlLmFzc2VydCghIWNvbmRpdGlvbiwgLi4uZGF0YSk7XG4gICAgfVxuXG4gICAgaWYgKGNvbmRpdGlvbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGFzc2VydGlvbk1lc3NhZ2UgPSAnQXNzZXJ0aW9uIGZhaWxlZCc7XG4gICAgaWYgKCFkYXRhLmxlbmd0aCkge1xuICAgICAgZGF0YS5wdXNoKGFzc2VydGlvbk1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodHlwZW9mIGRhdGFbMF0gIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGRhdGEudW5zaGlmdChhc3NlcnRpb25NZXNzYWdlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRhdGFbMF0gPSBgJHthc3NlcnRpb25NZXNzYWdlfTogJHtkYXRhWzBdfWA7XG4gICAgICB9XG4gICAgfVxuXG4gICAgX2VucXVldWVSZW1vdGVMb2coJ2Vycm9yJywge30sIGRhdGEpO1xuICB9O1xuXG4gIC8vIGh0dHBzOi8vY29uc29sZS5zcGVjLndoYXR3Zy5vcmcvI2dyb3VwXG4gIGVuaGFuY2VkQ29uc29sZS5ncm91cCA9IGZ1bmN0aW9uIGdyb3VwKC4uLmRhdGE6IHVua25vd25bXSk6IHZvaWQge1xuICAgIGlmIChvcmlnaW5hbENvbnNvbGUuZ3JvdXApIHtcbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIG9yaWdpbmFsQ29uc29sZS5ncm91cCguLi5kYXRhKTtcbiAgICB9XG5cbiAgICBfZW5xdWV1ZVJlbW90ZUxvZygnaW5mbycsIHt9LCBkYXRhKTtcbiAgICBncm91cERlcHRoKys7XG4gIH07XG5cbiAgLy8gaHR0cHM6Ly9jb25zb2xlLnNwZWMud2hhdHdnLm9yZy8jZ3JvdXBjb2xsYXBzZWRcbiAgZW5oYW5jZWRDb25zb2xlLmdyb3VwQ29sbGFwc2VkID0gZnVuY3Rpb24gZ3JvdXBDb2xsYXBzZWQoLi4uZGF0YTogdW5rbm93bltdKTogdm9pZCB7XG4gICAgaWYgKG9yaWdpbmFsQ29uc29sZS5ncm91cENvbGxhcHNlZCkge1xuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgb3JpZ2luYWxDb25zb2xlLmdyb3VwQ29sbGFwc2VkKC4uLmRhdGEpO1xuICAgIH1cblxuICAgIF9lbnF1ZXVlUmVtb3RlTG9nKCdpbmZvJywgeyBncm91cENvbGxhcHNlZDogdHJ1ZSB9LCBkYXRhKTtcbiAgICBncm91cERlcHRoKys7XG4gIH07XG5cbiAgLy8gaHR0cHM6Ly9jb25zb2xlLnNwZWMud2hhdHdnLm9yZy8jZ3JvdXBlbmRcbiAgZW5oYW5jZWRDb25zb2xlLmdyb3VwRW5kID0gZnVuY3Rpb24gZ3JvdXBFbmQoKTogdm9pZCB7XG4gICAgaWYgKG9yaWdpbmFsQ29uc29sZS5ncm91cEVuZCkge1xuICAgICAgb3JpZ2luYWxDb25zb2xlLmdyb3VwRW5kKCk7XG4gICAgfVxuXG4gICAgaWYgKGdyb3VwRGVwdGggPiAwKSB7XG4gICAgICBncm91cERlcHRoLS07XG4gICAgfVxuXG4gICAgX2VucXVldWVSZW1vdGVMb2coJ2luZm8nLCB7IHNob3VsZEhpZGU6IHRydWUgfSwgW10pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBEZWZpbmVzIGEgbWV0aG9kIGluIHRoZSBgY29uc29sZS5sb2coKWAgZmFtaWx5IG9uIHRoZSBlbmhhbmNlZCBjb25zb2xlXG4gICAqIGluc3RhbmNlXG4gICAqL1xuICBmdW5jdGlvbiBfZGVmaW5lQ29uc29sZUxvZ01ldGhvZChuYW1lOiBrZXlvZiB0eXBlb2YgY29uc29sZSwgbGV2ZWw6IExvZ0xldmVsKTogdm9pZCB7XG4gICAgZW5oYW5jZWRDb25zb2xlW25hbWVdID0gZnVuY3Rpb24gX19leHBvQ29uc29sZUxvZyguLi5kYXRhOiB1bmtub3duW10pOiB2b2lkIHtcbiAgICAgIGxldCBvcmlnaW5hbE1ldGhvZCA9IG9yaWdpbmFsQ29uc29sZVtuYW1lXTtcbiAgICAgIGlmICh0eXBlb2Ygb3JpZ2luYWxNZXRob2QgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgb3JpZ2luYWxNZXRob2QuYXBwbHkob3JpZ2luYWxDb25zb2xlLCBkYXRhKTtcbiAgICAgIH1cblxuICAgICAgX2VucXVldWVSZW1vdGVMb2cobGV2ZWwsIHt9LCBkYXRhKTtcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFNjaGVkdWxlcyB0aGUgZ2l2ZW4gbG9nIGVudHJ5IHRvIGJlIHNlbnQgcmVtb3RlbHkgaW4gYSBzYWZlIHdheSB0aGF0IGhhbmRsZXMgYWxsIGVycm9ycy4gVGhpc1xuICAgKiBmdW5jdGlvbiBpcyByZXNwb25zaWJsZSBmb3IgZXJyb3IgaGFuZGxpbmcgYmVjYXVzZSB0aGUgY29uc29sZSBtZXRob2RzIGFyZSBzeW5jaHJvbm91cyBidXRcbiAgICogc2VuZGluZyBsb2cgbWVzc2FnZXMgaXMgYXN5bmNocm9ub3VzLCBzbyB0aGlzIGNvZGUgKGluc3RlYWQgb2YgdGhlIGNvbnNvbGUgbWV0aG9kcykgbmVlZHMgdG8gYmVcbiAgICogcmVzcG9uc2libGUgZm9yIGFzeW5jaHJvbm91cyBlcnJvcnMuXG4gICAqL1xuICBmdW5jdGlvbiBfZW5xdWV1ZVJlbW90ZUxvZyhcbiAgICBsZXZlbDogTG9nTGV2ZWwsXG4gICAgYWRkaXRpb25hbEZpZWxkczogTG9nRW50cnlGaWVsZHMsXG4gICAgZGF0YTogdW5rbm93bltdXG4gICk6IHZvaWQge1xuICAgIFJlbW90ZUxvZ2dpbmcuZW5xdWV1ZVJlbW90ZUxvZ0FzeW5jKGxldmVsLCB7IGdyb3VwRGVwdGgsIC4uLmFkZGl0aW9uYWxGaWVsZHMgfSwgZGF0YSkuY2F0Y2goXG4gICAgICBlcnJvciA9PiB7XG4gICAgICAgIG9yaWdpbmFsQ29uc29sZS5lcnJvcihcbiAgICAgICAgICBgVGhlcmUgd2FzIGEgcHJvYmxlbSBzZW5kaW5nIGxvZyBtZXNzYWdlcyB0byB5b3VyIGRldmVsb3BtZW50IGVudmlyb25tZW50YCxcbiAgICAgICAgICBlcnJvclxuICAgICAgICApO1xuICAgICAgfVxuICAgICk7XG4gIH1cblxuICByZXR1cm4gZW5oYW5jZWRDb25zb2xlO1xufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIGNyZWF0ZVJlbW90ZUNvbnNvbGUsXG59O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==