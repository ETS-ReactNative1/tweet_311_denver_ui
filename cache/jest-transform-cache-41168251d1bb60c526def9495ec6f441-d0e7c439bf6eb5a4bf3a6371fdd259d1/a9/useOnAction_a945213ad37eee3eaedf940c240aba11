98d83d6d445071c8eaf0162539c0f2b0
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = useOnAction;

var React = _interopRequireWildcard(require("react"));

var _NavigationBuilderContext = _interopRequireDefault(require("./NavigationBuilderContext"));

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}

function _getRequireWildcardCache() {
  if (typeof WeakMap !== "function") return null;
  var cache = new WeakMap();

  _getRequireWildcardCache = function _getRequireWildcardCache() {
    return cache;
  };

  return cache;
}

function _interopRequireWildcard(obj) {
  if (obj && obj.__esModule) {
    return obj;
  }

  if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
    return {
      default: obj
    };
  }

  var cache = _getRequireWildcardCache();

  if (cache && cache.has(obj)) {
    return cache.get(obj);
  }

  var newObj = {};
  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;

  for (var key in obj) {
    if (Object.prototype.hasOwnProperty.call(obj, key)) {
      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;

      if (desc && (desc.get || desc.set)) {
        Object.defineProperty(newObj, key, desc);
      } else {
        newObj[key] = obj[key];
      }
    }
  }

  newObj.default = obj;

  if (cache) {
    cache.set(obj, newObj);
  }

  return newObj;
}

function useOnAction(_ref) {
  var router = _ref.router,
      getState = _ref.getState,
      setState = _ref.setState,
      key = _ref.key,
      listeners = _ref.listeners,
      routerConfigOptions = _ref.routerConfigOptions;

  var _React$useContext = React.useContext(_NavigationBuilderContext.default),
      onActionParent = _React$useContext.onAction,
      onRouteFocusParent = _React$useContext.onRouteFocus,
      addActionListenerParent = _React$useContext.addActionListener,
      trackAction = _React$useContext.trackAction;

  var routerConfigOptionsRef = React.useRef(routerConfigOptions);
  React.useEffect(function () {
    routerConfigOptionsRef.current = routerConfigOptions;
  });
  var onAction = React.useCallback(function (action) {
    var visitedNavigators = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Set();
    var state = getState();

    if (visitedNavigators.has(state.key)) {
      return false;
    }

    visitedNavigators.add(state.key);

    if (typeof action.target === 'string' && action.target !== state.key) {
      return false;
    }

    var result = router.getStateForAction(state, action, routerConfigOptionsRef.current);
    result = result === null && action.target === state.key ? state : result;

    if (result !== null) {
      trackAction(action);

      if (state !== result) {
        setState(result);
      }

      if (onRouteFocusParent !== undefined) {
        var shouldFocus = router.shouldActionChangeFocus(action);

        if (shouldFocus && key !== undefined) {
          onRouteFocusParent(key);
        }
      }

      return true;
    }

    if (onActionParent !== undefined) {
      if (onActionParent(action, visitedNavigators)) {
        return true;
      }
    }

    for (var i = listeners.length - 1; i >= 0; i--) {
      var listener = listeners[i];

      if (listener(action, visitedNavigators)) {
        return true;
      }
    }

    return false;
  }, [getState, router, onActionParent, trackAction, onRouteFocusParent, setState, key, listeners]);
  React.useEffect(function () {
    return addActionListenerParent === null || addActionListenerParent === void 0 ? void 0 : addActionListenerParent(onAction);
  }, [addActionListenerParent, onAction]);
  return onAction;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZU9uQWN0aW9uLnRzeCJdLCJuYW1lcyI6WyJyb3V0ZXJDb25maWdPcHRpb25zIiwib25BY3Rpb24iLCJvblJvdXRlRm9jdXMiLCJhZGRBY3Rpb25MaXN0ZW5lciIsInRyYWNrQWN0aW9uIiwiUmVhY3QiLCJOYXZpZ2F0aW9uQnVpbGRlckNvbnRleHQiLCJyb3V0ZXJDb25maWdPcHRpb25zUmVmIiwidmlzaXRlZE5hdmlnYXRvcnMiLCJzdGF0ZSIsImdldFN0YXRlIiwiYWN0aW9uIiwicmVzdWx0Iiwicm91dGVyIiwic2V0U3RhdGUiLCJvblJvdXRlRm9jdXNQYXJlbnQiLCJzaG91bGRGb2N1cyIsImtleSIsIm9uQWN0aW9uUGFyZW50IiwiaSIsImxpc3RlbmVycyIsImxpc3RlbmVyIiwiYWRkQWN0aW9uTGlzdGVuZXJQYXJlbnQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxJQUFBLEtBQUEsR0FBQSx1QkFBQSxDQUFBLE9BQUEsQ0FBQSxPQUFBLENBQUEsQ0FBQTs7QUFRQSxJQUFBLHlCQUFBLEdBQUEsc0JBQUEsQ0FBQSxPQUFBLDhCQUFBLENBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXNCZSxTQUFBLFdBQUEsQ0FBQSxJQUFBLEVBT0g7QUFBQSxNQVB3QixNQU94QixHQUFBLElBQUEsQ0FQd0IsTUFPeEI7QUFBQSxNQVB3QixRQU94QixHQUFBLElBQUEsQ0FQd0IsUUFPeEI7QUFBQSxNQVB3QixRQU94QixHQUFBLElBQUEsQ0FQd0IsUUFPeEI7QUFBQSxNQVB3QixHQU94QixHQUFBLElBQUEsQ0FQd0IsR0FPeEI7QUFBQSxNQVB3QixTQU94QixHQUFBLElBQUEsQ0FQd0IsU0FPeEI7QUFBQSxNQURWQSxtQkFDVSxHQUFBLElBQUEsQ0FEVkEsbUJBQ1U7O0FBQUEsMEJBTU5LLEtBQUssQ0FBTEEsVUFBQUEsQ0FBaUJDLHlCQUFBQSxDQUxyQixPQUtJRCxDQU5NO0FBQUEsTUFD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LENBQWdCO0FBQUEsV0FBTWlCLHVCQUFOLEtBQUEsSUFBTUEsSUFBQUEsdUJBQU4sS0FBQSxLQUFBLENBQU1BLEdBQU4sS0FBQSxDQUFNQSxHQUFBQSx1QkFBdUIsQ0FBN0NqQixRQUE2QyxDQUE3QjtBQUFBLEdBQWhCQSxFQUEyRCxDQUFBLHVCQUFBLEVBQTNEQSxRQUEyRCxDQUEzREE7QUFLQSxTQUFBLFFBQUE7QUFDRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7XG4gIE5hdmlnYXRpb25BY3Rpb24sXG4gIE5hdmlnYXRpb25TdGF0ZSxcbiAgUGFydGlhbFN0YXRlLFxuICBSb3V0ZXIsXG4gIFJvdXRlckNvbmZpZ09wdGlvbnMsXG59IGZyb20gJ0ByZWFjdC1uYXZpZ2F0aW9uL3JvdXRlcnMnO1xuaW1wb3J0IE5hdmlnYXRpb25CdWlsZGVyQ29udGV4dCwge1xuICBDaGlsZEFjdGlvbkxpc3RlbmVyLFxufSBmcm9tICcuL05hdmlnYXRpb25CdWlsZGVyQ29udGV4dCc7XG5cbnR5cGUgT3B0aW9ucyA9IHtcbiAgcm91dGVyOiBSb3V0ZXI8TmF2aWdhdGlvblN0YXRlLCBOYXZpZ2F0aW9uQWN0aW9uPjtcbiAga2V5Pzogc3RyaW5nO1xuICBnZXRTdGF0ZTogKCkgPT4gTmF2aWdhdGlvblN0YXRlO1xuICBzZXRTdGF0ZTogKHN0YXRlOiBOYXZpZ2F0aW9uU3RhdGUgfCBQYXJ0aWFsU3RhdGU8TmF2aWdhdGlvblN0YXRlPikgPT4gdm9pZDtcbiAgbGlzdGVuZXJzOiBDaGlsZEFjdGlvbkxpc3RlbmVyW107XG4gIHJvdXRlckNvbmZpZ09wdGlvbnM6IFJvdXRlckNvbmZpZ09wdGlvbnM7XG59O1xuXG4vKipcbiAqIEhvb2sgdG8gaGFuZGxlIGFjdGlvbnMgZm9yIGEgbmF2aWdhdG9yLCBpbmNsdWRpbmcgc3RhdGUgdXBkYXRlcyBhbmQgYnViYmxpbmcuXG4gKlxuICogQnViYmxpbmcgYW4gYWN0aW9uIGlzIGFjaGlldmVkIGluIDIgd2F5czpcbiAqIDEuIFRvIGJ1YmJsZSBhY3Rpb24gdG8gcGFyZW50LCB3ZSBleHBvc2UgdGhlIGFjdGlvbiBoYW5kbGVyIGluIGNvbnRleHQgYW5kIHRoZW4gYWNjZXNzIHRoZSBwYXJlbnQgY29udGV4dFxuICogMi4gVG8gYnViYmxlIGFjdGlvbiB0byBjaGlsZCwgY2hpbGQgYWRkcyBldmVudCBsaXN0ZW5lcnMgc3Vic2NyaWJpbmcgdG8gYWN0aW9ucyBmcm9tIHBhcmVudFxuICpcbiAqIFdoZW4gdGhlIGFjdGlvbiBoYW5kbGVyIGhhbmRsZXMgYXMgYWN0aW9uLCBpdCByZXR1cm5zIGB0cnVlYCwgb3RoZXJ3aXNlIGBmYWxzZWAuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVzZU9uQWN0aW9uKHtcbiAgcm91dGVyLFxuICBnZXRTdGF0ZSxcbiAgc2V0U3RhdGUsXG4gIGtleSxcbiAgbGlzdGVuZXJzLFxuICByb3V0ZXJDb25maWdPcHRpb25zLFxufTogT3B0aW9ucykge1xuICBjb25zdCB7XG4gICAgb25BY3Rpb246IG9uQWN0aW9uUGFyZW50LFxuICAgIG9uUm91dGVGb2N1czogb25Sb3V0ZUZvY3VzUGFyZW50LFxuICAgIGFkZEFjdGlvbkxpc3RlbmVyOiBhZGRBY3Rpb25MaXN0ZW5lclBhcmVudCxcbiAgICB0cmFja0FjdGlvbixcbiAgfSA9IFJlYWN0LnVzZUNvbnRleHQoTmF2aWdhdGlvbkJ1aWxkZXJDb250ZXh0KTtcblxuICBjb25zdCByb3V0ZXJDb25maWdPcHRpb25zUmVmID0gUmVhY3QudXNlUmVmPFJvdXRlckNvbmZpZ09wdGlvbnM+KFxuICAgIHJvdXRlckNvbmZpZ09wdGlvbnNcbiAgKTtcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHJvdXRlckNvbmZpZ09wdGlvbnNSZWYuY3VycmVudCA9IHJvdXRlckNvbmZpZ09wdGlvbnM7XG4gIH0pO1xuXG4gIGNvbnN0IG9uQWN0aW9uID0gUmVhY3QudXNlQ2FsbGJhY2soXG4gICAgKFxuICAgICAgYWN0aW9uOiBOYXZpZ2F0aW9uQWN0aW9uLFxuICAgICAgdmlzaXRlZE5hdmlnYXRvcnM6IFNldDxzdHJpbmc+ID0gbmV3IFNldDxzdHJpbmc+KClcbiAgICApID0+IHtcbiAgICAgIGNvbnN0IHN0YXRlID0gZ2V0U3RhdGUoKTtcblxuICAgICAgLy8gU2luY2UgYWN0aW9ucyBjYW4gYnViYmxlIGJvdGggdXAgYW5kIGRvd24sIHRoZXkgY291bGQgY29tZSB0byB0aGUgc2FtZSBuYXZpZ2F0b3IgYWdhaW5cbiAgICAgIC8vIFdlIGtlZXAgdHJhY2sgb2YgbmF2aWdhdG9ycyB3aGljaCBoYXZlIGFscmVhZHkgdHJpZWQgdG8gaGFuZGxlIHRoZSBhY3Rpb24gYW5kIHJldHVybiBpZiBpdCdzIGFscmVhZHkgdmlzaXRlZFxuICAgICAgaWYgKHZpc2l0ZWROYXZpZ2F0b3JzLmhhcyhzdGF0ZS5rZXkpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgdmlzaXRlZE5hdmlnYXRvcnMuYWRkKHN0YXRlLmtleSk7XG5cbiAgICAgIGlmICh0eXBlb2YgYWN0aW9uLnRhcmdldCA9PT0gJ3N0cmluZycgJiYgYWN0aW9uLnRhcmdldCAhPT0gc3RhdGUua2V5KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgbGV0IHJlc3VsdCA9IHJvdXRlci5nZXRTdGF0ZUZvckFjdGlvbihcbiAgICAgICAgc3RhdGUsXG4gICAgICAgIGFjdGlvbixcbiAgICAgICAgcm91dGVyQ29uZmlnT3B0aW9uc1JlZi5jdXJyZW50XG4gICAgICApO1xuXG4gICAgICAvLyBJZiBhIHRhcmdldCBpcyBzcGVjaWZpZWQgYW5kIHNldCB0byBjdXJyZW50IG5hdmlnYXRvciwgdGhlIGFjdGlvbiBzaG91bGRuJ3QgYnViYmxlXG4gICAgICAvLyBTbyBpbnN0ZWFkIG9mIGBudWxsYCwgd2UgdXNlIHRoZSBzdGF0ZSBvYmplY3QgZm9yIHN1Y2ggY2FzZXMgdG8gc2lnbmFsIHRoYXQgYWN0aW9uIHdhcyBoYW5kbGVkXG4gICAgICByZXN1bHQgPSByZXN1bHQgPT09IG51bGwgJiYgYWN0aW9uLnRhcmdldCA9PT0gc3RhdGUua2V5ID8gc3RhdGUgOiByZXN1bHQ7XG5cbiAgICAgIGlmIChyZXN1bHQgIT09IG51bGwpIHtcbiAgICAgICAgdHJhY2tBY3Rpb24oYWN0aW9uKTtcblxuICAgICAgICBpZiAoc3RhdGUgIT09IHJlc3VsdCkge1xuICAgICAgICAgIHNldFN0YXRlKHJlc3VsdCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob25Sb3V0ZUZvY3VzUGFyZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAvLyBTb21lIGFjdGlvbnMgc3VjaCBhcyBgTkFWSUdBVEVgIGFsc28gd2FudCB0byBicmluZyB0aGUgbmF2aWdhdGVkIHJvdXRlIHRvIGZvY3VzIGluIHRoZSB3aG9sZSB0cmVlXG4gICAgICAgICAgLy8gVGhpcyBtZWFucyB3ZSBuZWVkIHRvIGZvY3VzIGFsbCBvZiB0aGUgcGFyZW50IG5hdmlnYXRvcnMgb2YgdGhpcyBuYXZpZ2F0b3IgYXMgd2VsbFxuICAgICAgICAgIGNvbnN0IHNob3VsZEZvY3VzID0gcm91dGVyLnNob3VsZEFjdGlvbkNoYW5nZUZvY3VzKGFjdGlvbik7XG5cbiAgICAgICAgICBpZiAoc2hvdWxkRm9jdXMgJiYga2V5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG9uUm91dGVGb2N1c1BhcmVudChrZXkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAob25BY3Rpb25QYXJlbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBCdWJibGUgYWN0aW9uIHRvIHRoZSBwYXJlbnQgaWYgdGhlIGN1cnJlbnQgbmF2aWdhdG9yIGRpZG4ndCBoYW5kbGUgaXRcbiAgICAgICAgaWYgKG9uQWN0aW9uUGFyZW50KGFjdGlvbiwgdmlzaXRlZE5hdmlnYXRvcnMpKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gSWYgdGhlIGFjdGlvbiB3YXNuJ3QgaGFuZGxlZCBieSBjdXJyZW50IG5hdmlnYXRvciBvciBhIHBhcmVudCBuYXZpZ2F0b3IsIGxldCBjaGlsZHJlbiBoYW5kbGUgaXRcbiAgICAgIGZvciAobGV0IGkgPSBsaXN0ZW5lcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgY29uc3QgbGlzdGVuZXIgPSBsaXN0ZW5lcnNbaV07XG5cbiAgICAgICAgaWYgKGxpc3RlbmVyKGFjdGlvbiwgdmlzaXRlZE5hdmlnYXRvcnMpKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0sXG4gICAgW1xuICAgICAgZ2V0U3RhdGUsXG4gICAgICByb3V0ZXIsXG4gICAgICBvbkFjdGlvblBhcmVudCxcbiAgICAgIHRyYWNrQWN0aW9uLFxuICAgICAgb25Sb3V0ZUZvY3VzUGFyZW50LFxuICAgICAgc2V0U3RhdGUsXG4gICAgICBrZXksXG4gICAgICBsaXN0ZW5lcnMsXG4gICAgXVxuICApO1xuXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiBhZGRBY3Rpb25MaXN0ZW5lclBhcmVudD8uKG9uQWN0aW9uKSwgW1xuICAgIGFkZEFjdGlvbkxpc3RlbmVyUGFyZW50LFxuICAgIG9uQWN0aW9uLFxuICBdKTtcblxuICByZXR1cm4gb25BY3Rpb247XG59XG4iXX0=