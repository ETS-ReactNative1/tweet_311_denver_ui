e83df5fb57e2a660908c37cf5a1fe0c9
var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));

var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _propTypes = _interopRequireDefault(require("prop-types"));

var _react = _interopRequireDefault(require("react"));

var _reactNative = require("react-native");

var _decorateMapComponent = _interopRequireWildcard(require("./decorateMapComponent"));

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

var viewConfig = {
  uiViewClassName: 'AIR<provider>MapMarker',
  validAttributes: {
    coordinate: true
  }
};
var viewPropTypes = _reactNative.ViewPropTypes || _reactNative.View.propTypes;

var propTypes = _objectSpread({}, viewPropTypes, {
  identifier: _propTypes.default.string,
  reuseIdentifier: _propTypes.default.string,
  title: _propTypes.default.string,
  description: _propTypes.default.string,
  testID: _propTypes.default.string,
  image: _propTypes.default.any,
  icon: _propTypes.default.any,
  opacity: _propTypes.default.number,
  pinColor: _reactNative.ColorPropType,
  coordinate: _propTypes.default.shape({
    latitude: _propTypes.default.number.isRequired,
    longitude: _propTypes.default.number.isRequired
  }).isRequired,
  centerOffset: _propTypes.default.shape({
    x: _propTypes.default.number.isRequired,
    y: _propTypes.default.number.isRequired
  }),
  calloutOffset: _propTypes.default.shape({
    x: _propTypes.default.number.isRequired,
    y: _propTypes.default.number.isRequired
  }),
  anchor: _propTypes.default.shape({
    x: _propTypes.default.number.isRequired,
    y: _propTypes.default.number.isRequired
  }),
  calloutAnchor: _propTypes.default.shape({
    x: _propTypes.default.number.isRequired,
    y: _propTypes.default.number.isRequired
  }),
  flat: _propTypes.default.bool,
  draggable: _propTypes.default.bool,
  tracksViewChanges: _propTypes.default.bool,
  tracksInfoWindowChanges: _propTypes.default.bool,
  stopPropagation: _propTypes.default.bool,
  onPress: _propTypes.default.func,
  onSelect: _propTypes.default.func,
  onDeselect: _propTypes.default.func,
  onCalloutPress: _propTypes.default.func,
  onDragStart: _propTypes.default.func,
  onDrag: _propTypes.default.func,
  onDragEnd: _propTypes.default.func
});

var defaultProps = {
  stopPropagation: false
};

var MapMarker = function (_React$Component) {
  (0, _inherits2.default)(MapMarker, _React$Component);

  function MapMarker(props) {
    var _this;

    (0, _classCallCheck2.default)(this, MapMarker);
    _this = (0, _possibleConstructorReturn2.default)(this, (0, _getPrototypeOf2.default)(MapMarker).call(this, props));
    _this.showCallout = _this.showCallout.bind((0, _assertThisInitialized2.default)(_this));
    _this.hideCallout = _this.hideCallout.bind((0, _assertThisInitialized2.default)(_this));
    _this.redrawCallout = _this.redrawCallout.bind((0, _assertThisInitialized2.default)(_this));
    _this.animateMarkerToCoordinate = _this.animateMarkerToCoordinate.bind((0, _assertThisInitialized2.default)(_this));
    return _this;
  }

  (0, _createClass2.default)(MapMarker, [{
    key: "setNativeProps",
    value: function setNativeProps(props) {
      this.marker.setNativeProps(props);
    }
  }, {
    key: "showCallout",
    value: function showCallout() {
      this._runCommand('showCallout', []);
    }
  }, {
    key: "hideCallout",
    value: function hideCallout() {
      this._runCommand('hideCallout', []);
    }
  }, {
    key: "redrawCallout",
    value: function redrawCallout() {
      this._runCommand('redrawCallout', []);
    }
  }, {
    key: "animateMarkerToCoordinate",
    value: function animateMarkerToCoordinate(coordinate, duration) {
      this._runCommand('animateMarkerToCoordinate', [coordinate, duration || 500]);
    }
  }, {
    key: "redraw",
    value: function redraw() {
      this._runCommand('redraw', []);
    }
  }, {
    key: "_getHandle",
    value: function _getHandle() {
      return (0, _reactNative.findNodeHandle)(this.marker);
    }
  }, {
    key: "_runCommand",
    value: function _runCommand(name, args) {
      switch (_reactNative.Platform.OS) {
        case 'android':
          _reactNative.NativeModules.UIManager.dispatchViewManagerCommand(this._getHandle(), this.getUIManagerCommand(name), args);

          break;

        case 'ios':
          this.getMapManagerCommand(name).apply(void 0, [this._getHandle()].concat((0, _toConsumableArray2.default)(args)));
          break;

        default:
          break;
      }
    }
  }, {
    key: "render",
    value: function render() {
      var _this2 = this;

      var image;

      if (this.props.image) {
        image = _reactNative.Image.resolveAssetSource(this.props.image) || {};
        image = image.uri || this.props.image;
      }

      var icon;

      if (this.props.icon) {
        icon = _reactNative.Image.resolveAssetSource(this.props.icon) || {};
        icon = icon.uri;
      }

      var AIRMapMarker = this.getAirComponent();
      return _react.default.createElement(AIRMapMarker, (0, _extends2.default)({
        ref: function ref(_ref) {
          _this2.marker = _ref;
        }
      }, this.props, {
        image: image,
        icon: icon,
        style: [styles.marker, this.props.style],
        onPress: function onPress(event) {
          if (_this2.props.stopPropagation) {
            event.stopPropagation();
          }

          if (_this2.props.onPress) {
            _this2.props.onPress(event);
          }
        }
      }));
    }
  }]);
  return MapMarker;
}(_react.default.Component);

MapMarker.propTypes = propTypes;
MapMarker.defaultProps = defaultProps;
MapMarker.viewConfig = viewConfig;

var styles = _reactNative.StyleSheet.create({
  marker: {
    position: 'absolute',
    backgroundColor: 'transparent'
  }
});

MapMarker.Animated = _reactNative.Animated.createAnimatedComponent(MapMarker);

var _default = (0, _decorateMapComponent.default)(MapMarker, {
  componentType: 'Marker',
  providers: {
    google: {
      ios: _decorateMapComponent.SUPPORTED,
      android: _decorateMapComponent.USES_DEFAULT_IMPLEMENTATION
    }
  }
});

exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIk1hcE1hcmtlci5qcyJdLCJuYW1lcyI6WyJ2aWV3Q29uZmlnIiwidWlWaWV3Q2xhc3NOYW1lIiwidmFsaWRBdHRyaWJ1dGVzIiwiY29vcmRpbmF0ZSIsInZpZXdQcm9wVHlwZXMiLCJWaWV3UHJvcFR5cGVzIiwiVmlldyIsInByb3BUeXBlcyIsImlkZW50aWZpZXIiLCJQcm9wVHlwZXMiLCJzdHJpbmciLCJyZXVzZUlkZW50aWZpZXIiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwidGVzdElEIiwiaW1hZ2UiLCJhbnkiLCJpY29uIiwib3BhY2l0eSIsIm51bWJlciIsInBpbkNvbG9yIiwiQ29sb3JQcm9wVHlwZSIsInNoYXBlIiwibGF0aXR1ZGUiLCJpc1JlcXVpcmVkIiwibG9uZ2l0dWRlIiwiY2VudGVyT2Zmc2V0IiwieCIsInkiLCJjYWxsb3V0T2Zmc2V0IiwiYW5jaG9yIiwiY2FsbG91dEFuY2hvciIsImZsYXQiLCJib29sIiwiZHJhZ2dhYmxlIiwidHJhY2tzVmlld0NoYW5nZXMiLCJ0cmFja3NJbmZvV2luZG93Q2hhbmdlcyIsInN0b3BQcm9wYWdhdGlvbiIsIm9uUHJlc3MiLCJmdW5jIiwib25TZWxlY3QiLCJvbkRlc2VsZWN0Iiwib25DYWxsb3V0UHJlc3MiLCJvbkRyYWdTdGFydCIsIm9uRHJhZyIsIm9uRHJhZ0VuZCIsImRlZmF1bHRQcm9wcyIsIk1hcE1hcmtlciIsInByb3BzIiwic2hvd0NhbGxvdXQiLCJiaW5kIiwiaGlkZUNhbGxvdXQiLCJyZWRyYXdDYWxsb3V0IiwiYW5pbWF0ZU1hcmtlclRvQ29vcmRpbmF0ZSIsIm1hcmtlciIsInNldE5hdGl2ZVByb3BzIiwiX3J1bkNvbW1hbmQiLCJkdXJhdGlvbiIsIm5hbWUiLCJhcmdzIiwiUGxhdGZvcm0iLCJPUyIsIk5hdGl2ZU1vZHVsZXMiLCJVSU1hbmFnZXIiLCJkaXNwYXRjaFZpZXdNYW5hZ2VyQ29tbWFuZCIsIl9nZXRIYW5kbGUiLCJnZXRVSU1hbmFnZXJDb21tYW5kIiwiZ2V0TWFwTWFuYWdlckNvbW1hbmQiLCJJbWFnZSIsInJlc29sdmVBc3NldFNvdXJjZSIsInVyaSIsIkFJUk1hcE1hcmtlciIsImdldEFpckNvbXBvbmVudCIsInJlZiIsInN0eWxlcyIsInN0eWxlIiwiZXZlbnQiLCJSZWFjdCIsIkNvbXBvbmVudCIsIlN0eWxlU2hlZXQiLCJjcmVhdGUiLCJwb3NpdGlvbiIsImJhY2tncm91bmRDb2xvciIsIkFuaW1hdGVkIiwiY3JlYXRlQW5pbWF0ZWRDb21wb25lbnQiLCJjb21wb25lbnRUeXBlIiwicHJvdmlkZXJzIiwiZ29vZ2xlIiwiaW9zIiwiU1VQUE9SVEVEIiwiYW5kcm9pZCIsIlVTRVNfREVGQVVMVF9JTVBMRU1FTlRBVElPTiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBWUE7Ozs7OztBQUtBLElBQU1BLFVBQVUsR0FBRztBQUNqQkMsRUFBQUEsZUFBZSxFQUFFLHdCQURBO0FBRWpCQyxFQUFBQSxlQUFlLEVBQUU7QUFDZkMsSUFBQUEsVUFBVSxFQUFFO0FBREc7QUFGQSxDQUFuQjtBQVFBLElBQU1DLGFBQWEsR0FBR0MsOEJBQWlCQyxrQkFBS0MsU0FBNUM7O0FBRUEsSUFBTUEsU0FBUyxxQkFDVkgsYUFEVTtBQUliSSxFQUFBQSxVQUFVLEVBQUVDLG1CQUFVQyxNQUpUO0FBS2JDLEVBQUFBLGVBQWUsRUFBRUYsbUJBQVVDLE1BTGQ7QUFZYkUsRUFBQUEsS0FBSyxFQUFFSCxtQkFBVUMsTUFaSjtBQW1CYkcsRUFBQUEsV0FBVyxFQUFFSixtQkFBVUMsTUFuQlY7QUF3QmJJLEVBQUFBLE1BQU0sRUFBRUwsbUJBQVVDLE1BeEJMO0FBOEJiSyxFQUFBQSxLQUFLLEVBQUVOLG1CQUFVTyxHQTlCSjtBQXNDYkMsRUFBQUEsSUFBSSxFQUFFUixtQkFBVU8sR0F0Q0g7QUEyQ2JFLEVBQUFBLE9BQU8sRUFBRVQsbUJBQVVVLE1BM0NOO0FBaURiQyxFQUFBQSxRQUFRLEVBQUVDLDBCQWpERztBQXNEYmxCLEVBQUFB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QUFDN0NzQyxFQUFBQSxhQUFhLEVBQUUsUUFEOEI7QUFFN0NDLEVBQUFBLFNBQVMsRUFBRTtBQUNUQyxJQUFBQSxNQUFNLEVBQUU7QUFDTkMsTUFBQUEsR0FBRyxFQUFFQywrQkFEQztBQUVOQyxNQUFBQSxPQUFPLEVBQUVDO0FBRkg7QUFEQztBQUZrQyxDQUFoQyxDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQge1xuICBDb2xvclByb3BUeXBlLFxuICBTdHlsZVNoZWV0LFxuICBQbGF0Zm9ybSxcbiAgTmF0aXZlTW9kdWxlcyxcbiAgQW5pbWF0ZWQsXG4gIEltYWdlLFxuICBmaW5kTm9kZUhhbmRsZSxcbiAgVmlld1Byb3BUeXBlcyxcbiAgVmlldyxcbn0gZnJvbSAncmVhY3QtbmF0aXZlJztcblxuaW1wb3J0IGRlY29yYXRlTWFwQ29tcG9uZW50LCB7XG4gIFNVUFBPUlRFRCxcbiAgVVNFU19ERUZBVUxUX0lNUExFTUVOVEFUSU9OLFxufSBmcm9tICcuL2RlY29yYXRlTWFwQ29tcG9uZW50JztcblxuY29uc3Qgdmlld0NvbmZpZyA9IHtcbiAgdWlWaWV3Q2xhc3NOYW1lOiAnQUlSPHByb3ZpZGVyPk1hcE1hcmtlcicsXG4gIHZhbGlkQXR0cmlidXRlczoge1xuICAgIGNvb3JkaW5hdGU6IHRydWUsXG4gIH0sXG59O1xuXG4vLyBpZiBWaWV3UHJvcFR5cGVzIGlzIG5vdCBkZWZpbmVkIGZhbGwgYmFjayB0byBWaWV3LnByb3BUeXBlICh0byBzdXBwb3J0IFJOIDwgMC40NClcbmNvbnN0IHZpZXdQcm9wVHlwZXMgPSBWaWV3UHJvcFR5cGVzIHx8IFZpZXcucHJvcFR5cGVzO1xuXG5jb25zdCBwcm9wVHlwZXMgPSB7XG4gIC4uLnZpZXdQcm9wVHlwZXMsXG5cbiAgLy8gVE9ETyhsbXIpOiBnZXQgcmlkIG9mIHRoZXNlP1xuICBpZGVudGlmaWVyOiBQcm9wVHlwZXMuc3RyaW5nLFxuICByZXVzZUlkZW50aWZpZXI6IFByb3BUeXBlcy5zdHJpbmcsXG5cbiAgLyoqXG4gICAqIFRoZSB0aXRsZSBvZiB0aGUgbWFya2VyLiBUaGlzIGlzIG9ubHkgdXNlZCBpZiB0aGUgPE1hcmtlciAvPiBjb21wb25lbnQgaGFzIG5vIGNoaWxkcmVuIHRoYXRcbiAgICogYXJlIGEgYDxDYWxsb3V0IC8+YCwgaW4gd2hpY2ggY2FzZSB0aGUgZGVmYXVsdCBjYWxsb3V0IGJlaGF2aW9yIHdpbGwgYmUgdXNlZCwgd2hpY2hcbiAgICogd2lsbCBzaG93IGJvdGggdGhlIGB0aXRsZWAgYW5kIHRoZSBgZGVzY3JpcHRpb25gLCBpZiBwcm92aWRlZC5cbiAgICovXG4gIHRpdGxlOiBQcm9wVHlwZXMuc3RyaW5nLFxuXG4gIC8qKlxuICAgKiBUaGUgZGVzY3JpcHRpb24gb2YgdGhlIG1hcmtlci4gVGhpcyBpcyBvbmx5IHVzZWQgaWYgdGhlIDxNYXJrZXIgLz4gY29tcG9uZW50IGhhcyBubyBjaGlsZHJlblxuICAgKiB0aGF0IGFyZSBhIGA8Q2FsbG91dCAvPmAsIGluIHdoaWNoIGNhc2UgdGhlIGRlZmF1bHQgY2FsbG91dCBiZWhhdmlvciB3aWxsIGJlIHVzZWQsXG4gICAqIHdoaWNoIHdpbGwgc2hvdyBib3RoIHRoZSBgdGl0bGVgIGFuZCB0aGUgYGRlc2NyaXB0aW9uYCwgaWYgcHJvdmlkZWQuXG4gICAqL1xuICBkZXNjcmlwdGlvbjogUHJvcFR5cGVzLnN0cmluZyxcblxuICAvKipcbiAgICogVGVzdCBJRCBmb3IgZW5kIHRvIGVuZCB0ZXN0IGF1dG9tYXRpb25cbiAgICovXG4gIHRlc3RJRDogUHJvcFR5cGVzLnN0cmluZyxcblxuICAvKipcbiAgICogQSBjdXN0b20gaW1hZ2UgdG8gYmUgdXNlZCBhcyB0aGUgbWFya2VyJ3MgaWNvbi4gT25seSBsb2NhbCBpbWFnZSByZXNvdXJjZXMgYXJlIGFsbG93ZWQgdG8gYmVcbiAgICogdXNlZC5cbiAgICovXG4gIGltYWdlOiBQcm9wVHlwZXMuYW55LFxuXG4gIC8qKlxuICAgKiBNYXJrZXIgaWNvbiB0byByZW5kZXIgKGVxdWl2YWxlbnQgdG8gYGljb25gIHByb3BlcnR5IG9mIEdNU01hcmtlciBDbGFzcykuXG4gICAqIFVzaW5nIHRoaXMgcHJvcGVydHkgaGFzIGFuIGFkdmFudGFnZSBvdmVyIGBpbWFnZWAgaW4gdGVybSBvZiBwZXJmb3JtYW5jZSwgYmF0dGVyeSB1c2FnZS4uLlxuICAgKiBiZWNhdXNlIGl0IGRvZXNuJ3QgdHJpZ2dlciB0cmFja3NWaWV3Q2hhbmdlcy5cbiAgICogKHRyYWNrc1ZpZXdDaGFuZ2VzIGlzIHNldCB0byBZRVMgYnkgZGVmYXVsdCBpZiBpY29uVmlldyBpcyBub3QgbmlsKS5cbiAgICovXG4gIGljb246IFByb3BUeXBlcy5hbnksXG5cbiAgLyoqXG4gICAqIE9wYWNpdHkgbGV2ZWwgb2Ygdmlldy9pbWFnZSBiYXNlZCBtYXJrZXJzXG4gICAqL1xuICBvcGFjaXR5OiBQcm9wVHlwZXMubnVtYmVyLFxuXG4gIC8qKlxuICAgKiBJZiBubyBjdXN0b20gbWFya2VyIHZpZXcgb3IgY3VzdG9tIGltYWdlIGlzIHByb3ZpZGVkLCB0aGUgcGxhdGZvcm0gZGVmYXVsdCBwaW4gd2lsbCBiZSB1c2VkLFxuICAgKiB3aGljaCBjYW4gYmUgY3VzdG9taXplZCBieSB0aGlzIGNvbG9yLiBJZ25vcmVkIGlmIGEgY3VzdG9tIG1hcmtlciBpcyBiZWluZyB1c2VkLlxuICAgKi9cbiAgcGluQ29sb3I6IENvbG9yUHJvcFR5cGUsXG5cbiAgLyoqXG4gICAqIFRoZSBjb29yZGluYXRlIGZvciB0aGUgbWFya2VyLlxuICAgKi9cbiAgY29vcmRpbmF0ZTogUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAvKipcbiAgICAgKiBDb29yZGluYXRlcyBmb3IgdGhlIGFuY2hvciBwb2ludCBvZiB0aGUgbWFya2VyLlxuICAgICAqL1xuICAgIGxhdGl0dWRlOiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gICAgbG9uZ2l0dWRlOiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gIH0pLmlzUmVxdWlyZWQsXG5cbiAgLyoqXG4gICAqIFRoZSBvZmZzZXQgKGluIHBvaW50cykgYXQgd2hpY2ggdG8gZGlzcGxheSB0aGUgdmlldy5cbiAgICpcbiAgICogQnkgZGVmYXVsdCwgdGhlIGNlbnRlciBwb2ludCBvZiBhbiBhbm5vdGF0aW9uIHZpZXcgaXMgcGxhY2VkIGF0IHRoZSBjb29yZGluYXRlIHBvaW50IG9mIHRoZVxuICAgKiBhc3NvY2lhdGVkIGFubm90YXRpb24uIFlvdSBjYW4gdXNlIHRoaXMgcHJvcGVydHkgdG8gcmVwb3NpdGlvbiB0aGUgYW5ub3RhdGlvbiB2aWV3IGFzXG4gICAqIG5lZWRlZC4gVGhpcyB4IGFuZCB5IG9mZnNldCB2YWx1ZXMgYXJlIG1lYXN1cmVkIGluIHBvaW50cy4gUG9zaXRpdmUgb2Zmc2V0IHZhbHVlcyBtb3ZlIHRoZVxuICAgKiBhbm5vdGF0aW9uIHZpZXcgZG93biBhbmQgdG8gdGhlIHJpZ2h0LCB3aGlsZSBuZWdhdGl2ZSB2YWx1ZXMgbW92ZSBpdCB1cCBhbmQgdG8gdGhlIGxlZnQuXG4gICAqXG4gICAqIEZvciBhbmRyb2lkLCBzZWUgdGhlIGBhbmNob3JgIHByb3AuXG4gICAqXG4gICAqIEBwbGF0Zm9ybSBpb3NcbiAgICovXG4gIGNlbnRlck9mZnNldDogUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAvKipcbiAgICAgKiBPZmZzZXQgZnJvbSB0aGUgYW5jaG9yIHBvaW50XG4gICAgICovXG4gICAgeDogUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLFxuICAgIHk6IFByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCxcbiAgfSksXG5cbiAgLyoqXG4gICAqIFRoZSBvZmZzZXQgKGluIHBvaW50cykgYXQgd2hpY2ggdG8gcGxhY2UgdGhlIGNhbGxvdXQgYnViYmxlLlxuICAgKlxuICAgKiBUaGlzIHByb3BlcnR5IGRldGVybWluZXMgdGhlIGFkZGl0aW9uYWwgZGlzdGFuY2UgYnkgd2hpY2ggdG8gbW92ZSB0aGUgY2FsbG91dCBidWJibGUuIFdoZW5cbiAgICogdGhpcyBwcm9wZXJ0eSBpcyBzZXQgdG8gKDAsIDApLCB0aGUgYW5jaG9yIHBvaW50IG9mIHRoZSBjYWxsb3V0IGJ1YmJsZSBpcyBwbGFjZWQgb24gdGhlXG4gICAqIHRvcC1jZW50ZXIgcG9pbnQgb2YgdGhlIG1hcmtlciB2aWV34oCZcyBmcmFtZS4gU3BlY2lmeWluZyBwb3NpdGl2ZSBvZmZzZXQgdmFsdWVzIG1vdmVzIHRoZVxuICAgKiBjYWxsb3V0IGJ1YmJsZSBkb3duIGFuZCB0byB0aGUgcmlnaHQsIHdoaWxlIHNwZWNpZnlpbmcgbmVnYXRpdmUgdmFsdWVzIG1vdmVzIGl0IHVwIGFuZCB0b1xuICAgKiB0aGUgbGVmdC5cbiAgICpcbiAgICogRm9yIGFuZHJvaWQsIHNlZSB0aGUgYGNhbGxvdXRBbmNob3JgIHByb3AuXG4gICAqXG4gICAqIEBwbGF0Zm9ybSBpb3NcbiAgICovXG4gIGNhbGxvdXRPZmZzZXQ6IFByb3BUeXBlcy5zaGFwZSh7XG4gICAgLyoqXG4gICAgICogT2Zmc2V0IHRvIHRoZSBjYWxsb3V0XG4gICAgICovXG4gICAgeDogUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLFxuICAgIHk6IFByb3BUeXBlcy5udW1iZXIuaXNSZXF1aXJlZCxcbiAgfSksXG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGFuY2hvciBwb2ludCBmb3IgdGhlIG1hcmtlci5cbiAgICpcbiAgICogVGhlIGFuY2hvciBzcGVjaWZpZXMgdGhlIHBvaW50IGluIHRoZSBpY29uIGltYWdlIHRoYXQgaXMgYW5jaG9yZWQgdG8gdGhlIG1hcmtlcidzIHBvc2l0aW9uXG4gICAqIG9uIHRoZSBFYXJ0aCdzIHN1cmZhY2UuXG4gICAqXG4gICAqIFRoZSBhbmNob3IgcG9pbnQgaXMgc3BlY2lmaWVkIGluIHRoZSBjb250aW51b3VzIHNwYWNlIFswLjAsIDEuMF0geCBbMC4wLCAxLjBdLCB3aGVyZSAoMCwgMClcbiAgICogaXMgdGhlIHRvcC1sZWZ0IGNvcm5lciBvZiB0aGUgaW1hZ2UsIGFuZCAoMSwgMSkgaXMgdGhlIGJvdHRvbS1yaWdodCBjb3JuZXIuIFRoZSBhbmNob3JpbmdcbiAgICogcG9pbnQgaW4gYSBXIHggSCBpbWFnZSBpcyB0aGUgbmVhcmVzdCBkaXNjcmV0ZSBncmlkIHBvaW50IGluIGEgKFcgKyAxKSB4IChIICsgMSkgZ3JpZCxcbiAgICogb2J0YWluZWQgYnkgc2NhbGluZyB0aGUgdGhlbiByb3VuZGluZy4gRm9yIGV4YW1wbGUsIGluIGEgNCB4IDIgaW1hZ2UsIHRoZSBhbmNob3IgcG9pbnRcbiAgICogKDAuNywgMC42KSByZXNvbHZlcyB0byB0aGUgZ3JpZCBwb2ludCBhdCAoMywgMSkuXG4gICAqXG4gICAqIEZvciBpb3MsIHNlZSB0aGUgYGNlbnRlck9mZnNldGAgcHJvcC5cbiAgICpcbiAgICogQHBsYXRmb3JtIGFuZHJvaWRcbiAgICovXG4gIGFuY2hvcjogUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAvKipcbiAgICAgKiBPZmZzZXQgdG8gdGhlIGNhbGxvdXRcbiAgICAgKi9cbiAgICB4OiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gICAgeTogUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLFxuICB9KSxcblxuICAvKipcbiAgICogU3BlY2lmaWVzIHRoZSBwb2ludCBpbiB0aGUgbWFya2VyIGltYWdlIGF0IHdoaWNoIHRvIGFuY2hvciB0aGUgY2FsbG91dCB3aGVuIGl0IGlzIGRpc3BsYXllZC5cbiAgICogVGhpcyBpcyBzcGVjaWZpZWQgaW4gdGhlIHNhbWUgY29vcmRpbmF0ZSBzeXN0ZW0gYXMgdGhlIGFuY2hvci4gU2VlIHRoZSBgYW5kb3JgIHByb3AgZm9yIG1vcmVcbiAgICogZGV0YWlscy5cbiAgICpcbiAgICogVGhlIGRlZmF1bHQgaXMgdGhlIHRvcCBtaWRkbGUgb2YgdGhlIGltYWdlLlxuICAgKlxuICAgKiBGb3IgaW9zLCBzZWUgdGhlIGBjYWxsb3V0T2Zmc2V0YCBwcm9wLlxuICAgKlxuICAgKiBAcGxhdGZvcm0gYW5kcm9pZFxuICAgKi9cbiAgY2FsbG91dEFuY2hvcjogUHJvcFR5cGVzLnNoYXBlKHtcbiAgICAvKipcbiAgICAgKiBPZmZzZXQgdG8gdGhlIGNhbGxvdXRcbiAgICAgKi9cbiAgICB4OiBQcm9wVHlwZXMubnVtYmVyLmlzUmVxdWlyZWQsXG4gICAgeTogUHJvcFR5cGVzLm51bWJlci5pc1JlcXVpcmVkLFxuICB9KSxcblxuICAvKipcbiAgICogU2V0cyB3aGV0aGVyIHRoaXMgbWFya2VyIHNob3VsZCBiZSBmbGF0IGFnYWluc3QgdGhlIG1hcCB0cnVlIG9yIGEgYmlsbGJvYXJkIGZhY2luZyB0aGVcbiAgICogY2FtZXJhIGZhbHNlLlxuICAgKlxuICAgKiBAcGxhdGZvcm0gYW5kcm9pZFxuICAgKi9cbiAgZmxhdDogUHJvcFR5cGVzLmJvb2wsXG5cbiAgZHJhZ2dhYmxlOiBQcm9wVHlwZXMuYm9vbCxcblxuICAvKipcbiAgICogU2V0cyB3aGV0aGVyIHRoaXMgbWFya2VyIHNob3VsZCB0cmFjayB2aWV3IGNoYW5nZXMgdHJ1ZS5cbiAgICovXG5cbiAgdHJhY2tzVmlld0NoYW5nZXM6IFByb3BUeXBlcy5ib29sLFxuXG4gIC8qKlxuICAgKiBTZXRzIHdoZXRoZXIgdGhpcyBtYXJrZXIgc2hvdWxkIHRyYWNrIHZpZXcgY2hhbmdlcyBpbiBpbmZvIHdpbmRvdyB0cnVlLlxuICAgKlxuICAgKiBAcGxhdGZvcm0gaW9zXG4gICAqL1xuXG4gIHRyYWNrc0luZm9XaW5kb3dDaGFuZ2VzOiBQcm9wVHlwZXMuYm9vbCxcblxuICAvKipcbiAgICogU3RvcHMgTWFya2VyIG9uUHJlc3MgZXZlbnRzIGZyb20gcHJvcGFnYXRpbmcgdG8gYW5kIHRyaWdnZXJpbmcgTWFwVmlldyBvblByZXNzIGV2ZW50cy5cbiAgICpcbiAgICogQHBsYXRmb3JtIGlvc1xuICAgKi9cblxuICBzdG9wUHJvcGFnYXRpb246IFByb3BUeXBlcy5ib29sLFxuXG4gIC8qKlxuICAgKiBDYWxsYmFjayB0aGF0IGlzIGNhbGxlZCB3aGVuIHRoZSB1c2VyIHByZXNzZXMgb24gdGhlIG1hcmtlclxuICAgKi9cbiAgb25QcmVzczogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgLyoqXG4gICAqIENhbGxiYWNrIHRoYXQgaXMgY2FsbGVkIHdoZW4gdGhlIHVzZXIgc2VsZWN0cyB0aGUgbWFya2VyLCBiZWZvcmUgdGhlIGNhbGxvdXQgaXMgc2hvd24uXG4gICAqXG4gICAqIEBwbGF0Zm9ybSBpb3NcbiAgICovXG4gIG9uU2VsZWN0OiBQcm9wVHlwZXMuZnVuYyxcblxuICAvKipcbiAgICogQ2FsbGJhY2sgdGhhdCBpcyBjYWxsZWQgd2hlbiB0aGUgbWFya2VyIGlzIGRlc2VsZWN0ZWQsIGJlZm9yZSB0aGUgY2FsbG91dCBpcyBoaWRkZW4uXG4gICAqXG4gICAqIEBwbGF0Zm9ybSBpb3NcbiAgICovXG4gIG9uRGVzZWxlY3Q6IFByb3BUeXBlcy5mdW5jLFxuXG4gIC8qKlxuICAgKiBDYWxsYmFjayB0aGF0IGlzIGNhbGxlZCB3aGVuIHRoZSB1c2VyIHRhcHMgdGhlIGNhbGxvdXQgdmlldy5cbiAgICovXG4gIG9uQ2FsbG91dFByZXNzOiBQcm9wVHlwZXMuZnVuYyxcblxuICAvKipcbiAgICogQ2FsbGJhY2sgdGhhdCBpcyBjYWxsZWQgd2hlbiB0aGUgdXNlciBpbml0aWF0ZXMgYSBkcmFnIG9uIHRoaXMgbWFya2VyIChpZiBpdCBpcyBkcmFnZ2FibGUpXG4gICAqL1xuICBvbkRyYWdTdGFydDogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgLyoqXG4gICAqIENhbGxiYWNrIGNhbGxlZCBjb250aW51b3VzbHkgYXMgdGhlIG1hcmtlciBpcyBkcmFnZ2VkXG4gICAqL1xuICBvbkRyYWc6IFByb3BUeXBlcy5mdW5jLFxuXG4gIC8qKlxuICAgKiBDYWxsYmFjayB0aGF0IGlzIGNhbGxlZCB3aGVuIGEgZHJhZyBvbiB0aGlzIG1hcmtlciBmaW5pc2hlcy4gVGhpcyBpcyB1c3VhbGx5IHRoZSBwb2ludCB5b3VcbiAgICogd2lsbCB3YW50IHRvIHNldFN0YXRlIG9uIHRoZSBtYXJrZXIncyBjb29yZGluYXRlIGFnYWluXG4gICAqL1xuICBvbkRyYWdFbmQ6IFByb3BUeXBlcy5mdW5jLFxufTtcblxuY29uc3QgZGVmYXVsdFByb3BzID0ge1xuICBzdG9wUHJvcGFnYXRpb246IGZhbHNlLFxufTtcblxuY2xhc3MgTWFwTWFya2VyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG5cbiAgICB0aGlzLnNob3dDYWxsb3V0ID0gdGhpcy5zaG93Q2FsbG91dC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaGlkZUNhbGxvdXQgPSB0aGlzLmhpZGVDYWxsb3V0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5yZWRyYXdDYWxsb3V0ID0gdGhpcy5yZWRyYXdDYWxsb3V0LmJpbmQodGhpcyk7XG4gICAgdGhpcy5hbmltYXRlTWFya2VyVG9Db29yZGluYXRlID0gdGhpcy5hbmltYXRlTWFya2VyVG9Db29yZGluYXRlLmJpbmQodGhpcyk7XG4gIH1cblxuICBzZXROYXRpdmVQcm9wcyhwcm9wcykge1xuICAgIHRoaXMubWFya2VyLnNldE5hdGl2ZVByb3BzKHByb3BzKTtcbiAgfVxuXG4gIHNob3dDYWxsb3V0KCkge1xuICAgIHRoaXMuX3J1bkNvbW1hbmQoJ3Nob3dDYWxsb3V0JywgW10pO1xuICB9XG5cbiAgaGlkZUNhbGxvdXQoKSB7XG4gICAgdGhpcy5fcnVuQ29tbWFuZCgnaGlkZUNhbGxvdXQnLCBbXSk7XG4gIH1cblxuICByZWRyYXdDYWxsb3V0KCkge1xuICAgIHRoaXMuX3J1bkNvbW1hbmQoJ3JlZHJhd0NhbGxvdXQnLCBbXSk7XG4gIH1cblxuICBhbmltYXRlTWFya2VyVG9Db29yZGluYXRlKGNvb3JkaW5hdGUsIGR1cmF0aW9uKSB7XG4gICAgdGhpcy5fcnVuQ29tbWFuZCgnYW5pbWF0ZU1hcmtlclRvQ29vcmRpbmF0ZScsIFtcbiAgICAgIGNvb3JkaW5hdGUsXG4gICAgICBkdXJhdGlvbiB8fCA1MDAsXG4gICAgXSk7XG4gIH1cblxuICByZWRyYXcoKSB7XG4gICAgdGhpcy5fcnVuQ29tbWFuZCgncmVkcmF3JywgW10pO1xuICB9XG5cbiAgX2dldEhhbmRsZSgpIHtcbiAgICByZXR1cm4gZmluZE5vZGVIYW5kbGUodGhpcy5tYXJrZXIpO1xuICB9XG5cbiAgX3J1bkNvbW1hbmQobmFtZSwgYXJncykge1xuICAgIHN3aXRjaCAoUGxhdGZvcm0uT1MpIHtcbiAgICAgIGNhc2UgJ2FuZHJvaWQnOlxuICAgICAgICBOYXRpdmVNb2R1bGVzLlVJTWFuYWdlci5kaXNwYXRjaFZpZXdNYW5hZ2VyQ29tbWFuZChcbiAgICAgICAgICB0aGlzLl9nZXRIYW5kbGUoKSxcbiAgICAgICAgICB0aGlzLmdldFVJTWFuYWdlckNvbW1hbmQobmFtZSksXG4gICAgICAgICAgYXJnc1xuICAgICAgICApO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnaW9zJzpcbiAgICAgICAgdGhpcy5nZXRNYXBNYW5hZ2VyQ29tbWFuZChuYW1lKSh0aGlzLl9nZXRIYW5kbGUoKSwgLi4uYXJncyk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgbGV0IGltYWdlO1xuICAgIGlmICh0aGlzLnByb3BzLmltYWdlKSB7XG4gICAgICBpbWFnZSA9IEltYWdlLnJlc29sdmVBc3NldFNvdXJjZSh0aGlzLnByb3BzLmltYWdlKSB8fCB7fTtcbiAgICAgIGltYWdlID0gaW1hZ2UudXJpIHx8IHRoaXMucHJvcHMuaW1hZ2U7XG4gICAgfVxuXG4gICAgbGV0IGljb247XG4gICAgaWYgKHRoaXMucHJvcHMuaWNvbikge1xuICAgICAgaWNvbiA9IEltYWdlLnJlc29sdmVBc3NldFNvdXJjZSh0aGlzLnByb3BzLmljb24pIHx8IHt9O1xuICAgICAgaWNvbiA9IGljb24udXJpO1xuICAgIH1cblxuICAgIGNvbnN0IEFJUk1hcE1hcmtlciA9IHRoaXMuZ2V0QWlyQ29tcG9uZW50KCk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgPEFJUk1hcE1hcmtlclxuICAgICAgICByZWY9e3JlZiA9PiB7XG4gICAgICAgICAgdGhpcy5tYXJrZXIgPSByZWY7XG4gICAgICAgIH19XG4gICAgICAgIHsuLi50aGlzLnByb3BzfVxuICAgICAgICBpbWFnZT17aW1hZ2V9XG4gICAgICAgIGljb249e2ljb259XG4gICAgICAgIHN0eWxlPXtbc3R5bGVzLm1hcmtlciwgdGhpcy5wcm9wcy5zdHlsZV19XG4gICAgICAgIG9uUHJlc3M9e2V2ZW50ID0+IHtcbiAgICAgICAgICBpZiAodGhpcy5wcm9wcy5zdG9wUHJvcGFnYXRpb24pIHtcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodGhpcy5wcm9wcy5vblByZXNzKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLm9uUHJlc3MoZXZlbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfX1cbiAgICAgIC8+XG4gICAgKTtcbiAgfVxufVxuXG5NYXBNYXJrZXIucHJvcFR5cGVzID0gcHJvcFR5cGVzO1xuTWFwTWFya2VyLmRlZmF1bHRQcm9wcyA9IGRlZmF1bHRQcm9wcztcbk1hcE1hcmtlci52aWV3Q29uZmlnID0gdmlld0NvbmZpZztcblxuY29uc3Qgc3R5bGVzID0gU3R5bGVTaGVldC5jcmVhdGUoe1xuICBtYXJrZXI6IHtcbiAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICBiYWNrZ3JvdW5kQ29sb3I6ICd0cmFuc3BhcmVudCcsXG4gIH0sXG59KTtcblxuTWFwTWFya2VyLkFuaW1hdGVkID0gQW5pbWF0ZWQuY3JlYXRlQW5pbWF0ZWRDb21wb25lbnQoTWFwTWFya2VyKTtcblxuZXhwb3J0IGRlZmF1bHQgZGVjb3JhdGVNYXBDb21wb25lbnQoTWFwTWFya2VyLCB7XG4gIGNvbXBvbmVudFR5cGU6ICdNYXJrZXInLFxuICBwcm92aWRlcnM6IHtcbiAgICBnb29nbGU6IHtcbiAgICAgIGlvczogU1VQUE9SVEVELFxuICAgICAgYW5kcm9pZDogVVNFU19ERUZBVUxUX0lNUExFTUVOVEFUSU9OLFxuICAgIH0sXG4gIH0sXG59KTtcbiJdfQ==