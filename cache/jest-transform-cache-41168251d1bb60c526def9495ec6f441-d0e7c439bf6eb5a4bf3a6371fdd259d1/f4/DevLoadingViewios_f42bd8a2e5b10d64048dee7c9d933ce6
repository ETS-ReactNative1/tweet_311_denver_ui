a5708286e1387ac22859d09ba35ee170
var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = DevLoadingView;

var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));

var _react = _interopRequireWildcard(require("react"));

var _reactNative = require("react-native");

var NativeDevLoadingView = _reactNative.NativeModules.DevLoadingView;
var nativeDevLoadingViewEventEmitter = new _reactNative.NativeEventEmitter(NativeDevLoadingView);

function DevLoadingView() {
  var _useState = (0, _react.useState)(false),
      _useState2 = (0, _slicedToArray2.default)(_useState, 2),
      isDevLoading = _useState2[0],
      setIsDevLoading = _useState2[1];

  var _useState3 = (0, _react.useState)(false),
      _useState4 = (0, _slicedToArray2.default)(_useState3, 2),
      isAnimating = _useState4[0],
      setIsAnimating = _useState4[1];

  var translateY = (0, _react.useRef)(new _reactNative.Animated.Value(0)).current;
  (0, _react.useEffect)(function () {
    function handleShowMessage(_ref) {
      var message = _ref.message;

      if (message !== 'Refreshing...') {
        return;
      }

      translateY.setValue(0);
      setIsDevLoading(true);
    }

    function handleHide() {
      setIsAnimating(true);
      setIsDevLoading(false);

      _reactNative.Animated.timing(translateY, {
        toValue: 150,
        delay: 1000,
        duration: 350,
        useNativeDriver: true
      }).start(function (_ref2) {
        var finished = _ref2.finished;

        if (finished) {
          setIsAnimating(false);
          translateY.setValue(0);
        }
      });
    }

    nativeDevLoadingViewEventEmitter.addListener('devLoadingView:showMessage', handleShowMessage);
    nativeDevLoadingViewEventEmitter.addListener('devLoadingView:hide', handleHide);
    return function cleanup() {
      nativeDevLoadingViewEventEmitter.removeListener('devLoadingView:showMessage', handleShowMessage);
      nativeDevLoadingViewEventEmitter.removeListener('devLoadingView:hide', handleHide);
    };
  }, []);

  if (isDevLoading || isAnimating) {
    return _react.default.createElement(_reactNative.Animated.View, {
      style: [styles.animatedContainer, {
        transform: [{
          translateY: translateY
        }]
      }],
      pointerEvents: "none"
    }, _react.default.createElement(_reactNative.SafeAreaView, {
      style: styles.banner
    }, _react.default.createElement(_reactNative.View, {
      style: styles.contentContainer
    }, _react.default.createElement(_reactNative.View, {
      style: {
        flexDirection: 'row'
      }
    }, _react.default.createElement(_reactNative.Text, {
      style: styles.text
    }, isDevLoading ? 'Refreshing...' : 'Refreshed')), _react.default.createElement(_reactNative.View, {
      style: {
        flex: 1
      }
    }, _react.default.createElement(_reactNative.Text, {
      style: styles.subtitle
    }, isDevLoading ? 'Using Fast Refresh' : "Don't see your changes? Reload the app")))));
  } else {
    return null;
  }
}

var styles = _reactNative.StyleSheet.create({
  animatedContainer: {
    position: 'absolute',
    bottom: 0,
    left: 0,
    right: 0,
    zIndex: 42
  },
  banner: {
    flex: 1,
    overflow: 'visible',
    backgroundColor: 'rgba(0,0,0,0.75)'
  },
  contentContainer: {
    flex: 1,
    paddingTop: 10,
    paddingBottom: 5,
    alignItems: 'center',
    justifyContent: 'center',
    textAlign: 'center'
  },
  text: {
    color: '#fff',
    fontSize: 15
  },
  subtitle: {
    color: 'rgba(255,255,255,0.8)'
  }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9lbnZpcm9ubWVudC9EZXZMb2FkaW5nVmlldy5pb3MudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBVUEsSUFBTSxvQkFBb0IsR0FBRywyQkFBYyxjQUEzQztBQUNBLElBQU0sZ0NBQWdDLEdBQUcsSUFBSSwrQkFBSixDQUF1QixvQkFBdkIsQ0FBekM7O0FBRWMsU0FBVSxjQUFWLEdBQXdCO0FBQUEsa0JBQ0UscUJBQVMsS0FBVCxDQURGO0FBQUE7QUFBQSxNQUMvQixZQUQrQjtBQUFBLE1BQ2pCLGVBRGlCOztBQUFBLG1CQUVBLHFCQUFTLEtBQVQsQ0FGQTtBQUFBO0FBQUEsTUFFL0IsV0FGK0I7QUFBQSxNQUVsQixjQUZrQjs7QUFHcEMsTUFBSSxVQUFVLEdBQUcsbUJBQU8sSUFBSSxzQkFBUyxLQUFiLENBQW1CLENBQW5CLENBQVAsRUFBOEIsT0FBL0M7QUFFQSx3QkFBVSxZQUFLO0FBQ2IsYUFBUyxpQkFBVCxPQUFzQztBQUFBLFVBQVQsT0FBUyxRQUFULE9BQVM7O0FBR3BDLFVBQUksT0FBTyxLQUFLLGVBQWhCLEVBQWlDO0FBQy9CO0FBQ0Q7O0FBTUQsTUFBQSxVQUFVLENBQUMsUUFBWCxDQUFvQixDQUFwQjtBQUNBLE1BQUEsZUFBZSxDQUFDLElBQUQsQ0FBZjtBQUNEOztBQUVELGFBQVMsVUFBVCxHQUFtQjtBQUlqQixNQUFBLGNBQWMsQ0FBQyxJQUFELENBQWQ7QUFDQSxNQUFBLGVBQWUsQ0FBQyxLQUFELENBQWY7O0FBQ0EsNEJBQVMsTUFBVCxDQUFnQixVQUFoQixFQUE0QjtBQUMxQixRQUFBLE9BQU8sRUFBRSxHQURpQjtBQUUxQixRQUFBLEtBQUssRUFBRSxJQUZtQjtBQUcxQixRQUFBLFFBQVEsRUFBRSxHQUhnQjtBQUkxQixRQUFBLGVBQWUsRUFBRTtBQUpTLE9BQTVCLEVBS0csS0FMSCxDQUtTLGlCQUFpQjtBQUFBLFlBQWQsUUFBYyxTQUFkLFFBQWM7O0FBQ3hCLFlBQUksUUFBSixFQUFjO0FBQ1osVUFBQSxjQUFjLENBQUMsS0FBRCxDQUFkO0FBQ0EsVUFBQSxVQUFVLENBQUMsUUFBWCxDQUFvQixDQUFwQjtBQUNEO0FBQ0YsT0FWRDtBQVdEOztBQUVELElBQUEsZ0NBQWdDLENBQUMsV0FBakMsQ0FBNkMsNEJBQTdDLEVBQTJFLGlCQUEzRTtBQUNBLElBQUEsZ0NBQWdDLENBQUMsV0FBakMsQ0FBNkMscUJBQTdDLEVBQW9FLFVBQXBFO0FBRUEsV0FBTyxTQUFTLE9BQVQsR0FBZ0I7QUFDckIsTUFBQSxnQ0FBZ0MsQ0FBQyxjQUFqQyxDQUNFLDRCQURGLEVBRUUsaUJBRkY7QUFJQSxNQUFBLGdDQUFnQyxDQUFDLGNBQWpDLENBQWdELHFCQUFoRCxFQUF1RSxVQUF2RTtBQUNELEtBTkQ7QUFPRCxHQTdDRCxFQTZDRyxFQTdDSDs7QUErQ0EsTUFBSSxZQUFZLElBQUksV0FBcEIsRUFBaUM7QUFDL0IsV0FDRSw2QkFBQyxxQkFBRCxDQUFVLElBQVY7QUFDRSxNQUFBLEtBQUssRUFBRSxDQUFDLE1BQU0sQ0FBQyxpQkFBUixFQUEyQjtBQUFFLFFBQUEsU0FBUyxFQUFFLENBQUM7QUFBRSxVQUFBLFVBQVUsRUFBVjtBQUFGLFNBQUQ7QUFBYixPQUEzQixDQURUO0FBRUUsTUFBQSxhQUFhLEVBQUM7QUFGaEIsT0FHRSw2QkFBQyx5QkFBRDtBQUFjLE1BQUEsS0FBSyxFQUFFLE1BQU0sQ0FBQztBQUE1QixPQUNFLDZCQUFDLGlCQUFEO0FBQU0sTUFBQSxLQUFLLEVBQUUsTUFBTSxDQUFDO0FBQXBCLE9BQ0UsNkJBQUMsaUJBQUQ7QUFBTSxNQUFBLEtBQUssRUFBRTtBQUFFLFFBQUEsYUFBYSxFQUFFO0FBQWpCO0FBQWIsT0FDRSw2QkFBQyxpQkFBRDtBQUFNLE1BQUEsS0FBSyxFQUFFLE1BQU0sQ0FBQztBQUFwQixPQUEyQixZQUFZLEdBQUcsZUFBSCxHQUFxQixXQUE1RCxDQURGLENBREYsRUFJRSw2QkFBQyxpQkFBRDtBQUFNLE1BQUEsS0FBSyxFQUFFO0FBQUUsUUFBQSxJQUFJLEVBQUU7QUFBUjtBQUFiLE9BQ0UsNkJBQUMsaUJBQUQ7QUFBTSxNQUFBLEtBQUssRUFBRSxNQUFNLENBQUM7QUFBcEIsT0FDRyxZQUFZLEdBQUcsb0JBQUgsR0FBMEIsd0NBRHpDLENBREYsQ0FKRixDQURGLENBSEYsQ0FERjtBQWtCRCxHQW5CRCxNQW1CTztBQUNMLFdBQU8sSUFBUDtBQUNEO0FBQ0Y7O0FBRUQsSUFBTSxNQUFNLEdBQUcsd0JBQVcsTUFBWCxDQUFrQjtBQUMvQixFQUFBLGlCQUFpQixFQUFFO0FBQ2pCLElBQUEsUUFBUSxFQUFFLFVBRE87QUFFakIsSUFBQSxNQUFNLEVBQUUsQ0FGUztBQUdqQixJQUFBLElBQUksRUFBRSxDQUhXO0FBSWpCLElBQUEsS0FBSyxFQUFFLENBSlU7QUFLakIsSUFBQSxNQUFNLEVBQUU7QUFMUyxHQURZO0FBUS9CLEVBQUEsTUFBTSxFQUFFO0FBQ04sSUFBQSxJQUFJLEVBQUUsQ0FEQTtBQUVOLElBQUEsUUFBUSxFQUFFLFNBRko7QUFHTixJQUFBLGVBQWUsRUFBRTtBQUhYLEdBUnVCO0FBYS9CLEVBQUEsZ0JBQWdCLEVBQUU7QUFDaEIsSUFBQSxJQUFJLEVBQUUsQ0FEVTtBQUVoQixJQUFBLFVBQVUsRUFBRSxFQUZJO0FBR2hCLElBQUEsYUFBYSxFQUFFLENBSEM7QUFJaEIsSUFBQSxVQUFVLEVBQUUsUUFKSTtBQUtoQixJQUFBLGNBQWMsRUFBRSxRQUxBO0FBTWhCLElBQUEsU0FBUyxFQUFFO0FBTkssR0FiYTtBQXFCL0IsRUFBQSxJQUFJLEVBQUU7QUFDSixJQUFBLEtBQUssRUFBRSxNQURIO0FBRUosSUFBQSxRQUFRLEVBQUU7QUFGTixHQXJCeUI7QUF5Qi9CLEVBQUEsUUFBUSxFQUFFO0FBQ1IsSUFBQSxLQUFLLEVBQUU7QUFEQztBQXpCcUIsQ0FBbEIsQ0FBZiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVN0YXRlLCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQge1xuICBBbmltYXRlZCxcbiAgU3R5bGVTaGVldCxcbiAgU2FmZUFyZWFWaWV3LFxuICBUZXh0LFxuICBOYXRpdmVNb2R1bGVzLFxuICBOYXRpdmVFdmVudEVtaXR0ZXIsXG4gIFZpZXcsXG59IGZyb20gJ3JlYWN0LW5hdGl2ZSc7XG5cbmNvbnN0IE5hdGl2ZURldkxvYWRpbmdWaWV3ID0gTmF0aXZlTW9kdWxlcy5EZXZMb2FkaW5nVmlldztcbmNvbnN0IG5hdGl2ZURldkxvYWRpbmdWaWV3RXZlbnRFbWl0dGVyID0gbmV3IE5hdGl2ZUV2ZW50RW1pdHRlcihOYXRpdmVEZXZMb2FkaW5nVmlldyk7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIERldkxvYWRpbmdWaWV3KCkge1xuICBsZXQgW2lzRGV2TG9hZGluZywgc2V0SXNEZXZMb2FkaW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgbGV0IFtpc0FuaW1hdGluZywgc2V0SXNBbmltYXRpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBsZXQgdHJhbnNsYXRlWSA9IHVzZVJlZihuZXcgQW5pbWF0ZWQuVmFsdWUoMCkpLmN1cnJlbnQ7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmdW5jdGlvbiBoYW5kbGVTaG93TWVzc2FnZSh7IG1lc3NhZ2UgfSkge1xuICAgICAgLy8gXCJSZWZyZXNoaW5nLi4uXCIgaXMgdGhlIHN0YW5kYXJkIGZhc3QgcmVmcmVzaCBtZXNzYWdlIGFuZCBpdCdzIHRoZVxuICAgICAgLy8gb25seSB0aW1lIHdlIHdhbnQgdG8gZGlzcGxheSB0aGlzIG92ZXJsYXkuXG4gICAgICBpZiAobWVzc2FnZSAhPT0gJ1JlZnJlc2hpbmcuLi4nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gVE9ETzogaWYgd2Ugc2hvdyB0aGUgcmVmcmVzaGluZyBiYW5uZXIgYW5kIGRvbid0IGdldCBhIGhpZGUgbWVzc2FnZVxuICAgICAgLy8gZm9yIDMgc2Vjb25kcywgd2FybiB0aGUgdXNlciB0aGF0IGl0J3MgdGFraW5nIGEgd2hpbGUgYW5kIHN1Z2dlc3RcbiAgICAgIC8vIHRoZXkgcmVsb2FkXG5cbiAgICAgIHRyYW5zbGF0ZVkuc2V0VmFsdWUoMCk7XG4gICAgICBzZXRJc0RldkxvYWRpbmcodHJ1ZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaGFuZGxlSGlkZSgpIHtcbiAgICAgIC8vIFRPRE86IGlmIHdlIHNob3dlZCB0aGUgJ3JlZnJlc2hpbmcnIGJhbm5lciBsZXNzIHRoYW4gMjUwbXMgYWdvLCBkZWxheVxuICAgICAgLy8gc3dpdGNoaW5nIHRvIHRoZSAnZmluaXNoZWQnIGJhbm5lclxuXG4gICAgICBzZXRJc0FuaW1hdGluZyh0cnVlKTtcbiAgICAgIHNldElzRGV2TG9hZGluZyhmYWxzZSk7XG4gICAgICBBbmltYXRlZC50aW1pbmcodHJhbnNsYXRlWSwge1xuICAgICAgICB0b1ZhbHVlOiAxNTAsXG4gICAgICAgIGRlbGF5OiAxMDAwLFxuICAgICAgICBkdXJhdGlvbjogMzUwLFxuICAgICAgICB1c2VOYXRpdmVEcml2ZXI6IHRydWUsXG4gICAgICB9KS5zdGFydCgoeyBmaW5pc2hlZCB9KSA9PiB7XG4gICAgICAgIGlmIChmaW5pc2hlZCkge1xuICAgICAgICAgIHNldElzQW5pbWF0aW5nKGZhbHNlKTtcbiAgICAgICAgICB0cmFuc2xhdGVZLnNldFZhbHVlKDApO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBuYXRpdmVEZXZMb2FkaW5nVmlld0V2ZW50RW1pdHRlci5hZGRMaXN0ZW5lcignZGV2TG9hZGluZ1ZpZXc6c2hvd01lc3NhZ2UnLCBoYW5kbGVTaG93TWVzc2FnZSk7XG4gICAgbmF0aXZlRGV2TG9hZGluZ1ZpZXdFdmVudEVtaXR0ZXIuYWRkTGlzdGVuZXIoJ2RldkxvYWRpbmdWaWV3OmhpZGUnLCBoYW5kbGVIaWRlKTtcblxuICAgIHJldHVybiBmdW5jdGlvbiBjbGVhbnVwKCkge1xuICAgICAgbmF0aXZlRGV2TG9hZGluZ1ZpZXdFdmVudEVtaXR0ZXIucmVtb3ZlTGlzdGVuZXIoXG4gICAgICAgICdkZXZMb2FkaW5nVmlldzpzaG93TWVzc2FnZScsXG4gICAgICAgIGhhbmRsZVNob3dNZXNzYWdlXG4gICAgICApO1xuICAgICAgbmF0aXZlRGV2TG9hZGluZ1ZpZXdFdmVudEVtaXR0ZXIucmVtb3ZlTGlzdGVuZXIoJ2RldkxvYWRpbmdWaWV3OmhpZGUnLCBoYW5kbGVIaWRlKTtcbiAgICB9O1xuICB9LCBbXSk7XG5cbiAgaWYgKGlzRGV2TG9hZGluZyB8fCBpc0FuaW1hdGluZykge1xuICAgIHJldHVybiAoXG4gICAgICA8QW5pbWF0ZWQuVmlld1xuICAgICAgICBzdHlsZT17W3N0eWxlcy5hbmltYXRlZENvbnRhaW5lciwgeyB0cmFuc2Zvcm06IFt7IHRyYW5zbGF0ZVkgfV0gfV19XG4gICAgICAgIHBvaW50ZXJFdmVudHM9XCJub25lXCI+XG4gICAgICAgIDxTYWZlQXJlYVZpZXcgc3R5bGU9e3N0eWxlcy5iYW5uZXJ9PlxuICAgICAgICAgIDxWaWV3IHN0eWxlPXtzdHlsZXMuY29udGVudENvbnRhaW5lcn0+XG4gICAgICAgICAgICA8VmlldyBzdHlsZT17eyBmbGV4RGlyZWN0aW9uOiAncm93JyB9fT5cbiAgICAgICAgICAgICAgPFRleHQgc3R5bGU9e3N0eWxlcy50ZXh0fT57aXNEZXZMb2FkaW5nID8gJ1JlZnJlc2hpbmcuLi4nIDogJ1JlZnJlc2hlZCd9PC9UZXh0PlxuICAgICAgICAgICAgPC9WaWV3PlxuICAgICAgICAgICAgPFZpZXcgc3R5bGU9e3sgZmxleDogMSB9fT5cbiAgICAgICAgICAgICAgPFRleHQgc3R5bGU9e3N0eWxlcy5zdWJ0aXRsZX0+XG4gICAgICAgICAgICAgICAge2lzRGV2TG9hZGluZyA/ICdVc2luZyBGYXN0IFJlZnJlc2gnIDogXCJEb24ndCBzZWUgeW91ciBjaGFuZ2VzPyBSZWxvYWQgdGhlIGFwcFwifVxuICAgICAgICAgICAgICA8L1RleHQ+XG4gICAgICAgICAgICA8L1ZpZXc+XG4gICAgICAgICAgPC9WaWV3PlxuICAgICAgICA8L1NhZmVBcmVhVmlldz5cbiAgICAgIDwvQW5pbWF0ZWQuVmlldz5cbiAgICApO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbmNvbnN0IHN0eWxlcyA9IFN0eWxlU2hlZXQuY3JlYXRlKHtcbiAgYW5pbWF0ZWRDb250YWluZXI6IHtcbiAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICBib3R0b206IDAsXG4gICAgbGVmdDogMCxcbiAgICByaWdodDogMCxcbiAgICB6SW5kZXg6IDQyLCAvLyBhcmJpdHJhcnlcbiAgfSxcbiAgYmFubmVyOiB7XG4gICAgZmxleDogMSxcbiAgICBvdmVyZmxvdzogJ3Zpc2libGUnLFxuICAgIGJhY2tncm91bmRDb2xvcjogJ3JnYmEoMCwwLDAsMC43NSknLFxuICB9LFxuICBjb250ZW50Q29udGFpbmVyOiB7XG4gICAgZmxleDogMSxcbiAgICBwYWRkaW5nVG9wOiAxMCxcbiAgICBwYWRkaW5nQm90dG9tOiA1LFxuICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcbiAgICB0ZXh0QWxpZ246ICdjZW50ZXInLFxuICB9LFxuICB0ZXh0OiB7XG4gICAgY29sb3I6ICcjZmZmJyxcbiAgICBmb250U2l6ZTogMTUsXG4gIH0sXG4gIHN1YnRpdGxlOiB7XG4gICAgY29sb3I6ICdyZ2JhKDI1NSwyNTUsMjU1LDAuOCknLFxuICB9LFxufSk7XG4iXSwic291cmNlUm9vdCI6IiJ9